# CHECKLIST - ADITIVO (Evolução Incremental de RF)
# Versão: 1.0
# Data: 2026-01-03
# Contrato: docs/contracts/documentacao/execucao/aditivo.md

meta:
  contrato: "docs/contracts/documentacao/execucao/aditivo.md"
  versao: "1.0"
  documentacao: "RFXXX"
  funcionalidade_adicionada: ""
  data_execucao: ""

# ========================================
# PRÉ-REQUISITOS BLOQUEANTES
# ========================================
pre_requisitos:
  documentacao_existe_md: false               # RFXXX.md existe
  documentacao_existe_yaml: false             # RFXXX.yaml existe
  uc_existe_md: false               # UC-RFXXX.md existe
  uc_existe_yaml: false             # UC-RFXXX.yaml existe
  wf_existe_md: false               # WF-RFXXX.md existe
  wf_existe_yaml: false             # WF-RFXXX.yaml existe
  md_existe_md: false               # MD-RFXXX.md existe
  md_existe_yaml: false             # MD-RFXXX.yaml existe
  mt_existe: false                  # MT-RFXXX.yaml existe
  tc_existe: false                  # TC-RFXXX.yaml existe
  status_yaml_existe: false         # STATUS.yaml existe
  branch_correto: false             # feature/RFXXX-aditivo-* ativo
  descricao_funcionalidade_fornecida: false  # Usuário forneceu descrição clara

# ========================================
# FASE 1: BACKUP (6 passos)
# ========================================
fase_1_backup:
  passo_1_backup_rf:
    documentacao_old_md_criado: false         # RFXXX_old.md criado
    documentacao_old_yaml_criado: false       # RFXXX_old.yaml criado
    conteudo_identico_ao_original: false  # Backup = Original

  passo_2_backup_uc:
    uc_old_md_criado: false         # UC-RFXXX_old.md criado
    uc_old_yaml_criado: false       # UC-RFXXX_old.yaml criado
    conteudo_identico_ao_original: false

  passo_3_backup_wf:
    wf_old_md_criado: false         # WF-RFXXX_old.md criado
    wf_old_yaml_criado: false       # WF-RFXXX_old.yaml criado
    conteudo_identico_ao_original: false

  passo_4_backup_md:
    md_old_md_criado: false         # MD-RFXXX_old.md criado
    md_old_yaml_criado: false       # MD-RFXXX_old.yaml criado
    conteudo_identico_ao_original: false

  passo_5_backup_mt:
    mt_old_criado: false            # MT-RFXXX_old.yaml criado
    conteudo_identico_ao_original: false

  passo_6_backup_tc:
    tc_old_criado: false            # TC-RFXXX_old.yaml criado
    conteudo_identico_ao_original: false

  # Checkpoint FASE 1
  fase_1_completa: false            # 10/10 arquivos _old criados

# ========================================
# FASE 2: EVOLUÇÃO INCREMENTAL (4 passos)
# ========================================
fase_2_evolucao:
  passo_7_rf:
    documentacao_md_lido: false               # RFXXX.md lido (versão original)
    documentacao_yaml_lido: false             # RFXXX.yaml lido
    secao_4_funcionalidades_atualizada: false  # Nova funcionalidade no catálogo
    secao_5_rns_adicionadas: false  # Mínimo 3 RNs novas
    quantidade_rns_adicionadas: 0   # Contador de RNs (≥3)
    secao_7_permissoes_adicionadas: false  # Permissões adicionadas (se aplicável)
    secao_8_endpoints_documentados: false  # Endpoints adicionados (se aplicável)
    secao_9_modelo_dados_documentado: false  # MD documentado (se aplicável)
    secao_11_integracoes_atualizadas: false  # Chaves i18n, auditoria, etc.
    documentacao_md_yaml_sincronizados: false  # RF.md ↔ RF.yaml 100%

  passo_8_uc:
    delta_rf_identificado: false    # Comparou RFXXX.md vs RFXXX_old.md
    uc_md_lido: false               # UC-RFXXX.md lido
    uc_yaml_lido: false             # UC-RFXXX.yaml lido
    novos_ucs_criados: false        # Novos UCs adicionados
    quantidade_ucs_adicionados: 0   # Contador de UCs novos
    cobertura_100_rns_novas: false  # Todas as RNs novas cobertas
    uc_md_yaml_sincronizados: false  # UC.md ↔ UC.yaml 100%
    validador_rf_uc_executado: false  # python validator-rf-uc.py RFXXX
    validador_rf_uc_passou: false   # Exit code = 0

  passo_9_wf:
    delta_uc_identificado: false    # Comparou UC-RFXXX.yaml vs UC-RFXXX_old.yaml
    wf_md_lido: false               # WF-RFXXX.md lido
    wf_yaml_lido: false             # WF-RFXXX.yaml lido
    novos_wfs_criados: false        # Novos WFs adicionados
    quantidade_wfs_adicionados: 0   # Contador de WFs novos
    telas_documentadas: false       # Telas descritas
    componentes_documentados: false  # Componentes descritos
    eventos_documentados: false     # Eventos descritos
    estados_obrigatorios_documentados: false  # Loading, Vazio, Erro, Dados
    responsividade_documentada: false  # Mobile, Tablet, Desktop
    acessibilidade_documentada: false  # WCAG AA
    wf_md_yaml_sincronizados: false  # WF.md ↔ WF.yaml 100%

  passo_10_md:
    delta_rf_modelo_identificado: false  # Comparou RFXXX.md (Seção 9) vs _old
    md_md_lido: false               # MD-RFXXX.md lido
    md_yaml_lido: false             # MD-RFXXX.yaml lido
    novas_tabelas_adicionadas: false  # Tabelas criadas (se necessário)
    quantidade_tabelas_adicionadas: 0
    novos_campos_adicionados: false  # Campos adicionados (se necessário)
    quantidade_campos_adicionados: 0
    multi_tenancy_garantido: false  # cliente_id ou empresa_id em novas tabelas
    auditoria_garantida: false      # 5 campos obrigatórios em novas tabelas
    soft_delete_garantido: false    # deleted_at em novas tabelas
    relacionamentos_documentados: false  # Relacionamentos descritos
    md_md_yaml_sincronizados: false  # MD.md ↔ MD.yaml 100%

  # Checkpoint FASE 2
  fase_2_completa: false            # RF, UC, WF, MD atualizados

# ========================================
# FASE 3: TESTES (2 passos)
# ========================================
fase_3_testes:
  passo_11_mt:
    delta_uc_para_mt_identificado: false  # Comparou UC-RFXXX.yaml vs _old
    mt_yaml_lido: false             # MT-RFXXX.yaml lido
    massas_teste_criadas: false     # Massas criadas para novos UCs
    quantidade_massas_adicionadas: 0  # Contador de massas
    cenarios_caminho_feliz: false   # Massas para caminho feliz
    cenarios_caminho_triste: false  # Massas para caminho triste
    cenarios_edge_cases: false      # Massas para edge cases
    formato_csv_conforme: false     # Formato CSV válido

  passo_12_tc:
    delta_uc_para_tc_identificado: false  # Comparou UC-RFXXX.yaml vs _old
    tc_yaml_lido: false             # TC-RFXXX.yaml lido
    tcs_criados: false              # TCs criados para novos UCs
    quantidade_tcs_adicionados: 0   # Contador de TCs (≥30 por UC)
    tcs_backend: false              # TCs para Backend
    tcs_frontend: false             # TCs para Frontend
    tcs_seguranca: false            # TCs para Segurança
    tcs_integracao: false           # TCs para Integração
    minimo_30_tcs_por_uc: false     # ≥30 TCs por novo UC

  # Checkpoint FASE 3
  fase_3_completa: false            # MT e TC atualizados

# ========================================
# FASE 4: RELATÓRIO (1 passo)
# ========================================
fase_4_relatorio:
  passo_13_relatorio:
    relatorio_criado: false         # .temp_ia/aditivo-RFXXX-delta-report.md criado
    delta_rf_documentado: false     # Delta RF documentado (quantas RNs, endpoints, permissões)
    delta_uc_documentado: false     # Delta UC documentado (quantos UCs novos)
    delta_wf_documentado: false     # Delta WF documentado (quantos WFs novos)
    delta_md_documentado: false     # Delta MD documentado (quantas tabelas, campos)
    delta_mt_documentado: false     # Delta MT documentado (quantas massas)
    delta_tc_documentado: false     # Delta TC documentado (quantos TCs)
    validacoes_listadas: false      # 12/12 validações listadas
    veredicto_final_declarado: false  # ✅ APROVADO ou ❌ REPROVADO

  # Checkpoint FASE 4
  fase_4_completa: false            # Relatório de delta completo

# ========================================
# VALIDAÇÕES OBRIGATÓRIAS (12 validações)
# ========================================
validacoes:
  val_1_backups_criados:
    status: false                   # 10/10 arquivos _old criados
    arquivos_old_criados: 0         # Contador (deve ser 10)

  val_2_rf_atualizado_min_3_rns:
    status: false                   # ≥3 RNs adicionadas
    quantidade_rns: 0               # Deve ser ≥3

  val_3_rf_md_yaml_sincronizado:
    status: false                   # RF.md ↔ RF.yaml 100%
    percentual_sincronizacao: 0     # Deve ser 100%

  val_4_uc_cobre_100_delta_rf:
    status: false                   # UC cobre 100% do delta RF
    validador_passou: false         # validator-rf-uc.py: exit code 0

  val_5_uc_md_yaml_sincronizado:
    status: false                   # UC.md ↔ UC.yaml 100%
    percentual_sincronizacao: 0     # Deve ser 100%

  val_6_wf_cobre_100_novos_ucs:
    status: false                   # WF cobre 100% dos novos UCs
    percentual_cobertura: 0         # Deve ser 100%

  val_7_wf_md_yaml_sincronizado:
    status: false                   # WF.md ↔ WF.yaml 100%
    percentual_sincronizacao: 0     # Deve ser 100%

  val_8_md_atualizado:
    status: false                   # MD atualizado (tabelas/campos)
    mudancas_aplicadas: false       # Mudanças aplicadas (se aplicável)

  val_9_md_md_yaml_sincronizado:
    status: false                   # MD.md ↔ MD.yaml 100%
    percentual_sincronizacao: 0     # Deve ser 100%

  val_10_mt_cobre_novos_ucs:
    status: false                   # MT cobre novos UCs
    massas_criadas: 0               # Contador de massas

  val_11_tc_cobre_novos_ucs:
    status: false                   # TC cobre novos UCs (≥30 por UC)
    tcs_criados: 0                  # Contador de TCs
    min_30_por_uc: false            # ≥30 TCs por novo UC

  val_12_relatorio_delta_gerado:
    status: false                   # Relatório gerado
    arquivo_existe: false           # .temp_ia/aditivo-RFXXX-delta-report.md

# ========================================
# RESULTADO FINAL
# ========================================
resultado_final:
  validacoes_passadas: 0            # Contador (deve ser 12/12)
  aprovado: false                   # true se 12/12 PASS
  cobertura_total_rf: false         # Nova funcionalidade 100% coberta em RF
  cobertura_total_uc: false         # Nova funcionalidade 100% coberta em UC
  cobertura_total_wf: false         # Nova funcionalidade 100% coberta em WF
  cobertura_total_md: false         # Nova funcionalidade 100% coberta em MD
  cobertura_total_mt: false         # Nova funcionalidade 100% coberta em MT
  cobertura_total_tc: false         # Nova funcionalidade 100% coberta em TC
  relatorio_delta_gerado: false     # Relatório completo

  # STATUS.yaml
  status_yaml_atualizado: false     # documentacao.aditivo atualizado

  # Veredicto
  veredicto: ""                     # "APROVADO" ou "REPROVADO"

# ========================================
# GAPS IDENTIFICADOS (se houver)
# ========================================
gaps:
  - severidade: ""                  # CRÍTICO / IMPORTANTE / MENOR
    descricao: ""
    arquivo_afetado: ""
    recomendacao: ""
