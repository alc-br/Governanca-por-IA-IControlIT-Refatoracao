# CHECKLIST DOCUMENTO MT (MASSA DE TESTE)
# Validação completa do CONTRATO-GERACAO-DOCS-MT v2.0
# Este checklist deve ser preenchido AUTOMATICAMENTE pelo agente

meta:
  contrato: CONTRATO-GERACAO-DOCS-MT
  versao: "2.0"
  data_criacao: "2025-12-31"
  rf: RFXXX
  responsavel: agente-gerador-mt
  tentativa: 1

pre_requisitos:
  uc_md_existe: false          # UC-RFXXX.md existe
  uc_yaml_existe: false        # UC-RFXXX.yaml existe
  template_mt_yaml: false      # docs/templates/MT.yaml encontrado
  status_yaml_existe: false    # STATUS.yaml presente
  uc_validado: false           # STATUS.yaml com documentacao.uc = true

arquivos_saida:
  mt_yaml_criado: false        # MT-RFXXX.yaml criado

estrutura_mt_yaml:
  segue_template: false
  possui_metadata: false
  possui_defaults: false
  possui_data_sets: false
  possui_reusable_data: false
  possui_conventions: false
  possui_historico: false

categorizacao:
  possui_categoria_sucesso: false        # MT001-MT099
  possui_categoria_validacao: false      # MT100-MT199
  possui_categoria_formato: false        # MT200-MT299
  possui_categoria_regra_negocio: false  # MT300-MT399
  possui_categoria_autorizacao: false    # MT400-MT499
  possui_categoria_multi_tenancy: false  # MT700-MT799
  possui_categoria_auditoria: false      # MT800-MT899
  total_categorias_preenchidas: 0

ids_canonicos:  # NOVO v2.0
  formato_valido: false                  # Todos IDs no formato MT-RFXXX-NNN
  ids_unicos: false                      # Nenhum ID duplicado
  ids_sem_padrao: []                     # Lista de IDs inválidos
  ids_duplicados: []                     # Lista de IDs duplicados

rastreabilidade:
  todas_mt_possuem_uc_ref: false         # Campo uc_ref preenchido
  todas_mt_possuem_fluxo_ref: false      # Campo fluxo_ref preenchido (quando aplicável)
  todas_mt_possuem_rn_ref: false         # Campo rn_ref preenchido (quando aplicável)
  todas_mt_possuem_categoria: false      # Campo categoria preenchido
  possui_matriz_rastreabilidade: false   # NOVO v2.0 - Seção rastreabilidade presente
  matriz_rf_uc_mt_completa: false        # NOVO v2.0 - Matriz RF → UC → MT 100%
  todas_mt_possuem_ca_ref: false         # NOVO v2.0 - Campo ca_ref quando CA existir

campos_obrigatorios:
  todas_mt_possuem_contexto: false       # Campo contexto preenchido
  todas_mt_possuem_entrada: false        # Campo entrada preenchido
  todas_mt_possuem_resultado_esperado: false  # Campo resultado_esperado preenchido
  todas_mt_possuem_descricao: false      # Campo descricao preenchido

cobertura_funcional:
  uc_fluxos_total: 0                     # Total de fluxos (FP, FA, FE) nos UCs
  uc_fluxos_cobertos: 0                  # Fluxos cobertos por MT
  uc_cobertura_100: false                # 100% dos fluxos cobertos
  fluxos_faltantes: []
  ca_total: 0                            # NOVO v2.0 - Total de CAs nos UCs
  ca_cobertos: 0                         # NOVO v2.0 - CAs cobertos por MT
  ca_cobertura_100: false                # NOVO v2.0 - 100% dos CAs cobertos
  ca_faltantes: []                       # NOVO v2.0 - Lista de CAs sem MT
  ucs_sem_mt: []                         # NOVO v2.0 - UCs sem nenhuma MT

cobertura_categoria_por_tipo_uc:  # NOVO v2.0
  tipo_uc_identificado: ""               # CRUD | CONSULTA | INTEGRACAO
  categorias_obrigatorias_tipo: []       # Categorias obrigatórias para o tipo
  categorias_obrigatorias_atendidas: false  # Todas categorias obrigatórias preenchidas
  categorias_faltantes: []               # Categorias obrigatórias ausentes

validacao_estrutural:
  sem_mt_orfa: false                     # Nenhuma MT sem rastreabilidade
  sem_valores_magicos: false             # Nenhum valor sem explicação
  placeholders_documentados: false       # Todos placeholders em conventions
  negacao_inferencia_respeitada: false   # NOVO v2.0 - Nenhuma MT com cenário não explicitado
  mt_com_inferencia_proibida: []         # NOVO v2.0 - MTs com inferência não permitida
  reuso_mt_validado: false               # NOVO v2.0 - MT reutilizada em contexto correto

status_yaml_atualizacao:
  documentacao_mt_true: false            # STATUS.yaml com documentacao.mt = true

bloqueios:
  falha_pre_requisito: false
  falha_template: false
  falha_cobertura: false
  falha_categorizacao: false
  falha_rastreabilidade: false
  falha_ids_canonicos: false             # NOVO v2.0
  falha_matriz_rastreabilidade: false    # NOVO v2.0
  falha_cobertura_ca: false              # NOVO v2.0
  falha_cobertura_categoria_tipo: false  # NOVO v2.0
  falha_negacao_inferencia: false        # NOVO v2.0

resultado_final:
  aprovado: false
  data_validacao: null
  tentativas: 0
  observacoes: ""
  proxima_acao: ""  # "aprovar" | "corrigir_e_revalidar" | "bloqueado"
