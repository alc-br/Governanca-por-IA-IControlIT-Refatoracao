# CHECKLIST GERAÇÃO RF (NOVO - SEM LEGADO)
# Validação completa do CONTRATO RF-CRIACAO
# Este checklist deve ser preenchido AUTOMATICAMENTE pelo agente
#
# NOTA: Este checklist é para RFs NOVOS (sem legado).
# Se RF tem legado, use rf-rl.yaml

meta:
  contrato: CONTRATO-RF-CRIACAO
  versao: "1.0"
  data_criacao: "2026-01-03"
  rf: RFXXX
  tipo_rf: "crud"  # crud | leitura | integracao | batch
  responsavel: agente-gerador-rf

pre_requisitos:
  pasta_rf_existe: false          # Pasta docs/rf/[Fase]/[EPIC]/RFXXX/ existe
  templates_acessiveis: false     # docs/templates/ disponível
  sem_legado: false               # NÃO há ASPX, WebServices, SQL legado
  status_nao_existe: false        # STATUS.yaml NÃO existe (RF novo)

analise_requisitos:
  tipo_rf_identificado: false     # crud | leitura | integracao | batch
  entidades_identificadas: false  # Pelo menos 1 entidade principal
  regras_extraidas: false         # Regras de negócio extraídas
  permissoes_definidas: false     # Permissões RBAC definidas
  endpoints_definidos: false      # Endpoints da API definidos

estrutura_rf_md:
  segue_template: false
  possui_secao_01_objetivo: false
  possui_secao_02_escopo: false
  possui_secao_03_conceitos: false
  possui_secao_04_funcionalidades: false
  possui_secao_05_regras_negocio: false
  possui_secao_06_estados: false
  possui_secao_07_permissoes_rbac: false
  possui_secao_08_endpoints: false
  possui_secao_09_modelo_dados: false
  possui_secao_10_dependencias: false
  possui_secao_11_integracoes: false
  minimo_10_regras_negocio: false
  sem_referencias_legado: false   # SEM telas ASPX, webservices, procedures
  sem_codigo_copiado: false       # SEM código VB.NET/SQL
  integracoes_obrigatorias_completas: false # i18n, auditoria, RBAC, Central

estrutura_rf_yaml:
  segue_template: false
  possui_campo_rf: false
  possui_descricao: false
  possui_escopo: false
  possui_entidades: false
  possui_regras_negocio: false
  possui_estados: false
  possui_transicoes: false
  possui_permissoes: false
  possui_endpoints: false
  possui_integracoes: false
  possui_seguranca: false
  possui_rastreabilidade: false
  possui_catalog: false
  sincronizado_com_rf_md: false   # 100% sincronizado com RF.md

integracoes_obrigatorias:
  i18n_documentado: false         # Seção 11.1 completa
  i18n_chaves_definidas: false    # rf.xxx.campo, rf.xxx.validacao.erro
  i18n_idiomas_completos: false   # pt-BR, en-US, es-ES
  auditoria_documentada: false    # Seção 11.2 completa
  auditoria_5_campos: false       # created_at, created_by, updated_at, updated_by, deleted_at
  auditoria_soft_delete: false    # deleted_at obrigatório
  rbac_documentado: false         # Seção 11.3 completa
  rbac_matriz_completa: false     # view_any, view, create, update, delete
  rbac_escopo_definido: false     # Developer/Sistema/Cliente/Fornecedor
  central_documentada: false      # Seção 11.4 completa
  central_cadastro_definido: false # Icone, ordem, menu pai
  central_permissoes_associadas: false

validacao_automatica:
  validator_docs_executado: false # validator-docs.py executado
  exit_code_zero: false           # Exit code = 0
  data_execucao: null
  tentativas_correcao: 0

arquivos_saida:
  rfxxx_md_criado: false          # RFXXX.md criado
  rfxxx_yaml_criado: false        # RFXXX.yaml criado
  status_yaml_criado: false       # STATUS.yaml criado
  documentacao_funcional_atualizado: false # documentacao-funcional.md atualizado (se existir)

status_yaml_atualizacao:
  documentacao_rf_true: false
  validacoes_rf_yaml_sincronizado_true: false
  validacoes_rf_11_secoes_completas_true: false
  validacoes_rf_minimo_10_regras_true: false
  validacoes_rf_integracoes_obrigatorias_true: false

sincronizacao:
  rf_md_yaml_sincronizados: false
  todas_rns_no_yaml: false
  todos_endpoints_no_yaml: false
  todas_permissoes_no_yaml: false
  todas_integracoes_no_yaml: false

regras_qualidade:
  rf_apenas_contrato_moderno: false  # RF sem legado
  rf_minimo_10_regras: false
  rf_11_secoes_completas: false
  rf_integracoes_obrigatorias: false # i18n, auditoria, RBAC, Central
  rf_catalog_completo: false         # RF-CRUD, RF-VAL, RF-SEC conforme tipo
  rf_matriz_rbac_completa: false
  rf_endpoints_documentados: false
  rf_modelo_dados_descrito: false

bloqueios:
  falha_pre_requisito: false
  falha_analise_requisitos: false
  falha_template: false
  falha_integracoes: false
  falha_validacao: false
  falha_sincronizacao: false
  tem_legado_identificado: false     # BLOQUEANTE - RF tem legado

# RESULTADO FINAL
# REGRA: aprovado = true SOMENTE se TODOS os bloqueios forem false
# E TODAS as regras de qualidade forem true
resultado_final:
  aprovado: false  # Derivado de: bloqueios (all false) AND regras_qualidade (all true)
  rf_limpo_de_legado: false
  11_secoes_completas: false
  minimo_10_regras: false
  integracoes_obrigatorias_completas: false
  validador_passou: false
  observacoes: ""
