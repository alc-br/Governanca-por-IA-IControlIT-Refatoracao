# CHECKLIST GERAÇÃO RF/RL
# Validação completa do CONTRATO-GERACAO-RF-RL
# Este checklist deve ser preenchido AUTOMATICAMENTE pelo agente
#
# NOTA: Alguns critérios aparecem em mais de uma seção por motivos de auditoria cruzada.
# Isso é intencional e garante validação completa em diferentes fases do processo.

meta:
  contrato: CONTRATO-GERACAO-RF-RL
  versao: "1.0"
  data_criacao: "2025-12-31"
  documentacao: RFXXX
  tipo_rf: "crud"  # crud | leitura | integracao | batch (contexto para regras de validação)
  responsavel: agente-gerador-rf-rl

pre_requisitos:
  pasta_rf_existe: false          # Pasta docs/documentacao/[Fase]/[EPIC]/RFXXX/ existe
  templates_acessiveis: false     # docs/templates/ disponível
  legado_acessivel: false         # ic1_legado/ disponível
  documentacao_funcional_existe: false  # docs/documentacao/documentacao-funcional.md existe

analise_legado_completude:
  webservices_analisados: false   # TODOS webservices do módulo analisados
  telas_aspx_analisadas: false    # TODAS telas ASPX analisadas
  bancos_mapeados: false          # TODOS bancos legados mapeados (multi-database)
  tabelas_identificadas: false    # TODAS tabelas relacionadas identificadas
  procedures_analisadas: false    # TODAS stored procedures analisadas
  views_analisadas: false         # TODAS views analisadas
  functions_analisadas: false     # TODAS UDFs analisadas
  triggers_mapeados: false        # TODOS triggers mapeados
  connection_strings_mapeadas: false  # TODAS connection strings mapeadas
  web_config_analisado: false     # web.config analisado completamente

extracao_regras:
  regras_extraidas_linguagem_natural: false  # Regras em linguagem natural (não código)
  minimo_10_regras: false         # Mínimo 10 RNs extraídas
  nenhuma_regra_esquecida: false  # NENHUMA regra legada esquecida
  todas_validacoes_no_rf: false   # TODAS validações legado no RF
  todos_fluxos_cobertos_uc: false # TODOS fluxos legado cobertos por UCs
  regras_implicitas_explicitadas: false  # Regras implícitas explicitadas

rastreabilidade_bidirecional:
  documentacao_para_rl: false               # Toda RN no RF tem origem no RL
  rl_para_rf: false               # Todo item no RL tem destino no RF/UC
  matriz_rastreabilidade_completa: false  # Legado → RF → UC mapeado
  documentacao_item_relacionado_preenchido: false   # Nenhum item RL sem documentacao_item_relacionado

arquivos_saida:
  rfxxx_md_criado: false          # RFXXX.md criado
  rfxxx_yaml_criado: false        # RFXXX.yaml criado
  rl_rfxxx_md_criado: false       # RL-RFXXX.md criado
  rl_rfxxx_yaml_criado: false     # RL-RFXXX.yaml criado
  status_yaml_criado_atualizado: false  # STATUS.yaml criado/atualizado
  documentacao_funcional_atualizado: false  # documentacao-funcional.md atualizado

estrutura_rf_md:
  segue_template: false
  possui_secao_01_objetivo: false
  possui_secao_02_escopo: false
  possui_secao_03_conceitos: false
  possui_secao_04_funcionalidades: false
  possui_secao_05_regras_negocio: false
  possui_secao_06_estados: false
  possui_secao_07_permissoes_rbac: false
  possui_secao_08_endpoints: false
  possui_secao_09_modelo_dados: false
  possui_secao_10_dependencias: false
  possui_secao_11_integracoes: false
  minimo_10_regras_negocio: false
  sem_referencias_legado: false   # SEM telas ASPX, webservices, procedures
  sem_codigo_copiado: false       # SEM código VB.NET/SQL
  integracoes_obrigatorias: false # i18n, auditoria, RBAC, Central

estrutura_rf_yaml:
  segue_template: false
  possui_campo_rf: false
  possui_descricao: false
  possui_escopo: false
  possui_entidades: false
  possui_regras_negocio: false
  possui_estados: false
  possui_transicoes: false
  possui_permissoes: false
  possui_endpoints: false
  possui_integracoes: false
  possui_seguranca: false
  possui_rastreabilidade: false
  sincronizado_com_rf_md: false   # 100% sincronizado com RF.md

estrutura_rl_md:
  segue_template: false
  possui_secao_01_contexto_legado: false
  possui_secao_02_telas_aspx: false
  possui_secao_03_webservices: false
  possui_secao_04_stored_procedures: false
  possui_secao_05_tabelas_legadas: false
  possui_secao_06_regras_implicitas: false
  possui_secao_07_gap_analysis: false
  possui_secao_08_decisoes_modernizacao: false
  possui_secao_09_rastreabilidade: false
  todos_itens_com_destino: false  # ASSUMIDO/SUBSTITUÍDO/DESCARTADO/A_REVISAR
  minimo_3_problemas_legado: false
  sem_codigo_vb_copiado: false
  sem_sql_copiado: false
  bancos_multi_database_mapeados: false

estrutura_rl_yaml:
  segue_template: false
  possui_campo_rf_id: false
  possui_campo_titulo: false
  possui_campo_legado: false
  possui_referencias: false
  todos_itens_com_campo_destino: false  # 100% itens com campo destino
  todos_itens_com_tipo: false
  todos_itens_com_caminho: false
  todos_itens_com_descricao: false
  todos_itens_com_justificativa: false
  possui_bancos_legados: false    # Se aplicável (multi-database)
  possui_problemas_legado: false
  possui_metadados: false
  metadados_calculados_corretamente: false
  sincronizado_com_rl_md: false   # 100% sincronizado com RL.md

cobertura_funcional:
  documentacao_cobre_100_legado: false      # RF cobre 100% do legado
  nenhuma_funcionalidade_esquecida: false
  todas_validacoes_documentadas: false
  todos_fluxos_documentados: false
  todas_regras_implicitas_explicitadas: false

validacao_automatica:
  validador_rl_executado: false   # validator-rl.py executado
  exit_code_zero: false           # Exit code = 0
  data_execucao: null
  tentativas_correcao: 0
  documentacao_limpo_de_legado: false       # RF não contém legado
  rl_completo: false              # RL contém TODA memória legado
  destinos_100_percent: false     # 100% itens com destino

sincronizacao:
  documentacao_md_yaml_sincronizados: false
  rl_md_yaml_sincronizados: false
  todas_rns_no_yaml: false
  todos_endpoints_no_yaml: false
  todas_permissoes_no_yaml: false

status_yaml_atualizacao:
  documentacao_rf_true: false
  documentacao_rf_yaml_true: false
  documentacao_rl_true: false
  documentacao_rl_yaml_true: false
  separacao_rf_rl_rf_limpo_true: false
  separacao_rf_rl_rl_completo_true: false
  separacao_rf_rl_itens_com_destino_true: false
  separacao_rf_rl_validador_executado_true: false
  estatisticas_preenchidas: false

documentacao_funcional_atualizacao:
  secao_rfxxx_criada_ou_atualizada: false
  possui_resumo_executivo: false
  possui_funcionalidades_principais: false
  possui_regras_negocio_criticas: false
  possui_legado_mapeado: false
  possui_arquivos_gerados: false
  possui_estatisticas: false
  links_funcionando: false

regras_qualidade:
  documentacao_apenas_contrato_moderno: false  # RF sem legado
  documentacao_minimo_10_regras: false
  documentacao_11_secoes_completas: false
  documentacao_integracoes_obrigatorias: false
  rl_toda_memoria_legado: false
  rl_9_secoes_completas: false
  rl_100_destinos_definidos: false
  rl_gap_analysis_detalhado: false
  extracao_linguagem_natural: false  # SEM código VB/SQL
  rastreabilidade_bidirecional_completa: false
  multi_database_mapeado: false      # Se aplicável

# COMMIT: Responsabilidade do usuário (não automatizado)

bloqueios:
  falha_pre_requisito: false
  falha_analise_legado: false
  falha_extracao_regras: false
  falha_template: false
  falha_rastreabilidade: false
  falha_validacao: false
  falha_sincronizacao: false
  falha_destinos_incompletos: false

# RESULTADO FINAL
# REGRA: aprovado = true SOMENTE se TODOS os bloqueios forem false
# E TODAS as regras de qualidade forem true
resultado_final:
  aprovado: false  # Derivado de: bloqueios (all false) AND regras_qualidade (all true)
  cobertura_legado_100_percent: false
  precisao_regras_100_percent: false
  rastreabilidade_100_percent: false
  destinos_100_percent: false
  linguagem_natural_100_percent: false
  multi_database_mapeado_100_percent: false
  observacoes: ""
