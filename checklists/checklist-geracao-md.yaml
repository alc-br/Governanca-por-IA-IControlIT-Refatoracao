# CHECKLIST GERAÇÃO MD (MODELO DE DADOS)
# Validação completa do CONTRATO-GERACAO-DOCS-MD
# Este checklist deve ser preenchido AUTOMATICAMENTE pelo agente
#
# NOTA IMPORTANTE: Este checklist repete intencionalmente algumas regras do contrato
# para garantir auditoria cruzada. Isso é uma redundância SAUDÁVEL e proposital.
# Evita que otimizações futuras removam validações críticas.

meta:
  contrato: CONTRATO-GERACAO-DOCS-MD
  versao: "1.0"
  data_criacao: "2025-12-31"
  rf: RFXXX
  responsavel: agente-gerador-md

pre_requisitos:
  pasta_rf_existe: false          # Pasta docs/rf/[Fase]/[EPIC]/RFXXX/ existe
  rf_yaml_existe: false           # RFXXX.yaml existe e aprovado
  uc_yaml_existe: false           # UC-RFXXX.yaml existe e completo
  wf_yaml_existe: false           # WF-RFXXX.yaml existe e completo
  template_md_yaml: false         # docs/templates/MD.yaml encontrado
  status_yaml_existe: false       # STATUS.yaml presente
  uc_validado: false              # STATUS.yaml com documentacao.uc = true
  wf_criado: false                # STATUS.yaml com documentacao.wf = true

leitura_rf_uc_wf:
  rf_yaml_lido: false             # RFXXX.yaml lido completamente
  uc_yaml_lido: false             # UC-RFXXX.yaml lido completamente
  wf_yaml_lido: false             # WF-RFXXX.yaml lido completamente
  entidades_identificadas: false  # Entidades principais mapeadas
  relacionamentos_mapeados: false # 1:N, N:N identificados
  campos_identificados: false     # Campos de negócio extraídos
  operacoes_crud_mapeadas: false  # CRUD necessário identificado
  campos_visiveis_ui_mapeados: false # Campos do WF identificados
  filtros_ordenacoes_mapeados: false # Índices necessários identificados

arquivos_saida:
  md_yaml_criado: false           # MD-RFXXX.yaml criado
  status_yaml_atualizado: false   # STATUS.yaml atualizado

estrutura_md_yaml:
  segue_template: false
  possui_metadata: false
  possui_rf_relacionado: false
  possui_entidades: false
  todas_entidades_possuem_campos: false
  todas_entidades_possuem_id_pk: false
  todas_entidades_possuem_multi_tenancy: false
  todas_entidades_possuem_auditoria_completa: false
  todas_entidades_possuem_soft_delete: false
  todas_entidades_possuem_indices: false
  todas_entidades_possuem_constraints: false
  possui_observacoes: false
  possui_historico: false

campos_obrigatorios_multi_tenancy:
  todas_tabelas_possuem_cliente_id_ou_empresa_id: false

campos_obrigatorios_auditoria:
  todas_tabelas_possuem_created_at: false
  todas_tabelas_possuem_created_by: false
  todas_tabelas_possuem_updated_at: false
  todas_tabelas_possuem_updated_by: false
  todas_tabelas_possuem_deleted_at: false

indices_obrigatorios:
  todas_tabelas_possuem_pk_index: false
  todas_tabelas_possuem_multi_tenancy_index: false
  indices_performance_conforme_wf: false

constraints_obrigatorias:
  todas_tabelas_possuem_pk_constraint: false
  todas_tabelas_possuem_fk_multi_tenancy_cascade: false
  todas_tabelas_possuem_fk_auditoria_set_null: false
  unique_por_tenant_quando_aplicavel: false

sincronizacao:
  md_derivado_do_rf: false
  md_derivado_do_uc: false
  md_derivado_do_wf: false

status_yaml_atualizacao:
  documentacao_md_true: false

regras_qualidade:
  md_campos_multi_tenancy: false
  md_campos_auditoria: false
  md_constraints_completas: false
  md_indices_performance: false

# COMMIT: Responsabilidade do usuário (não automatizado)

bloqueios:
  falha_pre_requisito: false
  falha_leitura_rf_uc_wf: false
  falha_template: false
  falha_multi_tenancy: false
  falha_auditoria: false
  falha_soft_delete: false
  falha_constraints: false
  falha_indices: false

# RESULTADO FINAL
# REGRA: aprovado = true SOMENTE se TODOS os bloqueios forem false
# E TODAS as regras de qualidade forem true
resultado_final:
  aprovado: false  # Derivado de: bloqueios (all false) AND regras_qualidade (all true)
  observacoes: ""
  proximo_passo: "CONTRATO-DOCUMENTACAO-GOVERNADA-TESTES"
