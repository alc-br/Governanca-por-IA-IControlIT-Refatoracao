<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cronograma Interativo - Moderniza√ß√£o IControlIT | ALC.dev.br</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; }

        body {
            background: #0a0a0a;
            color: #e5e5e5;
            overflow-x: hidden;
            font-weight: 300;
        }

        /* Dashboard Theme from ALC.dev.br */
        .dashboard-grid {
            background:
                linear-gradient(90deg, rgba(31, 101, 128, 0.03) 1px, transparent 1px),
                linear-gradient(rgba(31, 101, 128, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            position: relative;
        }

        .data-card {
            background: linear-gradient(135deg, rgba(15, 15, 15, 0.95), rgba(20, 20, 20, 0.9));
            border: 1px solid rgba(31, 101, 128, 0.2);
            position: relative;
            overflow: hidden;
        }

        .data-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #1f6580, transparent);
        }

        .metric-display {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #1f6580, #2d8fb8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            font-variant-numeric: tabular-nums;
        }

        .metric-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #888;
            margin-top: 0.5rem;
        }

        .progress-bar {
            height: 4px;
            background: rgba(31, 101, 128, 0.2);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #1f6580, #2d8fb8);
            border-radius: 2px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }

        .accordion-button.open .accordion-arrow {
            transform: rotate(180deg);
        }

        .accordion-arrow {
            transition: transform 0.3s ease-in-out;
        }

        .task-row.completed .task-name {
            text-decoration: line-through;
            color: #6b7280;
        }

        .task-checkbox:checked {
            background-color: #1f6580;
            border-color: #1f6580;
        }

        .task-checkbox:focus {
            ring-color: #1f6580;
            border-color: #1f6580;
        }

        input[type='number']::-webkit-inner-spin-button,
        input[type='number']::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        input[type='number'] {
            -moz-appearance: textfield;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #1f6580 !important;
            ring-color: #1f6580 !important;
        }

        .accordion-button {
            transition: all 0.3s ease;
        }

        .accordion-button:hover {
            background-color: rgba(31, 101, 128, 0.1);
        }

        /* Timeline */
        .timeline-month {
            min-width: 100px;
            text-align: center;
        }

        .timeline-bar {
            height: 40px;
            background: linear-gradient(90deg, #1f6580, #2d8fb8);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.75rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(31, 101, 128, 0.3);
        }

        .timeline-completed {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        html { scroll-behavior: smooth; }
    </style>
</head>
<body class="p-4 sm:p-8">

    <div class="w-full max-w-7xl mx-auto">
        <!-- HEADER -->
        <header class="glass-card rounded-2xl p-8 mb-8">
            <div class="flex items-center justify-between flex-wrap gap-6">
                <div class="flex items-center gap-6">
                    <img src="https://alc.dev.br/images/logo-alc-final1.png" alt="ALC.dev.br" class="h-12 sm:h-16" style="filter: brightness(100) contrast(0.8);">
                    <div class="h-12 w-px bg-gray-700"></div>
                    <div>
                        <h1 class="text-2xl sm:text-3xl font-bold text-white">Cronograma de Moderniza√ß√£o</h1>
                        <p class="text-gray-400 mt-1">Projeto IControlIT | Web Forms VB.NET ‚Üí .NET 10 + Angular 19</p>
                    </div>
                </div>
                <div class="data-card rounded-lg px-6 py-4">
                    <p class="text-xs uppercase tracking-wider text-gray-500 font-semibold mb-1">Status do Projeto</p>
                    <div class="flex items-center gap-2">
                        <div class="relative">
                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                            <div class="w-3 h-3 bg-green-500 rounded-full absolute inset-0 animate-ping"></div>
                        </div>
                        <p class="text-lg font-bold text-white">Em Andamento</p>
                    </div>
                </div>
            </div>
        </header>

        <!-- METRICS DASHBOARD -->
        <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div class="data-card rounded-xl p-6">
                <div class="metric-display">2.130</div>
                <div class="metric-label">Horas Planejadas</div>
                <div class="progress-bar mt-4">
                    <div class="progress-fill" style="width: 100%;"></div>
                </div>
            </div>
            <div class="data-card rounded-xl p-6">
                <div class="metric-display" id="completedHours">665</div>
                <div class="metric-label">Horas Conclu√≠das</div>
                <div class="progress-bar mt-4">
                    <div class="progress-fill" id="completedProgress" style="width: 31.2%;"></div>
                </div>
            </div>
            <div class="data-card rounded-xl p-6">
                <div class="metric-display" id="completedRFs">26</div>
                <div class="metric-label">RFs Completos</div>
                <div class="progress-bar mt-4">
                    <div class="progress-fill" id="rfsProgress" style="width: 48%;"></div>
                </div>
            </div>
            <div class="data-card rounded-xl p-6">
                <div class="metric-display" id="progressPercent">31<span class="text-xl">%</span></div>
                <div class="metric-label">Progresso Geral</div>
                <div class="progress-bar mt-4">
                    <div class="progress-fill" id="generalProgress" style="width: 31%;"></div>
                </div>
            </div>
        </div>

        <!-- TIMELINE VISUAL -->
        <div class="data-card rounded-2xl p-8 mb-8">
            <h2 class="text-2xl font-bold text-white mb-6">üìä Linha do Tempo</h2>

            <div class="overflow-x-auto">
                <div class="inline-flex flex-col min-w-max space-y-3">
                    <!-- Headers -->
                    <div class="flex items-center space-x-2">
                        <div class="w-48 text-xs font-semibold text-gray-500 uppercase">Fase</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Out/25</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Nov/25</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Dez/25</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Jan/26</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Fev/26</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Mar/26</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Abr/26</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Mai/26</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Jun/26</div>
                        <div class="timeline-month text-xs font-semibold text-gray-500">Jul/26</div>
                    </div>

                    <!-- Fase 0 -->
                    <div class="flex items-center space-x-2">
                        <div class="w-48 text-sm text-gray-300">Fase 0 - Prepara√ß√£o<br><span class="text-xs text-gray-500">120h</span></div>
                        <div class="timeline-month"><div class="timeline-bar timeline-completed">‚úì</div></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                    </div>

                    <!-- Fase 1 -->
                    <div class="flex items-center space-x-2">
                        <div class="w-48 text-sm text-gray-300">Fase 1 - Sistema Base<br><span class="text-xs text-gray-500">10 RFs | 310h</span></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"><div class="timeline-bar timeline-completed">‚úì</div></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                    </div>

                    <!-- Fase 2 -->
                    <div class="flex items-center space-x-2">
                        <div class="w-48 text-sm text-gray-300">Fase 2 - Cadastros<br><span class="text-xs text-gray-500">16 RFs | 258h</span></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"><div class="timeline-bar timeline-completed">‚úì</div></div>
                        <div class="timeline-month"><div class="h-10 w-20 bg-yellow-100/10 border border-yellow-400/30 rounded flex items-center justify-center text-yellow-400 text-xs font-semibold">Reorg*</div></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                    </div>

                    <!-- Fase 3 CONSOLIDADA -->
                    <div class="flex items-center space-x-2">
                        <div class="w-48 text-sm text-gray-300">Fase 3 - Financeiro<br><span class="text-xs text-gray-500">22 itens | 695h**</span></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"><div class="h-10 w-20 bg-yellow-100/10 border border-yellow-400/30 rounded flex items-center justify-center text-yellow-400 text-xs font-semibold">Plan</div></div>
                        <div class="timeline-month"><div class="timeline-bar">Planejado</div></div>
                        <div class="timeline-month"><div class="timeline-bar">Planejado</div></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                    </div>

                    <!-- Fase 4 - Ativos/Integra√ß√µes (Jun-Jul) -->
                    <div class="flex items-center space-x-2">
                        <div class="w-48 text-sm text-gray-300">Fase 4 - Ativos/Integ.<br><span class="text-xs text-gray-500">9 RFs | 307h</span></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"><div class="timeline-bar">Planejado</div></div>
                        <div class="timeline-month"><div class="timeline-bar">Planejado</div></div>
                    </div>

                    <!-- Fase 5 - Service Desk (Abr-Mai) -->
                    <div class="flex items-center space-x-2">
                        <div class="w-48 text-sm text-gray-300">Fase 5 - Service Desk<br><span class="text-xs text-gray-500">14 RFs | 580h</span></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"><div class="timeline-bar">Planejado</div></div>
                        <div class="timeline-month"><div class="timeline-bar">Planejado</div></div>
                        <div class="timeline-month"></div>
                        <div class="timeline-month"></div>
                    </div>
                </div>
            </div>

            <div class="mt-6 flex items-center justify-center flex-wrap gap-6 text-sm text-gray-400">
                <div class="flex items-center gap-2">
                    <div class="h-4 w-12 bg-gradient-to-r from-green-500 to-green-600 rounded"></div>
                    <span>Conclu√≠do</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="h-4 w-12 bg-gradient-to-r from-teal-600 to-teal-700 rounded"></div>
                    <span>Planejado</span>
                </div>
                <div class="flex items-center gap-2">
                    <div class="h-4 w-12 bg-yellow-100/10 border border-yellow-400/30 rounded"></div>
                    <span>Reorganiza√ß√£o</span>
                </div>
            </div>

            <div class="mt-6 text-xs text-gray-500 space-y-2">
                <p class="text-center">
                    <strong class="text-gray-400">*Reorganiza√ß√£o:</strong> Alguns cadastros da Fase 2 foram antecipados para acelerar Fase 3.
                </p>
                <p class="text-center">
                    <strong class="text-gray-400">**Fase 3 Consolidada:</strong> Unifica antigas Fases 3 e 4 (Base Cont√°bil + Processos).<br>
                    Total: 655h de RFs + 40h de Menu Matricial/UX = 695h | Conclus√£o: 15/Mar/2026
                </p>
            </div>
        </div>

        <!-- PHASES ACCORDION -->
        <div class="space-y-4" id="phases-container">
            <!-- Ser√° preenchido via JavaScript -->
        </div>

        <!-- FOOTER -->
        <footer class="glass-card rounded-xl p-6 mt-8 text-center text-gray-500 text-sm">
            <p>Cronograma Interativo - Atualizado em <strong class="text-gray-400">14/01/2026</strong></p>
            <p class="mt-2">Desenvolvido por <strong class="text-teal-400">ALC.dev.br</strong> | Engenharia de Software Governada</p>
        </footer>
    </div>

    <!-- Template para task row -->
    <template id="task-row-template">
        <div class="task-row flex items-center gap-4 py-3 px-4 hover:bg-gray-50/5 rounded-lg transition-colors">
            <input type="checkbox" class="task-checkbox w-5 h-5 rounded border-gray-600 text-teal-600 focus:ring-teal-500 focus:ring-offset-0">
            <div class="task-name flex-1 text-gray-300"></div>
            <div class="task-hours text-sm text-gray-500"></div>
            <button class="task-details-btn text-teal-400 hover:text-teal-300 text-xs">Detalhes</button>
        </div>
    </template>

    <script>
        // Dados do Projeto IControlIT
        const projectData = [
            {
                id: "fase0",
                title: "Fase 0 - Prepara√ß√£o do Ambiente",
                color: "bg-gray-600",
                status: "completed",
                plannedHours: 120,
                tasks: [
                    { id: "f0_setup", name: "Setup de Infraestrutura DevOps", hours: 40 },
                    { id: "f0_tools", name: "Configura√ß√£o de Ferramentas e Ambientes", hours: 40 },
                    { id: "f0_docs", name: "Documenta√ß√£o Base e Padr√µes", hours: 40 },
                ]
            },
            {
                id: "fase1",
                title: "Fase 1 - Sistema Base",
                color: "bg-blue-600",
                status: "completed",
                plannedHours: 310,
                tasks: [
                    { id: "rf001", name: "RF001 - Par√¢metros e Configura√ß√µes", hours: 35 },
                    { id: "rf002", name: "RF002 - Configura√ß√µes e Parametriza√ß√£o", hours: 30 },
                    { id: "rf003", name: "RF003 - Logs e Monitoramento", hours: 35 },
                    { id: "rf004", name: "RF004 - Auditoria e Logs", hours: 40 },
                    { id: "rf005", name: "RF005 - i18n Or√ßamento Provis√£o", hours: 30 },
                    { id: "rf006", name: "RF006 - Gest√£o de Clientes", hours: 35 },
                    { id: "rf007", name: "RF007 - Login e Autentica√ß√£o", hours: 45 },
                    { id: "rf008", name: "RF008 - Gest√£o de Usu√°rios RBAC", hours: 40 },
                    { id: "rf009", name: "RF009 - Gest√£o de Idiomas", hours: 10 },
                    { id: "rf010", name: "RF010 - Gest√£o de M√≥dulos", hours: 10 },
                ]
            },
            {
                id: "fase2",
                title: "Fase 2 - Cadastros e Servi√ßos Transversais",
                color: "bg-teal-600",
                status: "completed",
                plannedHours: 258,
                tasks: [
                    { id: "rf011", name: "RF011 - Gest√£o de Empresas", hours: 25 },
                    { id: "rf012", name: "RF012 - Gest√£o de Filiais", hours: 25 },
                    { id: "rf013", name: "RF013 - Gest√£o de Departamentos", hours: 20 },
                    { id: "rf014", name: "RF014 - Gest√£o de Centros de Custo", hours: 20 },
                    { id: "rf015", name: "RF015 - Gest√£o de Fornecedores", hours: 25 },
                    { id: "rf016", name: "RF016 - Gest√£o de Fabricantes", hours: 15 },
                    { id: "rf017", name: "RF017 - Gest√£o de Categorias", hours: 15 },
                    { id: "rf063", name: "RF063 - Motor de Templates", hours: 30 },
                    { id: "rf064", name: "RF064 - Templates de E-mail", hours: 25 },
                    { id: "rf065", name: "RF065 - Templates de Relat√≥rios", hours: 28 },
                    { id: "rf066", name: "RF066 - Notifica√ß√µes e Alertas", hours: 30 },
                ]
            },
            {
                id: "fase3",
                title: "Fase 3 - Financeiro Completo (Base Cont√°bil + Processos + Menu Matricial)",
                color: "bg-purple-600",
                status: "planned",
                plannedHours: 695,
                tasks: [
                    // Base Cont√°bil (Antiga Fase 3)
                    { id: "rf032", name: "RF032 - Plano de Contas", hours: 40 },
                    { id: "rf033", name: "RF033 - Centro de Custo Cont√°bil", hours: 35 },
                    { id: "rf034", name: "RF034 - Or√ßamento e Provis√£o", hours: 40 },
                    { id: "rf035", name: "RF035 - Lan√ßamentos Financeiros", hours: 45 },
                    { id: "rf036", name: "RF036 - Contas a Pagar", hours: 40 },
                    { id: "rf037", name: "RF037 - Contas a Receber", hours: 40 },
                    { id: "rf038", name: "RF038 - Concilia√ß√£o Banc√°ria", hours: 45 },
                    { id: "rf039", name: "RF039 - Relat√≥rios Financeiros", hours: 35 },
                    { id: "rf040", name: "RF040 - DRE", hours: 35 },
                    { id: "rf041", name: "RF041 - An√°lise Financeira", hours: 30 },
                    // Processos (Antiga Fase 4)
                    { id: "rf042", name: "RF042 - Fluxo de Caixa", hours: 40 },
                    { id: "rf043", name: "RF043 - Rateio de Custos", hours: 45 },
                    { id: "rf044", name: "RF044 - Controle Or√ßament√°rio", hours: 35 },
                    { id: "rf045", name: "RF045 - An√°lise de Varia√ß√µes", hours: 30 },
                    { id: "rf046", name: "RF046 - Relat√≥rios Gerenciais", hours: 35 },
                    { id: "rf047", name: "RF047 - Dashboards Financeiros", hours: 35 },
                    { id: "rf055", name: "RF055 - Gest√£o de Rateio", hours: 50 },
                    // Menu Matricial e UX (Novo)
                    { id: "ux001", name: "UX001 - Implementa√ß√£o Menu Matricial", hours: 15 },
                    { id: "ux002", name: "UX002 - Reorganiza√ß√£o da Navega√ß√£o", hours: 10 },
                    { id: "ux003", name: "UX003 - Breadcrumbs e Indicadores", hours: 5 },
                    { id: "ux004", name: "UX004 - Wireframes das Telas", hours: 5 },
                    { id: "ux005", name: "UX005 - Mockups Contratos e Faturas", hours: 5 },
                ]
            },
            {
                id: "fase4",
                title: "Fase 4 - Ativos, Auditoria e Integra√ß√µes",
                color: "bg-green-600",
                status: "planned",
                plannedHours: 307,
                tasks: [
                    { id: "rf083", name: "RF083 - Cadastro de Ativos TI", hours: 35 },
                    { id: "rf084", name: "RF084 - Invent√°rio Autom√°tico", hours: 40 },
                    { id: "rf085", name: "RF085 - Movimenta√ß√£o de Ativos", hours: 30 },
                    { id: "rf086", name: "RF086 - Invent√°rio C√≠clico", hours: 35 },
                    { id: "rf087", name: "RF087 - Trilha de Auditoria", hours: 35 },
                    { id: "rf088", name: "RF088 - Relat√≥rios Compliance", hours: 30 },
                    { id: "rf089", name: "RF089 - Alertas de Anomalias", hours: 25 },
                    { id: "rf095", name: "RF095 - Integra√ß√£o ERPs", hours: 40 },
                    { id: "rf096", name: "RF096 - Active Directory", hours: 37 },
                ]
            },
            {
                id: "fase5",
                title: "Fase 5 - Service Desk (Suporte N0/N1)",
                color: "bg-indigo-600",
                status: "planned",
                plannedHours: 580,
                tasks: [
                    { id: "rf049", name: "RF049 - Gest√£o de Chamados", hours: 50 },
                    { id: "rf050", name: "RF050 - SLA por Tipo de Chamado", hours: 40 },
                    { id: "rf051", name: "RF051 - Filas de Atendimento", hours: 35 },
                    { id: "rf052", name: "RF052 - Escala√ß√£o Autom√°tica", hours: 40 },
                    { id: "rf053", name: "RF053 - Base de Conhecimento", hours: 45 },
                    { id: "rf054", name: "RF054 - Portal do Usu√°rio", hours: 50 },
                    { id: "rf056", name: "RF056 - Ordens de Servi√ßo", hours: 40 },
                    { id: "rf069", name: "RF069 - Configura√ß√£o SLA Chamados", hours: 35 },
                    { id: "rf070", name: "RF070 - Base Conhecimento", hours: 30 },
                    { id: "rf073", name: "RF073 - Gest√£o Chamados e SLA", hours: 45 },
                    { id: "rf074", name: "RF074 - Gest√£o Tickets", hours: 40 },
                    { id: "rf078", name: "RF078 - Integra√ß√£o ERPs", hours: 50 },
                    { id: "rf080", name: "RF080 - Termos LGPD", hours: 40 },
                    { id: "rf082", name: "RF082 - Termos Responsabilidade", hours: 40 },
                ]
            },
        ];

        // Fun√ß√µes auxiliares
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => { clearTimeout(timeout); func(...args); };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        function updateRowStyle(row, isCompleted) {
            row.classList.toggle('completed', isCompleted);
        }

        function updateProgress(accordionItem) {
            const taskRows = accordionItem.querySelectorAll('.task-row');
            let totalHours = 0;
            let completedHours = 0;

            taskRows.forEach(row => {
                const hours = parseFloat(row.querySelector('.task-hours').textContent);
                totalHours += hours;
                if (row.classList.contains('completed')) {
                    completedHours += hours;
                }
            });

            const progressPercent = totalHours > 0 ? Math.round((completedHours / totalHours) * 100) : 0;
            const progressBar = accordionItem.querySelector('.phase-progress-fill');
            const progressText = accordionItem.querySelector('.phase-progress-text');

            if (progressBar) progressBar.style.width = `${progressPercent}%`;
            if (progressText) progressText.textContent = `${progressPercent}%`;

            updateGlobalMetrics();
        }

        function updateGlobalMetrics() {
            let totalCompleted = 0;
            let totalPlanned = 2130;
            let rfsCompleted = 0;
            let totalRFs = 54;

            projectData.forEach(phase => {
                if (phase.status === 'completed') {
                    totalCompleted += phase.plannedHours;
                    rfsCompleted += phase.tasks.length;
                }
            });

            const progressPercent = Math.round((totalCompleted / totalPlanned) * 100);

            document.getElementById('completedHours').textContent = totalCompleted;
            document.getElementById('completedRFs').textContent = rfsCompleted;
            document.getElementById('progressPercent').innerHTML = `${progressPercent}<span class="text-xl">%</span>`;

            document.getElementById('completedProgress').style.width = `${progressPercent}%`;
            document.getElementById('rfsProgress').style.width = `${(rfsCompleted / totalRFs) * 100}%`;
            document.getElementById('generalProgress').style.width = `${progressPercent}%`;
        }

        function saveData() {
            const savedData = {};
            projectData.forEach(phase => {
                savedData[phase.id] = {};
                phase.tasks.forEach(task => {
                    savedData[phase.id][task.id] = {
                        completed: false
                    };
                });
            });
            localStorage.setItem('icontrolit-project-data', JSON.stringify(savedData));
        }

        function loadData() {
            const saved = localStorage.getItem('icontrolit-project-data');
            return saved ? JSON.parse(saved) : {};
        }

        function renderPhases() {
            const container = document.getElementById('phases-container');
            const savedData = loadData();

            projectData.forEach((phase, index) => {
                const phaseDiv = document.createElement('div');
                phaseDiv.className = 'data-card rounded-xl overflow-hidden';

                const statusBadge = phase.status === 'completed'
                    ? '<span class="text-xs px-3 py-1 bg-green-500/20 text-green-400 rounded-full">Conclu√≠do</span>'
                    : '<span class="text-xs px-3 py-1 bg-gray-700/50 text-gray-400 rounded-full">Planejado</span>';

                phaseDiv.innerHTML = `
                    <button class="accordion-button w-full p-6 flex items-center justify-between text-left" data-phase="${phase.id}">
                        <div class="flex items-center gap-4 flex-1">
                            <div class="w-12 h-12 rounded-lg bg-teal-950/50 border border-teal-600/30 flex items-center justify-center text-teal-400 font-bold text-xl">
                                ${index}
                            </div>
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-white mb-1">${phase.title}</h3>
                                <div class="flex items-center gap-4 text-sm text-gray-400">
                                    <span>${phase.tasks.length} itens</span>
                                    <span>‚Ä¢</span>
                                    <span>${phase.plannedHours}h planejadas</span>
                                    <span>‚Ä¢</span>
                                    <span class="phase-progress-text">0%</span>
                                </div>
                            </div>
                            ${statusBadge}
                        </div>
                        <svg class="accordion-arrow w-5 h-5 text-teal-400 flex-shrink-0 ml-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                        </svg>
                    </button>
                    <div class="accordion-content">
                        <div class="px-6 pb-6">
                            <div class="progress-bar mb-4">
                                <div class="phase-progress-fill progress-fill" style="width: 0%;"></div>
                            </div>
                            <div class="space-y-1" data-phase-tasks="${phase.id}">
                                ${phase.tasks.map(task => `
                                    <div class="task-row flex items-center gap-4 py-3 px-4 hover:bg-gray-50/5 rounded-lg transition-colors" data-task-id="${task.id}">
                                        <input type="checkbox" class="task-checkbox w-5 h-5 rounded border-gray-600 text-teal-600 focus:ring-teal-500 focus:ring-offset-0">
                                        <div class="task-name flex-1 text-gray-300">${task.name}</div>
                                        <div class="task-hours text-sm text-gray-500">${task.hours}h</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;

                container.appendChild(phaseDiv);

                // Load saved states
                const phaseSaved = savedData[phase.id] || {};
                phase.tasks.forEach(task => {
                    const taskRow = phaseDiv.querySelector(`[data-task-id="${task.id}"]`);
                    const checkbox = taskRow.querySelector('.task-checkbox');
                    if (phaseSaved[task.id]?.completed) {
                        checkbox.checked = true;
                        taskRow.classList.add('completed');
                    }
                });

                updateProgress(phaseDiv);
            });

            // Accordion functionality
            document.querySelectorAll('.accordion-button').forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const isOpen = button.classList.contains('open');

                    if (isOpen) {
                        button.classList.remove('open');
                        content.style.maxHeight = '0';
                    } else {
                        button.classList.add('open');
                        content.style.maxHeight = content.scrollHeight + 'px';
                    }
                });
            });

            // Checkbox functionality
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', debounce(() => {
                    const taskRow = checkbox.closest('.task-row');
                    const accordionItem = checkbox.closest('.data-card');
                    updateRowStyle(taskRow, checkbox.checked);
                    updateProgress(accordionItem);
                    saveData();
                }, 300));
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderPhases();
            updateGlobalMetrics();
        });
    </script>
</body>
</html>
