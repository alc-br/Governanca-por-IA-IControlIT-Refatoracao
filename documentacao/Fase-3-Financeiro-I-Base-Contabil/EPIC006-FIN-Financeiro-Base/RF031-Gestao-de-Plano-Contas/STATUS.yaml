rf: RF031
fase: Fase-3-Financeiro-I-Base-Contabil
epic: EPIC006-FIN-Financeiro-Base
titulo: Gestao de Plano Contas


skeleton:
  criado: True
  data_criacao: "2025-12-27"
  observacao: "Backend parcialmente implementado: 10% completo. Implementado: CRUD Plano Contas (5 endpoints basicos - PlanoContas.cs). Faltam: Estrutura hierarquica ate 7 niveis configuraveis (Classe > Grupo > Subgrupo > Conta > Subconta > Item > Detalhe com codigo contabil padrao DRE/BP brasileiro + suporte IFRS internacional), builder visual drag-and-drop (interface criar/editar/reorganizar estrutura com preview impacto lancamentos + validacao circular dependency), centros custo integrados (gestao completa vinculados a hierarquia organizacional Empresa > Filial > Depto > Setor com rateio automatico multi-nivel + validacao soma % = 100%), dimensoes customizaveis ilimitadas (Projeto, Produto, Cliente, Regiao, Canal Venda com alocacao percentual ou valor absoluto), regras classificacao automatica (motor regras 50+ templates ex: 'Se Fornecedor = Vivo E Tipo = Telefonia → Conta 3.1.1.01' + builder visual sem codigo com operadores =, ≠, >, ≥, <, ≤, Contém, Regex + prioridade regras + simulacao ultimos 100 lancamentos + taxa match >95%), importacao multi-layout ERPs (engine templates SAP FI/CO, TOTVS Protheus 12, Oracle Financials, Sankhya, Conta Azul, Omie com mapeamento campos + transformacoes), exportacao lancamentos contabeis (geracao arquivo texto formatado D-E Debito-Credito com validacao partida dobrada + preview antes enviar ERP), relatorios gerenciais avancados (DRE multi-dimensional filtro projeto + departamento + periodo, Balanco Patrimonial consolidado, Analise Vertical/Horizontal, Graficos Waterfall), orcamento vs. realizado (modulo integrado orcamento anual com rateio mensal + comparacao visual real x orcado + alertas variacao >10% + forecast 3 meses), auditoria compliance (trilha completa mudancas historico versionado + aprovacao workflow alteracoes estrutura + relatorios rastreabilidade fiscal)."
documentacao:
  versao: "2.0"
  data_migracao: "2025-12-30"
  documentacao: true                # RF031.md v2.0 criado (contrato moderno)
  documentacao_yaml: true           # RF031.yaml criado (estruturado)
  rl: true                # RL-RF031.md criado (memória legado)
  rl_yaml: true           # RL-RF031.yaml criado (rastreabilidade)
  uc: true                # ✅ VALIDADO 100% - 2025-12-31
  md: true                # MD já existia
  wf: true                # WF já existia

  arquivos_obrigatorios_presentes: true
  separacao_rf_rl_validada: true

# ==============================================================================
# VALIDAÇÃO SEPARAÇÃO RF/RL (OBRIGATÓRIA v2.0)
# ==============================================================================

separacao_rf_rl:
  documentacao_limpo: true                # RF não contém conteúdo legado
  rl_completo: true             # RL contém TODA memória legado
  itens_com_destino: true       # 100% itens RL têm campo destino
  validador_executado: true     # validator-rl.py passou (exit code 0)

# ==============================================================================
# ESTATÍSTICAS MIGRAÇÃO
# ==============================================================================

estatisticas:
  total_rns: 15                 # Regras de negócio extraídas
  total_endpoints_api: 0        # Endpoints REST documentados (a implementar)
  total_permissoes_rbac: 18     # Permissões RBAC definidas
  total_integracoes_obrigatorias: 4  # i18n, auditoria, RBAC, Central
  itens_legado_rastreados: 25   # Itens em RL-RF031.yaml
  bancos_legados_mapeados: 1    # Bancos SQL Server antigos
  problemas_legado_identificados: 8  # Problemas documentados

  linhas_documentacao:
    documentacao_md: 850
    documentacao_yaml: 650
    rl_md: 720
    rl_yaml: 580
    total: 2800

desenvolvimento:
  backend:
    status: skeleton   # not_started | in_progress | done | skeleton
    contrato_validado: true
    contrato: CONTRATO-EXECUCAO-BACKEND
    versao_contrato: v1.0
    branch: null
  frontend:
    status: done
    branch: null

testes:
  backend: not_run        # not_run | pass | fail
  frontend: not_run
  e2e: not_run
  seguranca: not_run

documentacao_testes:
  backend: False
  frontend: False
  e2e: False
  seguranca: False

testes_ti:
  backend: not_run
  frontend: not_run
  e2e: not_run
  seguranca: not_run

testes_qa:
  executado: False       # True quando QA executou
  aprovado: False        # True quando usuario aprovou

devops:
  work_item_id: 557
  test_plan_id: null
  last_sync: "2025-12-27 15:31:34"
  board_column: "Skeleton"

governanca:
  contrato_ativo: CONTRATO-EXECUCAO-TESTES
  ultimo_manifesto: null
