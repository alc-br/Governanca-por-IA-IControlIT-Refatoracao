# RL-RF052.yaml - Referência ao Legado (Gestão de Consumidores)
# Versão: 1.0
# Data: 2025-12-30
# Autor: Agência ALC - alc.dev.br

rf_id: RF052
titulo: "Gestão de Consumidores"

legado:
  sistema: "VB.NET + ASP.NET Web Forms"
  versao: "IControlIT v1.x"
  arquitetura: "Monolítica Web Forms"
  banco_dados: "SQL Server 2014+"
  multi_tenant: false
  auditoria: "partial"

# ==============================================================================
# REFERÊNCIAS AO LEGADO (COM DESTINO OBRIGATÓRIO)
# ==============================================================================

referencias:
  # ----------------------------------------------------------------------------
  # TELAS ASPX
  # ----------------------------------------------------------------------------
  - id: "LEG-RF052-001"
    tipo: "tela"
    nome: "Usuario.aspx"
    caminho: "ic1_legado/IControlIT/Cadastros/Usuario.aspx"
    descricao: |
      CRUD básico de consumidores (chamados de "usuários" no legado).
      Campos: Nome, CPF, Matrícula, E-mail, Departamento, Cargo, Status, TipoUsuario.
      Validação de CPF apenas no frontend (JavaScript).
      Sem histórico de alterações.
    destino: "substituido"
    justificativa: |
      Substituído por componente Angular 19 com formulário completo, validações
      em todos os layers (frontend, backend, banco), auditoria de alterações e
      dashboard 360° para visualização.
    documentacao_item_relacionado: "RN-RF052-01, RN-RF052-02, RN-RF052-03"
    uc_relacionado: "UC01, UC02, UC03, UC04"
    complexidade: "alta"
    risco_migracao: "medio"
    prioridade: 1

  - id: "LEG-RF052-002"
    tipo: "tela"
    nome: "UsuarioLinha.aspx"
    caminho: "ic1_legado/IControlIT/Cadastros/UsuarioLinha.aspx"
    descricao: |
      Associação de linhas móveis a usuários.
      Criava registro em Usuario_Linha com data de início.
      Desassociação atualizava DataFim (histórico correto).
      Não validava se linha já estava alocada a outro usuário.
    destino: "substituido"
    justificativa: |
      Substituído por endpoints REST /api/gestao/consumidores/{id}/alocar-ativo
      e /api/gestao/consumidores/{id}/desalocar-ativo com validação de
      disponibilidade, auditoria e notificações automáticas.
    documentacao_item_relacionado: "RN-RF052-04"
    uc_relacionado: "UC05, UC06"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 2

  - id: "LEG-RF052-003"
    tipo: "tela"
    nome: "UsuarioAparelho.aspx"
    caminho: "ic1_legado/IControlIT/Cadastros/UsuarioAparelho.aspx"
    descricao: |
      Associação de aparelhos (smartphones, tablets) a usuários.
      Permitia múltiplos aparelhos por usuário.
      Sem validação de disponibilidade.
      Histórico em tabela separada Usuario_Aparelho_Historico.
    destino: "substituido"
    justificativa: |
      Substituído por endpoints unificados de alocação de ativos (linhas,
      ramais, aparelhos) com validação, cálculo de custos e integração com
      inventário (RF025).
    documentacao_item_relacionado: "RN-RF052-04"
    uc_relacionado: "UC05, UC06"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 2

  - id: "LEG-RF052-004"
    tipo: "tela"
    nome: "UsuarioCusto.aspx"
    caminho: "ic1_legado/IControlIT/Relatorios/UsuarioCusto.aspx"
    descricao: |
      Relatório de custos mensais por usuário.
      Dados pré-calculados em tabela Usuario_Custo_Mensal (job noturno).
      Histórico limitado a 12 meses.
      Sem comparação com média do departamento.
      Exportação apenas para Excel (EPPlus).
    destino: "substituido"
    justificativa: |
      Substituído por dashboard 360° com histórico de 7 anos, comparação com
      média departamental, gráficos interativos (ApexCharts) e exportação em
      múltiplos formatos (Excel, PDF, CSV).
    documentacao_item_relacionado: "RN-RF052-05, RN-RF052-11, RN-RF052-12, RN-RF052-14"
    uc_relacionado: "UC09, UC10"
    complexidade: "alta"
    risco_migracao: "medio"
    prioridade: 1

  - id: "LEG-RF052-005"
    tipo: "tela"
    nome: "UsuarioMovimentacao.aspx"
    caminho: "ic1_legado/IControlIT/RH/UsuarioMovimentacao.aspx"
    descricao: |
      Registro de mudanças de departamento/cargo.
      Mudança de departamento registrada em Usuario_Movimentacao.
      Mudança de cargo NÃO registrava histórico (sobrescrito diretamente).
      Sem workflow de aprovação.
      Sem atualização automática de políticas.
    destino: "substituido"
    justificativa: |
      Substituído por sistema de histórico completo que registra todas as
      movimentações (departamento, cargo, gestor, centro de custo) com auditoria,
      workflows de aprovação e aplicação automática de políticas via Domain Events.
    documentacao_item_relacionado: "RN-RF052-13"
    uc_relacionado: "UC03"
    complexidade: "media"
    risco_migracao: "medio"
    prioridade: 2

  # ----------------------------------------------------------------------------
  # WEBSERVICES
  # ----------------------------------------------------------------------------
  - id: "LEG-RF052-006"
    tipo: "webservice"
    nome: "UsuarioService.asmx - GetUsuarios()"
    caminho: "ic1_legado/IControlIT/Services/UsuarioService.asmx"
    descricao: |
      Listava todos os usuários sem paginação.
      Retornava todos os registros (performance ruim para >1000 usuários).
      Sem filtros avançados.
    destino: "substituido"
    justificativa: |
      Substituído por endpoint REST GET /api/gestao/consumidores com paginação
      obrigatória, filtros avançados (tipo, status, departamento, cargo) e
      DTOs otimizados.
    documentacao_item_relacionado: "RN-RF052-15"
    uc_relacionado: "UC00"
    complexidade: "baixa"
    risco_migracao: "baixo"
    prioridade: 3

  - id: "LEG-RF052-007"
    tipo: "webservice"
    nome: "UsuarioService.asmx - GetUsuarioById(int id)"
    caminho: "ic1_legado/IControlIT/Services/UsuarioService.asmx"
    descricao: |
      Obtinha usuário por ID.
      Retornava objeto complexo com linhas, aparelhos, custos (N+1 query problem).
      Performance ruim.
    destino: "substituido"
    justificativa: |
      Substituído por endpoint REST GET /api/gestao/consumidores/{id} com
      DTOs otimizados, eager loading (Include) e queries eficientes.
    documentacao_item_relacionado: "RN-RF052-15"
    uc_relacionado: "UC02"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 2

  - id: "LEG-RF052-008"
    tipo: "webservice"
    nome: "UsuarioService.asmx - CreateUsuario(UsuarioDto dto)"
    caminho: "ic1_legado/IControlIT/Services/UsuarioService.asmx"
    descricao: |
      Criava usuário com validações básicas.
      Sem workflow de onboarding.
      Sem aplicação automática de políticas.
    destino: "substituido"
    justificativa: |
      Substituído por endpoint REST POST /api/gestao/consumidores com
      FluentValidation completo e workflow de onboarding automatizado
      (6 etapas via Hangfire).
    documentacao_item_relacionado: "RN-RF052-01, RN-RF052-08"
    uc_relacionado: "UC01, UC07"
    complexidade: "alta"
    risco_migracao: "medio"
    prioridade: 1

  - id: "LEG-RF052-009"
    tipo: "webservice"
    nome: "UsuarioService.asmx - UpdateUsuario(UsuarioDto dto)"
    caminho: "ic1_legado/IControlIT/Services/UsuarioService.asmx"
    descricao: |
      Atualizava usuário.
      Sem histórico de alterações.
      Sem auditoria de campos modificados.
    destino: "substituido"
    justificativa: |
      Substituído por endpoint REST PUT /api/gestao/consumidores/{id} com
      auditoria completa (RF003), histórico de alterações e Domain Events
      para atualização automática de políticas.
    documentacao_item_relacionado: "RN-RF052-03, RN-RF052-13"
    uc_relacionado: "UC03"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 2

  - id: "LEG-RF052-010"
    tipo: "webservice"
    nome: "UsuarioService.asmx - InativarUsuario(int id)"
    caminho: "ic1_legado/IControlIT/Services/UsuarioService.asmx"
    descricao: |
      Inativava usuário (soft delete simples: Ativo = 0).
      Sem workflow de offboarding.
      Não desalocava ativos automaticamente.
    destino: "substituido"
    justificativa: |
      Substituído por endpoint REST DELETE /api/gestao/consumidores/{id} com
      workflow de offboarding automatizado (5 etapas: notificação, desalocação
      de ativos, cancelamento de acessos, cálculo de custos, inativação).
    documentacao_item_relacionado: "RN-RF052-09"
    uc_relacionado: "UC04, UC08"
    complexidade: "alta"
    risco_migracao: "alto"
    prioridade: 1

  - id: "LEG-RF052-011"
    tipo: "webservice"
    nome: "UsuarioService.asmx - AlocarLinha(int usuarioId, int linhaId)"
    caminho: "ic1_legado/IControlIT/Services/UsuarioService.asmx"
    descricao: |
      Alocava linha a usuário.
      Sem validação de disponibilidade da linha.
      Permitia múltiplas alocações da mesma linha.
    destino: "substituido"
    justificativa: |
      Substituído por endpoint REST POST /api/gestao/consumidores/{id}/alocar-ativo
      com validação de disponibilidade, auditoria e notificações.
    documentacao_item_relacionado: "RN-RF052-04"
    uc_relacionado: "UC05"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 2

  - id: "LEG-RF052-012"
    tipo: "webservice"
    nome: "UsuarioService.asmx - DesalocarLinha(int usuarioId, int linhaId)"
    caminho: "ic1_legado/IControlIT/Services/UsuarioService.asmx"
    descricao: |
      Desalocava linha de usuário.
      Registrava DataFim (histórico correto).
      Não calculava custos proporcionais.
    destino: "substituido"
    justificativa: |
      Substituído por endpoint REST POST /api/gestao/consumidores/{id}/desalocar-ativo
      com cálculo automático de custos proporcionais e auditoria.
    documentacao_item_relacionado: "RN-RF052-04"
    uc_relacionado: "UC06"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 2

  - id: "LEG-RF052-013"
    tipo: "webservice"
    nome: "UsuarioService.asmx - CalcularCustoMensal(int usuarioId)"
    caminho: "ic1_legado/IControlIT/Services/UsuarioService.asmx"
    descricao: |
      Calculava custo mensal de usuário de forma síncrona.
      Performance ruim (lento).
      Sem cache.
    destino: "substituido"
    justificativa: |
      Substituído por cálculo assíncrono via Hangfire (job mensal) com
      cache de 1 hora para consultas e armazenamento em tabela
      ConsumidorCustoMensal.
    documentacao_item_relacionado: "RN-RF052-05"
    uc_relacionado: "UC09"
    complexidade: "alta"
    risco_migracao: "medio"
    prioridade: 1

  # ----------------------------------------------------------------------------
  # TABELAS
  # ----------------------------------------------------------------------------
  - id: "LEG-RF052-014"
    tipo: "tabela"
    nome: "Usuario"
    caminho: "Database/dbo.Usuario"
    descricao: |
      Tabela principal de cadastro de usuários/consumidores.
      Campos: Id, Nome, CPF, Matricula, Email, DepartamentoId, CargoId, Status, TipoUsuario, Ativo.
      Problemas: Sem campos de auditoria (Created, CreatedBy), sem FornecedorId
      (multi-tenancy), soft delete inconsistente (campo Ativo bit).
    destino: "substituido"
    justificativa: |
      Substituído por entidade Consumidor com campos de auditoria completos
      (CreatedBy, Created, LastModifiedBy, LastModified, DeletedBy, Deleted),
      multi-tenancy (FornecedorId) e soft delete padronizado.
    documentacao_item_relacionado: "RN-RF052-01, RN-RF052-02, RN-RF052-03"
    uc_relacionado: "UC01, UC02, UC03, UC04"
    complexidade: "alta"
    risco_migracao: "alto"
    prioridade: 1

  - id: "LEG-RF052-015"
    tipo: "tabela"
    nome: "Usuario_Linha"
    caminho: "Database/dbo.Usuario_Linha"
    descricao: |
      Tabela de associação usuário-linha móvel.
      Campos: Id, UsuarioId, LinhaId, DataInicio, DataFim.
      Problemas: Sem validação de unicidade (permitia múltiplas alocações),
      sem FornecedorId.
    destino: "substituido"
    justificativa: |
      Substituído por entidade ConsumidorAtivo genérica que associa consumidor
      a qualquer tipo de ativo (linha, ramal, aparelho) com FornecedorId,
      auditoria e validação de unicidade.
    documentacao_item_relacionado: "RN-RF052-04"
    uc_relacionado: "UC05, UC06"
    complexidade: "media"
    risco_migracao: "medio"
    prioridade: 2

  - id: "LEG-RF052-016"
    tipo: "tabela"
    nome: "Usuario_Aparelho"
    caminho: "Database/dbo.Usuario_Aparelho"
    descricao: |
      Tabela de associação usuário-aparelho.
      Campos: Id, UsuarioId, AparelhoId, DataInicio, DataFim.
      Problemas: Histórico em tabela separada (Usuario_Aparelho_Historico),
      complexidade desnecessária, sem soft delete.
    destino: "substituido"
    justificativa: |
      Consolidado em tabela ConsumidorAtivo genérica com histórico integrado
      (soft delete preserva alocações antigas).
    documentacao_item_relacionado: "RN-RF052-04"
    uc_relacionado: "UC05, UC06"
    complexidade: "media"
    risco_migracao: "medio"
    prioridade: 2

  - id: "LEG-RF052-017"
    tipo: "tabela"
    nome: "Usuario_Custo_Mensal"
    caminho: "Database/dbo.Usuario_Custo_Mensal"
    descricao: |
      Tabela de custos mensais pré-calculados.
      Campos: Id, UsuarioId, AnoMes, CustoFixo, CustoVariavel, CustoTotal.
      Problemas: Retenção de apenas 12 meses (insuficiente para LGPD - 7 anos),
      sem criptografia de dados sensíveis.
    destino: "substituido"
    justificativa: |
      Substituído por entidade ConsumidorCustoMensal com retenção de 7 anos,
      particionamento por ano, criptografia AES-256 e auditoria completa.
    documentacao_item_relacionado: "RN-RF052-05"
    uc_relacionado: "UC09, UC10"
    complexidade: "alta"
    risco_migracao: "alto"
    prioridade: 1

  - id: "LEG-RF052-018"
    tipo: "tabela"
    nome: "Usuario_Movimentacao"
    caminho: "Database/dbo.Usuario_Movimentacao"
    descricao: |
      Tabela de histórico de movimentações.
      Campos: Id, UsuarioId, DepartamentoAnterior, DepartamentoNovo, Data, Motivo.
      Problemas: Apenas departamento (cargo sem histórico), sem campo Justificativa
      obrigatório, sem registro de usuário responsável pela movimentação.
    destino: "substituido"
    justificativa: |
      Substituído por entidade ConsumidorHistoricoMovimentacao que registra
      todas as movimentações (departamento, cargo, gestor, centro de custo)
      com auditoria completa (usuário, data, justificativa, valores anteriores).
    documentacao_item_relacionado: "RN-RF052-13"
    uc_relacionado: "UC03"
    complexidade: "media"
    risco_migracao: "medio"
    prioridade: 2

  - id: "LEG-RF052-019"
    tipo: "tabela"
    nome: "Usuario_Perfil"
    caminho: "Database/dbo.Usuario_Perfil"
    descricao: |
      Tabela de perfis de uso (Executivo, Gerente, Colaborador, Estagiário).
      Campos: Id, Codigo, Descricao.
      Problemas: Hard-coded sem flexibilidade, sem vínculo com políticas de consumo.
    destino: "substituido"
    justificativa: |
      Perfis de uso integrados ao sistema de políticas (RF049) com aplicação
      automática via Domain Events ao criar/atualizar consumidor.
    documentacao_item_relacionado: "RN-RF052-06"
    uc_relacionado: "UC01, UC03"
    complexidade: "baixa"
    risco_migracao: "baixo"
    prioridade: 3

  # ----------------------------------------------------------------------------
  # REGRAS DE NEGÓCIO IMPLÍCITAS
  # ----------------------------------------------------------------------------
  - id: "LEG-RF052-020"
    tipo: "regra_negocio"
    nome: "Validação de CPF apenas no Frontend"
    caminho: "Usuario.aspx (JavaScript inline)"
    descricao: |
      CPF validado apenas via JavaScript no navegador.
      Backend (stored procedures) aceitava CPF inválido.
    destino: "substituido"
    justificativa: |
      RF052 implementa validação de CPF em todos os layers: frontend (Angular),
      backend (FluentValidation), banco de dados (constraint customizada).
    documentacao_item_relacionado: "RN-RF052-02"
    uc_relacionado: "UC01, UC03"
    complexidade: "baixa"
    risco_migracao: "baixo"
    prioridade: 3

  - id: "LEG-RF052-021"
    tipo: "regra_negocio"
    nome: "Cálculo de Custo Mensal via Job Noturno"
    caminho: "Job SQL Server Agent: Job_CalcularCustoUsuarios"
    descricao: |
      Custos mensais calculados por job batch às 3h da manhã.
      Somava custos de linhas, aparelhos e consumo variável.
      Armazenava em Usuario_Custo_Mensal.
    destino: "assumido"
    justificativa: |
      RF052 mantém estratégia de cálculo via job mensal (Hangfire) mas com
      melhorias: histórico de 7 anos, criptografia, auditoria completa.
    documentacao_item_relacionado: "RN-RF052-05"
    uc_relacionado: "UC09"
    complexidade: "alta"
    risco_migracao: "medio"
    prioridade: 1

  - id: "LEG-RF052-022"
    tipo: "regra_negocio"
    nome: "Mudança de Departamento sem Atualização Automática de Políticas"
    caminho: "UsuarioMovimentacao.aspx (code-behind VB.NET)"
    descricao: |
      Quando usuário mudava de departamento, políticas aplicadas NÃO eram
      atualizadas automaticamente.
      Gestores precisavam manualmente reconfigurar políticas.
    destino: "substituido"
    justificativa: |
      RF052 implementa aplicação automática de políticas baseadas em perfil
      de uso e departamento com Domain Events disparando reavaliação ao mudar
      departamento.
    documentacao_item_relacionado: "RN-RF052-06, RN-RF052-13"
    uc_relacionado: "UC03"
    complexidade: "alta"
    risco_migracao: "medio"
    prioridade: 1

  - id: "LEG-RF052-023"
    tipo: "regra_negocio"
    nome: "Inativação de Usuário não Desalocava Ativos"
    caminho: "Usuario.aspx (botão Inativar)"
    descricao: |
      Ao inativar usuário (Ativo = 0), linhas e aparelhos alocados NÃO eram
      automaticamente desalocados.
      Gestor precisava manualmente desalocar antes de inativar.
    destino: "substituido"
    justificativa: |
      RF052 implementa workflow de offboarding automatizado que desaloca ativos,
      cancela acessos e calcula custos finais antes de inativar.
    documentacao_item_relacionado: "RN-RF052-09"
    uc_relacionado: "UC04, UC08"
    complexidade: "alta"
    risco_migracao: "alto"
    prioridade: 1

  - id: "LEG-RF052-024"
    tipo: "regra_negocio"
    nome: "Matrícula sem Validação de Unicidade"
    caminho: "Usuario.aspx (sem validação frontend)"
    descricao: |
      Matrícula sem validação de unicidade no frontend.
      Stored procedure sp_InserirUsuario tinha constraint UNIQUE que gerava
      erro genérico ao tentar inserir matrícula duplicada.
    destino: "substituido"
    justificativa: |
      RF052 valida unicidade de matrícula em todos os layers (frontend com
      mensagem clara, backend com FluentValidation customizada, banco com
      UNIQUE constraint).
    documentacao_item_relacionado: "RN-RF052-02"
    uc_relacionado: "UC01, UC03"
    complexidade: "baixa"
    risco_migracao: "baixo"
    prioridade: 3

  - id: "LEG-RF052-025"
    tipo: "regra_negocio"
    nome: "Ausência de Workflow de Onboarding"
    caminho: "Manual_Procedimentos_RH.docx (processo manual)"
    descricao: |
      Admissão de novo funcionário era manual em múltiplas telas: criar usuário,
      alocar linha, alocar aparelho, configurar perfil, enviar e-mail de
      boas-vindas.
      Sem workflow automatizado ou checklist.
    destino: "substituido"
    justificativa: |
      RF052 implementa workflow de onboarding automatizado em 6 etapas com
      aprovações, notificações e execução via Hangfire.
    documentacao_item_relacionado: "RN-RF052-08"
    uc_relacionado: "UC07"
    complexidade: "alta"
    risco_migracao: "medio"
    prioridade: 1

  - id: "LEG-RF052-026"
    tipo: "regra_negocio"
    nome: "Ausência de Integração com Sistema de RH"
    caminho: "Processo manual sem evidências em código"
    descricao: |
      Dados de funcionários (admissões, demissões, mudanças de departamento)
      informados manualmente pelo RH no IControlIT.
      Sem sincronização automática com sistema de RH corporativo.
    destino: "substituido"
    justificativa: |
      RF052 implementa integração automática com sistema de RH via API REST
      ou importação de arquivo CSV com sincronização diária.
    documentacao_item_relacionado: "RN-RF052-10"
    uc_relacionado: "UC01, UC03, UC04"
    complexidade: "alta"
    risco_migracao: "alto"
    prioridade: 1

# ==============================================================================
# PROBLEMAS LEGADO IDENTIFICADOS
# ==============================================================================

problemas_legado:
  - id: "PROB-RF052-001"
    titulo: "Ausência de Multi-tenancy Unificado"
    severidade: "CRÍTICA"
    descricao: |
      Cada cliente possuía banco SQL Server separado.
      Alto custo de infraestrutura e manutenção.
      Dificuldade de consolidação de relatórios cross-tenant.
    impacto: "Alto custo operacional, escalabilidade limitada"
    solucao_moderna: "Row-Level Security com campo FornecedorId em todas as tabelas"

  - id: "PROB-RF052-002"
    titulo: "Auditoria Inconsistente"
    severidade: "ALTA"
    descricao: |
      Algumas operações logadas, outras sem registro.
      Não atendia requisitos de compliance e rastreabilidade.
    impacto: "Dificuldade de auditoria, não conformidade com regulamentações"
    solucao_moderna: "Auditoria automática via AuditInterceptor (RF003) em todas as operações"

  - id: "PROB-RF052-003"
    titulo: "Validações Duplicadas (Frontend + Stored Procedures)"
    severidade: "MÉDIA"
    descricao: |
      Validações de CPF, e-mail, matrícula duplicadas em JavaScript (frontend)
      e stored procedures (backend).
      Dificulta manutenção e gera inconsistências.
    impacto: "Retrabalho, bugs por validações dessincroni zadas"
    solucao_moderna: "Camada única de validação (FluentValidation no backend)"

  - id: "PROB-RF052-004"
    titulo: "Soft Delete não Padronizado"
    severidade: "MÉDIA"
    descricao: |
      Algumas tabelas com campo Ativo (bit), outras sem exclusão lógica.
      Inconsistência dificulta recuperação de dados e compliance com LGPD.
    impacto: "Perda de dados, dificuldade de recuperação"
    solucao_moderna: "Soft delete padronizado com campos Deleted, DeletedBy, DeletedAt"

  - id: "PROB-RF052-005"
    titulo: "Histórico de Custos Limitado a 12 Meses"
    severidade: "CRÍTICA"
    descricao: |
      Tabela Usuario_Custo_Mensal mantinha apenas 12 meses de histórico.
      Não atende LGPD (retenção de 7 anos para contratos e faturamento).
    impacto: "Não conformidade com LGPD, impossibilidade de análise histórica"
    solucao_moderna: "Retenção de 7 anos com particionamento de tabela por ano"

  - id: "PROB-RF052-006"
    titulo: "Workflows Manuais de Onboarding/Offboarding"
    severidade: "ALTA"
    descricao: |
      Admissão e demissão de funcionários eram processos manuais em múltiplas
      telas, propensos a erros e esquecimentos (ex: não desalocar ativos).
    impacto: "Erros operacionais, custos desnecessários (linhas ativas após demissão)"
    solucao_moderna: "Workflows automatizados em 6 etapas (onboarding) e 5 etapas (offboarding) via Hangfire"

  - id: "PROB-RF052-007"
    titulo: "Ausência de Dashboard 360°"
    severidade: "MÉDIA"
    descricao: |
      Dados completos de um usuário espalhados em 5+ telas diferentes.
      Experiência do usuário ruim (múltiplos cliques, lentidão).
    impacto: "Frustração de usuários, lentidão em análises"
    solucao_moderna: "Dashboard 360° com 7 abas (Dados, Ativos, Consumo, Custos, Políticas, Histórico, Chamados)"

# ==============================================================================
# METADADOS
# ==============================================================================

metadados:
  total_itens_legado: 26
  itens_assumidos: 1
  itens_substituidos: 25
  itens_descartados: 0
  itens_a_revisar: 0
  cobertura_destinos: "100%"

# ==============================================================================
# CHANGELOG
# ==============================================================================

changelog:
  - versao: "1.0"
    data: "2025-12-30"
    descricao: "Documentação inicial de referência ao legado (Gestão de Consumidores)"
    autor: "Agência ALC - alc.dev.br"
