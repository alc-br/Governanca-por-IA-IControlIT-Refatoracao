# =============================================
# UC-RF029 - Casos de Uso: Gestão de SLA - Serviços
# Versão: 2.0
# Data: 2025-12-31
# Autor padrão: Agência ALC - alc.dev.br
# =============================================

uc:
  documentacao: "RF029"
  versao: "2.0"
  data: "2025-12-31"

casos_de_uso:

  - id: "UC01"
    nome: "Listar SLAs de Serviço"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false

    covers:
      documentacao_items:
        - "RF-CRUD-02"
      uc_items:
        - id: "FP-UC01-001"
          title: "Usuário acessa menu SLA Serviços"
          required: true
        - id: "FP-UC01-002"
          title: "Sistema carrega lista paginada"
          required: true
        - id: "FP-UC01-003"
          title: "Sistema exibe colunas de SLA"
          required: true
        - id: "FP-UC01-004"
          title: "Usuário aplica filtros"
          required: false
        - id: "FP-UC01-005"
          title: "Usuário ordena por coluna"
          required: false
        - id: "FA-UC01-001"
          title: "Lista vazia"
          required: false
        - id: "FA-UC01-002"
          title: "Visualizar BSC"
          required: false
        - id: "FE-UC01-001"
          title: "Erro de conexão"
          required: true

    precondicoes:
      - permissao: "SLA_SERVICOS.LISTAR"

    gatilho: "Usuario acessa menu SLA → SLA Serviços"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "acessar_menu_sla_servicos"
      - passo: 2
        ator: "sistema"
        acao: "carregar_lista_paginada"
      - passo: 3
        ator: "sistema"
        acao: "exibir_colunas_sla"
      - passo: 4
        ator: "usuario"
        acao: "aplicar_filtros"
      - passo: 5
        ator: "sistema"
        acao: "recarregar_com_filtros"

    fluxos_alternativos:
      - id: "FA-UC01-01"
        condicao: "lista_vazia"
        resultado: "exibir_mensagem_sem_slas"
      - id: "FA-UC01-02"
        condicao: "visualizar_bsc"
        resultado: "redirecionar_uc06"

    fluxos_excecao:
      - id: "FE-UC01-01"
        condicao: "erro_conexao"
        resultado: "exibir_erro_tentar_novamente"

    regras_aplicadas:
      - "RN-RF029-010"
      - "RN-RF029-011"

    resultado_final:
      estado: "lista_slas_exibida"

  - id: "UC02"
    nome: "Criar SLA de Serviço"
    ator_principal: "usuario_autenticado"
    tipo: "crud"
    impacta_dados: true

    covers:
      documentacao_items:
        - "RF-CRUD-01"
        - "RF-VAL-01"
        - "RN-RF029-001"
        - "RN-RF029-002"
        - "RN-RF029-003"
        - "RN-RF029-004"
      uc_items:
        - id: "FP-UC02-001"
          title: "Usuário clica em Novo SLA de Serviço"
          required: true
        - id: "FP-UC02-002"
          title: "Sistema exibe formulário"
          required: true
        - id: "FP-UC02-003"
          title: "Usuário preenche dados básicos"
          required: true
        - id: "FP-UC02-004"
          title: "Usuário define metas por prioridade"
          required: true
        - id: "FP-UC02-005"
          title: "Usuário define calendário de atendimento"
          required: true
        - id: "FP-UC02-006"
          title: "Usuário clica em Salvar"
          required: true
        - id: "FP-UC02-007"
          title: "Sistema valida dados"
          required: true
        - id: "FP-UC02-008"
          title: "Sistema salva SLA"
          required: true
        - id: "FP-UC02-009"
          title: "Sistema registra auditoria"
          required: true
        - id: "FE-UC02-001"
          title: "Campos obrigatórios vazios"
          required: true
        - id: "FE-UC02-002"
          title: "Metas inválidas"
          required: true

    precondicoes:
      - permissao: "SLA_SERVICOS.CRIAR"

    gatilho: "Usuario clica em Novo SLA de Serviço"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "clicar_novo_sla"
      - passo: 2
        ator: "sistema"
        acao: "exibir_formulario"
      - passo: 3
        ator: "usuario"
        acao: "preencher_dados_basicos"
      - passo: 4
        ator: "usuario"
        acao: "definir_metas_prioridade"
      - passo: 5
        ator: "usuario"
        acao: "definir_calendario"
      - passo: 6
        ator: "usuario"
        acao: "salvar"
      - passo: 7
        ator: "sistema"
        acao: "validar_dados"
      - passo: 8
        ator: "sistema"
        acao: "persistir_sla"
      - passo: 9
        ator: "sistema"
        acao: "registrar_auditoria"

    fluxos_alternativos: []

    fluxos_excecao:
      - id: "FE-UC02-01"
        condicao: "campos_obrigatorios_vazios"
        resultado: "exibir_erros_validacao"
      - id: "FE-UC02-02"
        condicao: "metas_invalidas"
        resultado: "exibir_erro_metas"

    regras_aplicadas:
      - "RN-RF029-001"
      - "RN-RF029-002"
      - "RN-RF029-003"
      - "RN-RF029-004"
      - "RN-RF029-005"
      - "RN-RF029-006"
      - "RN-RF029-010"
      - "RN-RF029-011"
      - "RN-RF029-012"
      - "RN-RF029-013"
      - "RN-RF029-014"

    resultado_final:
      estado: "sla_criado"

  - id: "UC03"
    nome: "Visualizar SLA de Serviço"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false

    covers:
      documentacao_items:
        - "RF-CRUD-03"
      uc_items:
        - id: "FP-UC03-001"
          title: "Usuário clica em Visualizar"
          required: true
        - id: "FP-UC03-002"
          title: "Sistema exibe detalhes completos"
          required: true
        - id: "FP-UC03-003"
          title: "Sistema exibe estatísticas"
          required: true

    precondicoes:
      - permissao: "SLA_SERVICOS.VISUALIZAR"

    gatilho: "Usuario clica em Visualizar SLA"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "clicar_visualizar"
      - passo: 2
        ator: "sistema"
        acao: "exibir_detalhes_completos"
      - passo: 3
        ator: "sistema"
        acao: "exibir_estatisticas"

    fluxos_alternativos: []

    fluxos_excecao:
      - id: "FE-UC03-01"
        condicao: "sla_outro_tenant"
        resultado: "acesso_negado"

    regras_aplicadas:
      - "RN-RF029-010"

    resultado_final:
      estado: "detalhes_exibidos"

  - id: "UC04"
    nome: "Editar SLA de Serviço"
    ator_principal: "usuario_autenticado"
    tipo: "crud"
    impacta_dados: true

    covers:
      documentacao_items:
        - "RF-CRUD-04"
      uc_items:
        - id: "FP-UC04-001"
          title: "Usuário clica em Editar"
          required: true
        - id: "FP-UC04-002"
          title: "Sistema exibe formulário preenchido"
          required: true
        - id: "FP-UC04-003"
          title: "Usuário altera dados"
          required: true
        - id: "FP-UC04-004"
          title: "Usuário clica em Salvar"
          required: true
        - id: "FP-UC04-005"
          title: "Sistema valida e atualiza"
          required: true
        - id: "FP-UC04-006"
          title: "Sistema registra auditoria"
          required: true

    precondicoes:
      - permissao: "SLA_SERVICOS.EDITAR"

    gatilho: "Usuario clica em Editar SLA"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "clicar_editar"
      - passo: 2
        ator: "sistema"
        acao: "exibir_formulario_preenchido"
      - passo: 3
        ator: "usuario"
        acao: "alterar_dados"
      - passo: 4
        ator: "usuario"
        acao: "salvar"
      - passo: 5
        ator: "sistema"
        acao: "validar_alteracoes"
      - passo: 6
        ator: "sistema"
        acao: "persistir_alteracoes"
      - passo: 7
        ator: "sistema"
        acao: "registrar_auditoria"

    fluxos_alternativos: []

    fluxos_excecao:
      - id: "FE-UC04-01"
        condicao: "alterar_sla_outro_tenant"
        resultado: "acesso_negado"

    regras_aplicadas:
      - "RN-RF029-001"
      - "RN-RF029-002"
      - "RN-RF029-003"
      - "RN-RF029-004"
      - "RN-RF029-005"
      - "RN-RF029-006"
      - "RN-RF029-010"
      - "RN-RF029-013"
      - "RN-RF029-014"

    resultado_final:
      estado: "sla_atualizado"

  - id: "UC05"
    nome: "Inativar SLA de Serviço"
    ator_principal: "usuario_autenticado"
    tipo: "crud"
    impacta_dados: true

    covers:
      documentacao_items:
        - "RF-CRUD-05"
      uc_items:
        - id: "FP-UC05-001"
          title: "Usuário clica em Inativar"
          required: true
        - id: "FP-UC05-002"
          title: "Sistema exibe confirmação"
          required: true
        - id: "FP-UC05-003"
          title: "Usuário confirma"
          required: true
        - id: "FP-UC05-004"
          title: "Sistema soft delete"
          required: true
        - id: "FP-UC05-005"
          title: "Sistema registra auditoria"
          required: true

    precondicoes:
      - permissao: "SLA_SERVICOS.EXCLUIR"

    gatilho: "Usuario clica em Inativar SLA"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "clicar_inativar"
      - passo: 2
        ator: "sistema"
        acao: "exibir_confirmacao"
      - passo: 3
        ator: "usuario"
        acao: "confirmar"
      - passo: 4
        ator: "sistema"
        acao: "soft_delete_sla"
      - passo: 5
        ator: "sistema"
        acao: "registrar_auditoria"

    fluxos_alternativos: []

    fluxos_excecao: []

    regras_aplicadas:
      - "RN-RF029-010"
      - "RN-RF029-011"

    resultado_final:
      estado: "sla_inativado"

  - id: "UC06"
    nome: "Gerenciar Balanced Scorecard"
    ator_principal: "usuario_autenticado"
    tipo: "acao"
    impacta_dados: true

    covers:
      documentacao_items:
        - "RF-FUNC-01"
      uc_items:
        - id: "FP-UC06-001"
          title: "Usuário acessa BSC"
          required: true
        - id: "FP-UC06-002"
          title: "Sistema exibe perspectivas BSC"
          required: true
        - id: "FP-UC06-003"
          title: "Usuário gerencia indicadores"
          required: true

    precondicoes:
      - permissao: "SLA_SERVICOS.GERENCIAR_BSC"

    gatilho: "Usuario acessa Balanced Scorecard"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "acessar_bsc"
      - passo: 2
        ator: "sistema"
        acao: "exibir_perspectivas"
      - passo: 3
        ator: "usuario"
        acao: "gerenciar_indicadores"

    fluxos_alternativos: []

    fluxos_excecao: []

    regras_aplicadas:
      - "RN-RF029-007"
      - "RN-RF029-008"
      - "RN-RF029-009"
      - "RN-RF029-010"

    resultado_final:
      estado: "bsc_gerenciado"

  - id: "UC07"
    nome: "Visualizar Dashboard Executivo"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false

    covers:
      documentacao_items:
        - "RF-FUNC-02"
      uc_items:
        - id: "FP-UC07-001"
          title: "Usuário acessa Dashboard"
          required: true
        - id: "FP-UC07-002"
          title: "Sistema exibe KPIs estratégicos"
          required: true
        - id: "FP-UC07-003"
          title: "Sistema atualiza em tempo real (SignalR)"
          required: true

    precondicoes:
      - permissao: "SLA_SERVICOS.DASHBOARD"

    gatilho: "Usuario acessa Dashboard Executivo"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "acessar_dashboard"
      - passo: 2
        ator: "sistema"
        acao: "exibir_kpis_estrategicos"
      - passo: 3
        ator: "sistema"
        acao: "atualizar_tempo_real"

    fluxos_alternativos: []

    fluxos_excecao: []

    regras_aplicadas:
      - "RN-RF029-007"
      - "RN-RF029-008"
      - "RN-RF029-009"
      - "RN-RF029-010"

    resultado_final:
      estado: "dashboard_exibido"

  - id: "UC08"
    nome: "Gerar Relatório Qualidade"
    ator_principal: "usuario_autenticado"
    tipo: "acao"
    impacta_dados: false

    covers:
      documentacao_items:
        - "RF-FUNC-03"
      uc_items:
        - id: "FP-UC08-001"
          title: "Usuário solicita relatório"
          required: true
        - id: "FP-UC08-002"
          title: "Usuário define parâmetros"
          required: true
        - id: "FP-UC08-003"
          title: "Sistema gera relatório"
          required: true
        - id: "FP-UC08-004"
          title: "Sistema permite exportar"
          required: true

    precondicoes:
      - permissao: "SLA_SERVICOS.RELATORIOS"

    gatilho: "Usuario solicita relatório de qualidade"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "solicitar_relatorio"
      - passo: 2
        ator: "usuario"
        acao: "definir_parametros"
      - passo: 3
        ator: "sistema"
        acao: "gerar_relatorio"
      - passo: 4
        ator: "sistema"
        acao: "permitir_exportar"

    fluxos_alternativos: []

    fluxos_excecao: []

    regras_aplicadas:
      - "RN-RF029-010"

    resultado_final:
      estado: "relatorio_gerado"

exclusions:
  uc_items: []

historico:
  - versao: "2.0"
    data: "2025-12-31"
    autor: "Agência ALC - alc.dev.br"
    descricao: "Versão canônica orientada a contrato - adequada aos templates oficiais"
  - versao: "1.0"
    data: "2025-12-17"
    autor: "Sistema"
    descricao: "Versão inicial com 8 casos de uso"
