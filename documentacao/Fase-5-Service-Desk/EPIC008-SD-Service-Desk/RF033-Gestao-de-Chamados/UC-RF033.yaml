uc:
  documentacao: "RF033"
  versao: "2.0"
  data: "2025-12-31"
  autor: "Agência ALC - alc.dev.br"
  epic: "EPIC008-SD-Service-Desk"
  fase: "Fase 5 - Service Desk"

casos_de_uso:
  - id: "UC00"
    nome: "Listar Chamados"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RF033-CRUD-02"
        - "RF033-SEC-01"
        - "RF033-SEC-02"
        - "RF033-FUNC-02"
        - "RF033-FUNC-06"
      rn_items:
        - "RN-RF033-01"
        - "RN-RF033-05"
        - "RN-RF033-10"
        - "RN-RF033-16"
      uc_items:
        - id: "FP-UC00-001"
          title: "Acessar Tela de Chamados"
          required: true
        - id: "FP-UC00-002"
          title: "Aplicar Filtros"
          required: true
        - id: "FP-UC00-003"
          title: "Ordenar e Paginar"
          required: true
        - id: "FP-UC00-004"
          title: "Visualizar Dashboard SLA"
          required: true
        - id: "FE-UC00-001"
          title: "Usuário sem Permissão"
          required: true

  - id: "UC01"
    nome: "Criar Chamado"
    ator_principal: "usuario_autenticado"
    tipo: "escrita"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RF033-CRUD-01"
        - "RF033-CRUD-07"
        - "RF033-VAL-01"
        - "RF033-VAL-05"
        - "RF033-FUNC-01"
        - "RF033-FUNC-05"
      rn_items:
        - "RN-RF033-01"
        - "RN-RF033-02"
        - "RN-RF033-08"
        - "RN-RF033-09"
        - "RN-RF033-10"
        - "RN-RF033-13"
        - "RN-RF033-16"
      uc_items:
        - id: "FP-UC01-001"
          title: "Acessar Formulário de Criação"
          required: true
        - id: "FP-UC01-002"
          title: "Preencher e Validar Campos"
          required: true
        - id: "FP-UC01-003"
          title: "Submeter Criação"
          required: true
        - id: "FE-UC01-001"
          title: "Campo Obrigatório Ausente"
          required: true
        - id: "FE-UC01-002"
          title: "Anexo Excede Limite"
          required: true
        - id: "FE-UC01-003"
          title: "Fila Inválida ou Inativa"
          required: true

  - id: "UC02"
    nome: "Visualizar Chamado"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RF033-CRUD-03"
        - "RF033-CRUD-06"
        - "RF033-SEC-01"
        - "RF033-SEC-02"
        - "RF033-FUNC-01"
        - "RF033-FUNC-02"
        - "RF033-FUNC-04"
        - "RF033-FUNC-08"
      rn_items:
        - "RN-RF033-02"
        - "RN-RF033-05"
        - "RN-RF033-07"
        - "RN-RF033-12"
        - "RN-RF033-16"
      uc_items:
        - id: "FP-UC02-001"
          title: "Acessar Chamado"
          required: true
        - id: "FP-UC02-002"
          title: "Visualizar Interações"
          required: true
        - id: "FP-UC02-003"
          title: "Visualizar SLA"
          required: true
        - id: "FE-UC02-001"
          title: "Chamado Não Encontrado"
          required: true
        - id: "FE-UC02-002"
          title: "Usuário sem Acesso ao Chamado"
          required: true

  - id: "UC03"
    nome: "Editar Chamado"
    ator_principal: "suporte_atendente"
    tipo: "escrita"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RF033-CRUD-04"
        - "RF033-CRUD-05"
        - "RF033-CRUD-06"
        - "RF033-CRUD-07"
        - "RF033-CRUD-08"
        - "RF033-VAL-01"
        - "RF033-VAL-02"
        - "RF033-FUNC-03"
        - "RF033-FUNC-04"
        - "RF033-FUNC-05"
        - "RF033-FUNC-08"
      rn_items:
        - "RN-RF033-01"
        - "RN-RF033-03"
        - "RN-RF033-07"
        - "RN-RF033-10"
        - "RN-RF033-12"
        - "RN-RF033-13"
        - "RN-RF033-14"
        - "RN-RF033-16"
      uc_items:
        - id: "FP-UC03-001"
          title: "Alterar Status"
          required: true
        - id: "FP-UC03-002"
          title: "Atribuir a Técnico"
          required: true
        - id: "FP-UC03-003"
          title: "Adicionar Interação"
          required: true
        - id: "FA-UC03-001"
          title: "Escalação Automática por SLA Vencido"
          required: true
        - id: "FE-UC03-001"
          title: "Transição de Status Inválida"
          required: true
        - id: "FE-UC03-002"
          title: "Técnico Inválido para Atribuição"
          required: true

  - id: "UC04"
    nome: "Encerrar Chamado"
    ator_principal: "suporte_supervisor"
    tipo: "escrita"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RF033-CRUD-09"
        - "RF033-CRUD-10"
        - "RF033-CRUD-11"
        - "RF033-VAL-03"
        - "RF033-VAL-04"
        - "RF033-VAL-06"
        - "RF033-VAL-07"
        - "RF033-FUNC-05"
        - "RF033-FUNC-07"
      rn_items:
        - "RN-RF033-04"
        - "RN-RF033-06"
        - "RN-RF033-10"
        - "RN-RF033-11"
        - "RN-RF033-15"
        - "RN-RF033-16"
        - "RN-RF033-17"
      uc_items:
        - id: "FP-UC04-001"
          title: "Encerrar com Solução"
          required: true
        - id: "FP-UC04-002"
          title: "Avaliar Satisfação"
          required: true
        - id: "FP-UC04-003"
          title: "Reabrir Chamado"
          required: true
        - id: "FE-UC04-001"
          title: "Encerramento sem Solução"
          required: true
        - id: "FE-UC04-002"
          title: "Avaliação Duplicada"
          required: true
        - id: "FE-UC04-003"
          title: "Reabertura Após 7 Dias"
          required: true
        - id: "FE-UC04-004"
          title: "Nota de Avaliação Inválida"
          required: true

padroes_gerais:
  multi_tenancy:
    aplicado: true
    campo_isolamento: "FornecedorId"
    filtro_obrigatorio: "WHERE FornecedorId = @UsuarioFornecedorId AND Fl_Ativo = 1"

  rbac:
    aplicado: true
    permissoes:
      - codigo: "GES.CHAMADOS.VIEW"
        descricao: "Visualizar chamados próprios"
        ucs: ["UC00", "UC02"]
      - codigo: "GES.CHAMADOS.CREATE"
        descricao: "Criar chamados"
        ucs: ["UC01"]
      - codigo: "GES.CHAMADOS.UPDATE"
        descricao: "Atualizar chamados"
        ucs: ["UC03"]
      - codigo: "GES.CHAMADOS.CLOSE"
        descricao: "Encerrar chamados"
        ucs: ["UC04"]
      - codigo: "GES.CHAMADOS.EVALUATE"
        descricao: "Avaliar chamados"
        ucs: ["UC04"]
      - codigo: "GES.CHAMADOS.ASSIGN"
        descricao: "Atribuir chamados"
        ucs: ["UC03"]
      - codigo: "GES.CHAMADOS.REOPEN"
        descricao: "Reabrir chamados"
        ucs: ["UC04"]

  auditoria:
    aplicada: true
    operacoes_auditadas:
      - operacao: "CREATE"
        descricao: "Abertura de chamado"
        ucs: ["UC01"]
      - operacao: "UPDATE"
        descricao: "Alteração de status, atribuição, adição de interação"
        ucs: ["UC03"]
      - operacao: "CLOSE"
        descricao: "Encerramento"
        ucs: ["UC04"]
      - operacao: "REOPEN"
        descricao: "Reabertura"
        ucs: ["UC04"]
      - operacao: "EVALUATE"
        descricao: "Avaliação de satisfação"
        ucs: ["UC04"]
      - operacao: "ESCALATE"
        descricao: "Escalação automática"
        ucs: ["UC03"]
      - operacao: "ATTACH"
        descricao: "Upload de anexo"
        ucs: ["UC01", "UC03"]
    retencao: "7 anos (LGPD)"

  i18n:
    aplicado: true
    idiomas: ["pt-BR", "en-US", "es-ES"]
    chaves_principais:
      - "chamados.titulo"
      - "chamados.campos.*"
      - "chamados.status.*"
      - "chamados.acoes.*"
      - "chamados.mensagens.*"
      - "chamados.validacoes.*"

  validacoes:
    validacao_entrada: true
    protecao_injecao: true
    soft_delete: true
    validacao_unicidade: true
    validacao_integridade: true

cobertura_rf:
  total_itens: 30
  itens_cobertos: 30
  taxa_cobertura: "100%"
  itens:
    crud:
      - id: "RF033-CRUD-01"
        title: "Criar chamado"
        coberto_por: ["UC01"]
      - id: "RF033-CRUD-02"
        title: "Listar chamados"
        coberto_por: ["UC00"]
      - id: "RF033-CRUD-03"
        title: "Visualizar chamado"
        coberto_por: ["UC02"]
      - id: "RF033-CRUD-04"
        title: "Atualizar chamado"
        coberto_por: ["UC03"]
      - id: "RF033-CRUD-05"
        title: "Atribuir chamado"
        coberto_por: ["UC03"]
      - id: "RF033-CRUD-06"
        title: "Adicionar interação"
        coberto_por: ["UC03"]
      - id: "RF033-CRUD-07"
        title: "Upload de anexo"
        coberto_por: ["UC01", "UC03"]
      - id: "RF033-CRUD-08"
        title: "Alterar status"
        coberto_por: ["UC03"]
      - id: "RF033-CRUD-09"
        title: "Encerrar chamado"
        coberto_por: ["UC04"]
      - id: "RF033-CRUD-10"
        title: "Avaliar chamado"
        coberto_por: ["UC04"]
      - id: "RF033-CRUD-11"
        title: "Reabrir chamado"
        coberto_por: ["UC04"]

    validacoes:
      - id: "RF033-VAL-01"
        title: "Validar campos obrigatórios"
        coberto_por: ["UC01", "UC03"]
      - id: "RF033-VAL-02"
        title: "Validar transições de status"
        coberto_por: ["UC03"]
      - id: "RF033-VAL-03"
        title: "Validar solução obrigatória no encerramento"
        coberto_por: ["UC04"]
      - id: "RF033-VAL-04"
        title: "Validar nota avaliação (1-5)"
        coberto_por: ["UC04"]
      - id: "RF033-VAL-05"
        title: "Validar limite anexos"
        coberto_por: ["UC01"]
      - id: "RF033-VAL-06"
        title: "Validar reabertura (até 7 dias)"
        coberto_por: ["UC04"]
      - id: "RF033-VAL-07"
        title: "Validar unicidade de avaliação"
        coberto_por: ["UC04"]

    seguranca:
      - id: "RF033-SEC-01"
        title: "Isolamento multi-tenant"
        coberto_por: ["UC00", "UC01", "UC02", "UC03", "UC04"]
      - id: "RF033-SEC-02"
        title: "Permissões RBAC"
        coberto_por: ["UC00", "UC01", "UC02", "UC03", "UC04"]
      - id: "RF033-SEC-03"
        title: "Auditoria completa (7 anos)"
        coberto_por: ["UC00", "UC01", "UC02", "UC03", "UC04"]
      - id: "RF033-SEC-04"
        title: "Soft delete"
        coberto_por: ["UC00", "UC01", "UC02", "UC03", "UC04"]
      - id: "RF033-SEC-05"
        title: "Validação de entrada"
        coberto_por: ["UC01", "UC03", "UC04"]

    funcionalidades_especificas:
      - id: "RF033-FUNC-01"
        title: "Cálculo automático de SLA"
        coberto_por: ["UC01", "UC02"]
      - id: "RF033-FUNC-02"
        title: "Alertas SLA (80% e 100%)"
        coberto_por: ["UC00", "UC02"]
      - id: "RF033-FUNC-03"
        title: "Escalação automática (SLA vencido)"
        coberto_por: ["UC03-FA001"]
      - id: "RF033-FUNC-04"
        title: "Pausa SLA em status 'Aguardando'"
        coberto_por: ["UC02", "UC03"]
      - id: "RF033-FUNC-05"
        title: "Notificações automáticas"
        coberto_por: ["UC01", "UC03", "UC04"]
      - id: "RF033-FUNC-06"
        title: "Dashboard em tempo real (SignalR)"
        coberto_por: ["UC00"]
      - id: "RF033-FUNC-07"
        title: "Base de conhecimento"
        coberto_por: ["UC04"]
      - id: "RF033-FUNC-08"
        title: "Interações públicas e privadas"
        coberto_por: ["UC02", "UC03"]

cobertura_rn:
  total_regras: 17
  regras_cobertas: 17
  taxa_cobertura: "100%"
  regras:
    - id: "RN-RF033-01"
      descricao: "Atribuição automática a fila"
      coberto_por: ["UC01", "UC03"]
    - id: "RN-RF033-02"
      descricao: "Cálculo automático de SLA"
      coberto_por: ["UC01", "UC02"]
    - id: "RN-RF033-03"
      descricao: "Validação de transições de status"
      coberto_por: ["UC03"]
    - id: "RN-RF033-04"
      descricao: "Solução obrigatória no encerramento"
      coberto_por: ["UC04"]
    - id: "RN-RF033-05"
      descricao: "Alertas de SLA"
      coberto_por: ["UC00", "UC02"]
    - id: "RN-RF033-06"
      descricao: "Avaliação de satisfação opcional"
      coberto_por: ["UC04"]
    - id: "RN-RF033-07"
      descricao: "Interações públicas e privadas"
      coberto_por: ["UC02", "UC03"]
    - id: "RN-RF033-08"
      descricao: "Atribuição a fila de atendimento"
      coberto_por: ["UC01"]
    - id: "RN-RF033-09"
      descricao: "Vinculação a ativo ou consumidor"
      coberto_por: ["UC01"]
    - id: "RN-RF033-10"
      descricao: "Notificações automáticas"
      coberto_por: ["UC01", "UC03", "UC04"]
    - id: "RN-RF033-11"
      descricao: "Reabertura de chamado encerrado"
      coberto_por: ["UC04"]
    - id: "RN-RF033-12"
      descricao: "Prazo SLA pausado em status 'Aguardando'"
      coberto_por: ["UC02", "UC03"]
    - id: "RN-RF033-13"
      descricao: "Anexos e evidências"
      coberto_por: ["UC01", "UC03"]
    - id: "RN-RF033-14"
      descricao: "Escalação automática por SLA"
      coberto_por: ["UC03-FA001"]
    - id: "RN-RF033-15"
      descricao: "Integração com base de conhecimento"
      coberto_por: ["UC04"]
    - id: "RN-RF033-16"
      descricao: "Isolamento multi-tenant"
      coberto_por: ["UC00", "UC01", "UC02", "UC03", "UC04"]
    - id: "RN-RF033-17"
      descricao: "Unicidade de avaliação"
      coberto_por: ["UC04"]

exclusions:
  uc_items: []

historico:
  - versao: "2.0"
    data: "2025-12-31"
    autor: "Agência ALC - alc.dev.br"
    descricao: "Migração v1.0 → v2.0: Conformidade total com template canônico. 5 UCs canônicos (UC00-UC04). Matriz de rastreabilidade completa. Cobertura RF → UC: 100% (30/30 itens). Cobertura RN → UC: 100% (17/17 regras)."

  - versao: "1.0"
    data: "2025-01-14"
    autor: "Architect Agent"
    descricao: "Versão inicial com 10 UCs em formato v1.0."
