rf: RF034
fase: Fase-6-Ativos-Auditoria-Integracoes
epic: EPIC010-AUD-Auditoria-Avancada
titulo: Gestao de Itens Auditoria


skeleton:
  criado: True
  data_criacao: "2025-12-27"
  observacao: "Backend parcialmente implementado: 15% completo. Implementado: CRUD basico Itens Auditoria (5 endpoints - ItensAuditoria.cs). Faltam: Calculo automatico ValorCobradoAMais = ValorCobrado - ValorCorreto (propriedade calculada com validacao regra RN002), calculo PercentualDivergencia = ((ValorCobrado - ValorCorreto) / ValorCorreto) * 100 (tratar divisao por zero), validacao valores nao-negativos com precisao 8 casas decimais (padrao telecomunicacoes DECIMAL(13,8)), validacao QuantidadeConsumo > 0 (minutos/MB/SMS deve ser positivo), validacao relacionamentos obrigatorios (bilhete + tipo bilhete + ativo + contrato devem existir e estar ativos com MustAsync), sincronizacao automatica com Resumo Auditoria via Domain Events (recalcular totalizadores do resumo ao criar/editar/excluir item), geracao contestacoes (agrupamento itens para contestacao + calculo total recuperar + geracao documentos formais), relatorios gerenciais (itens por operadora, por tipo servico, evolucao temporal divergencias, ROI auditoria com Chart.js), exportacao base contestacoes (Excel + PDF com evidencias anexas), Machine Learning deteccao padroes recorrentes (clustering divergencias similares), dashboard executivo KPIs auditoria tempo real SignalR."
documentacao:
  versao: "2.0"
  data_migracao: "2025-12-30"
  documentacao: True
  documentacao_yaml: True
  rl: True
  rl_yaml: True
  uc: True
  uc_yaml: True
  md: True
  wf: True

  arquivos_obrigatorios_presentes: True
  separacao_rf_rl_validada: True

# ==============================================================================
# VALIDAÇÃO UC (EXECUTADA 2025-12-31)
# ==============================================================================

validacoes:
  documentacao_uc_cobertura_total: True       # 100% RF034 funcionalidades cobertas por UCs
  uc_md_consistente: True           # UC-RF034.md estrutura conforme template
  uc_wf_consistente: True           # UC-RF034.md ↔ WF-RF034.md sincronizados
  documentacao_yaml_sincronizado: True        # RF034.yaml sincronizado
  uc_yaml_sincronizado: True        # UC-RF034.yaml sincronizado
  validador_uc_executado: True      # validator-docs.py --rf RF034 --doc UC
  validador_uc_exit_code: 0         # Exit code 0 = 100% conformidade
  total_gaps_uc: 0                  # 0 gaps encontrados
  data_validacao_uc: "2025-12-31"

# ==============================================================================
# VALIDAÇÃO SEPARAÇÃO RF/RL (OBRIGATÓRIA v2.0)
# ==============================================================================

separacao_rf_rl:
  documentacao_limpo: True                # RF não contém conteúdo legado
  rl_completo: True             # RL contém TODA memória legado
  itens_com_destino: True       # 100% itens RL têm campo destino
  validador_executado: True     # validator-rl.py executado (validação manual)

# ==============================================================================
# ESTATÍSTICAS MIGRAÇÃO
# ==============================================================================

estatisticas:
  total_rns: 15                 # Regras de negócio extraídas
  total_endpoints_api: 11       # Endpoints REST documentados
  total_permissoes_rbac: 6      # Permissões RBAC definidas
  total_integracoes_obrigatorias: 4  # i18n, auditoria, RBAC, Central
  itens_legado_rastreados: 13   # Itens em RL-RF034.yaml
  bancos_legados_mapeados: 1    # Cliente_Modelo
  problemas_legado_identificados: 6  # Problemas documentados

  linhas_documentacao:
    documentacao_md: 564
    documentacao_yaml: 368
    rl_md: 523
    rl_yaml: 395
    total: 1850

desenvolvimento:
  backend:
    status: skeleton   # not_started | in_progress | done | skeleton
    contrato_validado: true
    contrato: CONTRATO-EXECUCAO-BACKEND
    versao_contrato: v1.0
    branch: null
  frontend:
    status: done
    branch: feature/RF034-frontend

testes:
  backend: not_run        # not_run | pass | fail
  frontend: not_run
  e2e: not_run
  seguranca: not_run

documentacao_testes:
  backend: False
  frontend: False
  e2e: False
  seguranca: False

testes_ti:
  backend: not_run
  frontend: not_run
  e2e: not_run
  seguranca: not_run

testes_qa:
  executado: False       # True quando QA executou
  aprovado: False        # True quando usuario aprovou

devops:
  work_item_id: 563
  test_plan_id: null
  last_sync: "2025-12-27 15:31:36"
  board_column: "Skeleton"

governanca:
  contrato_ativo: CONTRATO-EXECUCAO-TESTES
  ultimo_manifesto: null
