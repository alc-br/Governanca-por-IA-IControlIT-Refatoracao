uc:
  documentacao: "RF039"
  versao: "2.0"
  data: "2025-12-31"

exclusions:
  uc_items: []

historico:
  - versao: "1.0"
    data: "2025-12-18"
    autor: "Agência ALC - alc.dev.br"
    descricao: "Versão inicial (formato antigo)"
  - versao: "2.0"
    data: "2025-12-31"
    autor: "Agência ALC - alc.dev.br"
    descricao: "Reescrita completa seguindo template padrão, 16 UCs, 100% cobertura"

casos_de_uso:
  - id: "UC00"
    nome: "Listar Bilhetes"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RF-CRUD-02"
      uc_items:
        - id: "FP-UC00-001"
          title: "Usuário acessa a funcionalidade via menu"
          required: true
        - id: "FP-UC00-002"
          title: "Sistema valida permissão"
          required: true

  - id: "UC01"
    nome: "Importar Arquivo FTP"
    ator_principal: "sistema"
    tipo: "crud"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RF-CRUD-01"
        - "RN-BIL-039-01"
        - "RN-BIL-039-02"
        - "RN-BIL-039-03"
        - "RN-BIL-039-04"
        - "RN-BIL-039-05"
      uc_items:
        - id: "FP-UC01-001"
          title: "Sistema conecta ao servidor FTP/SFTP"
          required: true
        - id: "FP-UC01-007"
          title: "Sistema normaliza números para E.164"
          required: true

  - id: "UC02"
    nome: "Visualizar Detalhes do Bilhete"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RF-CRUD-03"
      uc_items:
        - id: "FP-UC02-001"
          title: "Usuário seleciona um bilhete"
          required: true

  - id: "UC03"
    nome: "Editar Bilhete"
    ator_principal: "usuario_autenticado"
    tipo: "crud"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RF-CRUD-04"
        - "RN-BIL-039-14"
      uc_items:
        - id: "FP-UC03-006"
          title: "Sistema registra auditoria"
          required: true

  - id: "UC04"
    nome: "Excluir Bilhete (Lógico)"
    ator_principal: "usuario_autenticado"
    tipo: "crud"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RF-CRUD-05"
        - "RN-BIL-039-14"
      uc_items:
        - id: "FP-UC04-003"
          title: "Sistema marca como excluído (soft delete)"
          required: true

  - id: "UC05"
    nome: "Processar OCR em PDF Digitalizado"
    ator_principal: "sistema"
    tipo: "acao"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RN-BIL-039-05"
        - "RN-BIL-039-15"
      uc_items:
        - id: "FP-UC05-003"
          title: "Job executa OCR"
          required: true

  - id: "UC06"
    nome: "Detectar Anomalias via ML"
    ator_principal: "sistema"
    tipo: "acao"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RN-BIL-039-06"
        - "RN-BIL-039-07"
      uc_items:
        - id: "FP-UC06-004"
          title: "Job aplica modelo ML (Isolation Forest)"
          required: true

  - id: "UC07"
    nome: "Comparar com Plano Contratado"
    ator_principal: "sistema"
    tipo: "acao"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RN-BIL-039-08"
        - "RN-BIL-039-09"
      uc_items:
        - id: "FP-UC07-004"
          title: "Sistema gera recomendação"
          required: true

  - id: "UC08"
    nome: "Alocar Custos por Centro de Custo"
    ator_principal: "sistema"
    tipo: "acao"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RN-BIL-039-10"
        - "RN-BIL-039-11"
      uc_items:
        - id: "FP-UC08-005"
          title: "Job aloca custo do bilhete ao centro de custo"
          required: true

  - id: "UC09"
    nome: "Gerar Relatório de Consumo"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RN-BIL-039-13"
      uc_items:
        - id: "FP-UC09-004"
          title: "Sistema gera gráficos"
          required: true

  - id: "UC10"
    nome: "Exportar para ERP"
    ator_principal: "sistema"
    tipo: "acao"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RN-BIL-039-12"
      uc_items:
        - id: "FP-UC10-004"
          title: "Sistema envia para API do ERP"
          required: true

  - id: "UC11"
    nome: "Consultar Histórico de Auditoria"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RN-BIL-039-14"
      uc_items:
        - id: "FP-UC11-003"
          title: "Sistema exibe timeline cronológica"
          required: true

  - id: "UC12"
    nome: "Dashboard de Bilhetes"
    ator_principal: "usuario_autenticado"
    tipo: "leitura"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RN-BIL-039-13"
      uc_items:
        - id: "FP-UC12-003"
          title: "Sistema gera gráficos"
          required: true

  - id: "UC13"
    nome: "Aprovar Glosa de Bilhete"
    ator_principal: "gestor_autenticado"
    tipo: "acao"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RN-BIL-039-14"
        - "RN-BIL-039-15"
      uc_items:
        - id: "FP-UC13-005"
          title: "Sistema registra auditoria"
          required: true

  - id: "UC14"
    nome: "Job: Processar Importações Pendentes"
    ator_principal: "sistema"
    tipo: "batch"
    impacta_dados: true
    covers:
      documentacao_items:
        - "RN-BIL-039-04"
      uc_items:
        - id: "FP-UC14-003"
          title: "Job processa cada arquivo"
          required: true

  - id: "UC15"
    nome: "Job: Enviar Alertas de Anomalias"
    ator_principal: "sistema"
    tipo: "batch"
    impacta_dados: false
    covers:
      documentacao_items:
        - "RN-BIL-039-07"
      uc_items:
        - id: "FP-UC15-003"
          title: "Job envia e-mail para gestores"
          required: true
