rf: RF041
fase: Fase-6-Ativos-Auditoria-Integracoes
epic: EPIC009-AST-Ativos-Inventario
titulo: Gestao de Estoque Aparelhos

documentacao:
  versao: "2.0"
  data_migracao: "2025-12-30"
  documentacao: True
  documentacao_yaml: True
  rl: True
  rl_yaml: True
  uc: True               # UC-RF041.md validado 100% em 2025-12-31
  uc_yaml: True          # UC-RF041.yaml criado em 2025-12-31 - VALIDADO 100%
  md: True
  wf: True
  arquivos_obrigatorios_presentes: True
  separacao_rf_rl_validada: True

skeleton:
  criado: True
  data_criacao: "2025-12-27"
  observacao: "Backend parcialmente implementado: 10% completo. Implementado: CRUD basico Estoque Aparelhos (5 endpoints - EstoqueAparelhos.cs). Faltam: Tipos de entrada (Compra vinculada NF, Devolucao vinculada Ativo RF028, Transferencia Recebida, Ajuste Manual com aprovacao gestor >10 unidades), Tipos de saida (Distribuicao cria Ativo RF028, Venda gera FAT, Descarte com laudo, Transferencia Enviada, Ajuste Manual), Transferencia entre almoxarifados (workflow 3 etapas: solicitacao com aprovacao gestor origem + saida status Em Transito + confirmacao recebimento destino + alerta automatico >15 dias + conferencia quantidade com justificativa divergencia), Consulta saldo e movimentacoes (por Almoxarifado/Categoria/Marca/Modelo/Consolidado + Historico imutavel com auditoria LGPD + Rastreamento IMEI/SN timeline completa + Exportacao Excel/PDF/CSV com registro auditoria + Valor total R$ baseado custo medio), Reserva de aparelhos (bloqueio saldo disponivel sem alterar fisico + prazo expiracao com cancelamento automatico + consumo automatico na distribuicao + validacao saldo bloqueado vs disponivel), Alertas estoque minimo/maximo (configuravel por categoria/almoxarifado + notificacao gestores quando atingir limites + dashboard com cards verde/amarelo/vermelho + sugestao reposicao baseada historico consumo)."

desenvolvimento:
  backend:
    status: skeleton   # not_started | in_progress | done | skeleton
    contrato_validado: true
    contrato: CONTRATO-EXECUCAO-BACKEND
    versao_contrato: v1.0
    branch: null
  frontend:
    status: done
    branch: null

testes:
  backend: not_run        # not_run | pass | fail
  frontend: not_run
  e2e: not_run
  seguranca: not_run

documentacao_testes:
  backend: False
  frontend: False
  e2e: False
  seguranca: False

testes_ti:
  backend: not_run
  frontend: not_run
  e2e: not_run
  seguranca: not_run

testes_qa:
  executado: False       # True quando QA executou
  aprovado: False        # True quando usuario aprovou

devops:
  work_item_id: 607
  test_plan_id: null
  last_sync: "2025-12-27 15:31:42"
  board_column: "Skeleton"

governanca:
  contrato_ativo: CONTRATO-EXECUCAO-BACKEND
  ultimo_manifesto: "2025-12-30 - Migração v1.0 → v2.0 completa (separação RF/RL)"

separacao_rf_rl:
  documentacao_limpo: True
  rl_completo: True
  itens_com_destino: True
  validador_executado: False

estatisticas:
  total_rns: 28
  total_funcionalidades: 7
  total_integracoes_obrigatorias: 8
  total_permissoes_rbac: 8
  itens_legado_rastreados: 13
  codigo_linhas_removidas: 280

  linhas_documentacao:
    documentacao_md: 800
    documentacao_yaml: 410
    rl_md: 350
    rl_yaml: 280
    uc_yaml: 1055
    total: 2895

  legado_tipos:
    codigo_sql_ddl: 5 tabelas
    sistema_aspx: 3 páginas
    stored_procedures: 4 procedures
    tabelas_legadas: 4 tabelas

validacoes:
  documentacao_uc_cobertura_total: True        # Todas as 28 regras cobertas pelos 5 UCs
  uc_md_consistente: True            # MD-RF041.md criado e consistente
  uc_wf_consistente: True            # WF-RF041.md criado e consistente
  documentacao_yaml_sincronizado: True         # RF041.yaml estruturado criado
  uc_yaml_sincronizado: True         # UC-RF041.yaml criado e validado 100%
  rl_yaml_sincronizado: True         # RL-RF041.yaml criado (migração v2.0)

observacoes:
  - "UC-RF041.yaml criado em 2025-12-31 com 5 UCs (UC00-UC04)"
  - "Validação automática executada: 100% de conformidade alcançada (0 gaps)"
  - "Gaps corrigidos: adicionados metadados Autor, Epic e Fase no UC-RF041.md"
  - "Gap CRÍTICO resolvido: UC-RF041.yaml criado seguindo template UC.yaml"
  - "Cobertura completa: todas as 28 regras de negócio (RN-AST-041-001 a RN-AST-041-028) cobertas pelos UCs"
  - "UC00 cobre: RN-AST-041-05, 16, 17, 18, 19 (Consultar saldo com exportação e rastreamento IMEI)"
  - "UC01 cobre: RN-AST-041-01, 02, 03, 04, 05 (Entrada: Compra vinculada NF, Devolução vinculada Ativo, Ajuste >10 aprovação)"
  - "UC02 cobre: RN-AST-041-05, 06, 07, 08, 09, 10 (Saída: Distribuição cria Ativo RF028, Descarte com laudo, rastreáveis IMEI/SN individual)"
  - "UC03 cobre: RN-AST-041-05, 06, 11, 12, 13, 14, 15 (Transferência workflow 3 etapas: saldo deduzido após envio, adicionado após recebimento, alerta >15 dias)"
  - "UC04 cobre: RN-AST-041-05, 20, 21, 22, 23, 24, 25, 26, 27, 28 (Reserva: bloqueio saldo, validade 30 dias, expiração automática, alertas estoque mínimo/máximo)"
