# CHECKLIST DOCUMENTO TC (CASOS DE TESTE)
# Validação completa do CONTRATO-GERACAO-DOCS-TC v2.0
# Este checklist deve ser preenchido AUTOMATICAMENTE pelo agente

meta:
  contrato: CONTRATO-GERACAO-DOCS-TC
  versao: "2.0"
  data_criacao: "2025-12-31"
  documentacao: RFXXX
  responsavel: agente-gerador-tc
  tentativa: 1

pre_requisitos:
  uc_md_existe: false          # UC-RFXXX.md existe
  uc_yaml_existe: false        # UC-RFXXX.yaml existe
  mt_yaml_existe: false        # MT-RFXXX.yaml existe
  template_tc_yaml: false      # docs/templates/TC.yaml encontrado
  status_yaml_existe: false    # STATUS.yaml presente
  uc_validado: false           # STATUS.yaml com documentacao.uc = true
  mt_criado: false             # STATUS.yaml com documentacao.mt = true
  mt_validado: false           # NOVO v2.0 - STATUS.yaml com validacao_mt.checklist_aprovado = true

arquivos_saida:
  tc_yaml_criado: false        # TC-RFXXX.yaml criado

estrutura_tc_yaml:
  segue_template: false
  possui_metadata: false
  possui_estrategia: false
  possui_conventions: false
  possui_test_cases: false
  possui_rastreabilidade: false
  possui_historico: false

ids_canonicos:  # NOVO v2.0
  formato_valido: false                  # Todos IDs no formato TC-RFXXX-[CAT]-NNN
  ids_unicos: false                      # Nenhum ID duplicado
  ids_sem_padrao: []                     # Lista de IDs inválidos
  ids_duplicados: []                     # Lista de IDs duplicados

categorizacao:
  possui_categoria_happy_path: false     # TC-HP-XXX
  possui_categoria_validacao: false      # TC-VAL-XXX
  possui_categoria_seguranca: false      # TC-SEC-XXX
  possui_categoria_edge_case: false      # TC-EDGE-XXX
  possui_categoria_auditoria: false      # TC-AUD-XXX
  possui_categoria_integracao: false     # TC-INT-XXX
  possui_categoria_e2e: false            # TC-E2E-XXX
  total_categorias_preenchidas: 0

rastreabilidade:
  todos_tc_possuem_uc_ref: false         # Campo uc_ref preenchido
  todos_tc_possuem_covers_uc_items: false  # Campo covers.uc_items preenchido
  todos_tc_possuem_origem: false         # Campo origem preenchido
  todos_tc_possuem_massa_teste: false    # Campo massa_teste.referencias preenchido
  todos_tc_possuem_categoria: false      # Campo categoria preenchido
  matriz_rastreabilidade_completa: false # Seção rastreabilidade 100%

campos_obrigatorios:
  todos_tc_possuem_descricao: false      # Campo descricao preenchido
  todos_tc_possuem_acao: false           # Campo acao preenchido
  todos_tc_possuem_resultado_esperado: false  # Campo resultado_esperado preenchido
  todos_tc_possuem_criterio_aprovacao: false  # Campo criterio_aprovacao preenchido

cobertura_funcional:
  uc_total: 0                            # Total de UCs
  uc_cobertos_por_tc: 0                  # UCs cobertos por TC
  uc_cobertura_100: false                # 100% dos UCs cobertos
  uc_items_total: 0                      # Total de uc_items (granulares)
  uc_items_cobertos: 0                   # uc_items cobertos por TC
  uc_items_cobertura_100: false          # 100% dos uc_items cobertos
  ucs_faltantes: []
  uc_items_faltantes: []
  ca_total: 0                            # NOVO v2.0 - Total de CAs nos UCs
  ca_cobertos: 0                         # NOVO v2.0 - CAs cobertos por TC
  ca_cobertura_100: false                # NOVO v2.0 - 100% dos CAs cobertos
  ca_faltantes: []                       # NOVO v2.0 - Lista de CAs sem TC

cobertura_massa_teste:
  mt_total: 0                            # Total de MTs disponíveis
  mt_referenciadas: 0                    # MTs referenciadas por TC
  mt_sem_tc: []                          # MTs órfãs (não referenciadas)
  sem_mt_orfa: false                     # Nenhuma MT órfã

prioridades:  # NOVO v2.0
  prioridades_validas_por_categoria: false  # Prioridades válidas conforme categoria
  happy_path_prioridade_critica: false      # HAPPY_PATH tem prioridade CRITICA
  seguranca_nunca_baixa: false              # SEGURANCA nunca tem BAIXA
  e2e_prioridade_critica: false             # E2E tem prioridade CRITICA
  prioridades_invalidas: []                 # Lista de TCs com prioridade inválida

e2e:  # NOVO v2.0
  e2e_obrigatorio: false                 # E2E é obrigatório para este RF?
  e2e_obrigatorio_atendido: false        # E2E obrigatório foi criado?
  razao_e2e_obrigatorio: ""              # CRUD | INTEGRACAO | UC_MULTIPLOS

validacao_estrutural:
  sem_tc_orfao: false                    # Nenhum TC sem rastreabilidade
  origem_rastreavel: false               # Todos TCs com origem clara
  covers_valido: false                   # Todos covers.uc_items existem no UC.yaml
  ciclo_completo_rastreavel: false       # NOVO v2.0 - RF → UC → MT → TC validado

status_yaml_atualizacao:
  documentacao_tc_true: false            # STATUS.yaml com documentacao.tc = true

# =============================================
# SELETORES E2E (NOVO - CRÍTICO)
# =============================================
# Adicionado após análise do RF006 para garantir rastreabilidade UC → TC → E2E

seletores_e2e:
  # Seletores em Passos
  todos_passos_com_seletor: false        # TODOS os passos possuem campo 'seletor'
  seletores_formato_data_test: false     # Seletores seguem formato [data-test='...']
  seletores_sincronizados_uc: false      # Seletores sincronizados com UC-RFXXX.yaml
  total_passos_com_seletor: 0            # Contagem de passos com seletor
  total_passos: 0                        # Contagem total de passos
  passos_sem_seletor: []                 # Lista de passos sem seletor

  # Código Playwright/E2E
  todos_passos_com_acao_e2e: false       # TODOS os passos possuem campo 'acao_e2e'
  acao_e2e_sintaxe_valida: false         # acao_e2e possui código Playwright válido
  total_passos_com_acao_e2e: 0           # Contagem de passos com acao_e2e
  passos_sem_acao_e2e: []                # Lista de passos sem acao_e2e

  # Validações E2E
  todas_validacoes_com_seletor: false    # TODAS as validações possuem campo 'seletor'
  todas_validacoes_com_acao_e2e: false   # TODAS as validações possuem campo 'acao_e2e'
  validacoes_tipo_especificado: false    # tipo (toBeVisible, toContainText, etc.) especificado
  total_validacoes_com_seletor: 0        # Contagem de validações com seletor
  total_validacoes: 0                    # Contagem total de validações
  validacoes_sem_seletor: []             # Lista de validações sem seletor

  # Sincronização com UC
  seletores_batem_com_uc: false          # Todos os seletores batem com UC.yaml data_test
  seletores_divergentes: []              # Lista de seletores divergentes de UC
  seletores_ausentes_uc: []              # Seletores que não existem no UC

  # Aliases
  aliases_documentados: false            # Aliases (se houver) documentados
  aliases_sincronizados_uc: false        # Aliases sincronizados com UC.yaml

# Validação de completude E2E
validacao_seletores_e2e:
  tc_pronto_para_automacao: false        # TC possui TODOS os seletores necessários para automação
  rastreabilidade_uc_tc_completa: false  # Rastreabilidade UC → TC 100% (seletores)
  codigo_playwright_completo: false      # Código Playwright completo (acao_e2e em todos os passos)

bloqueios:
  falha_pre_requisito: false
  falha_template: false
  falha_cobertura_uc: false
  falha_cobertura_uc_items: false
  falha_cobertura_mt: false
  falha_categorizacao: false
  falha_rastreabilidade: false
  falha_ids_canonicos: false             # NOVO v2.0
  falha_cobertura_ca: false              # NOVO v2.0
  falha_prioridades: false               # NOVO v2.0
  falha_e2e_obrigatorio: false           # NOVO v2.0
  falha_ciclo_completo: false            # NOVO v2.0
  falha_seletores_e2e: false             # NOVO - Seletores E2E incompletos ou inconsistentes (BLOQUEANTE)

resultado_final:
  aprovado: false
  data_validacao: null
  tentativas: 0
  observacoes: ""
  proxima_acao: ""  # "aprovar" | "corrigir_e_revalidar" | "bloqueado"
  # REGRA: aprovado = true SOMENTE se TODOS os bloqueios forem false
  # E validacao_seletores_e2e.tc_pronto_para_automacao = true
