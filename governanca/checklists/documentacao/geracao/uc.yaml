# CHECKLIST GERAÇÃO UC (CASOS DE USO)
# Validação completa do CONTRATO-GERACAO-DOCS-UC
# Este checklist deve ser preenchido AUTOMATICAMENTE pelo agente
#
# NOTA IMPORTANTE: Este checklist repete intencionalmente algumas regras do contrato
# para garantir auditoria cruzada. Isso é uma redundância SAUDÁVEL e proposital.
# Evita que otimizações futuras removam validações críticas.

meta:
  contrato: CONTRATO-GERACAO-DOCS-UC
  versao: "1.0"
  data_criacao: "2025-12-31"
  documentacao: RFXXX
  tipo_rf: "crud"  # crud | leitura | integracao | batch (define se minimo 5 UCs se aplica)
  responsavel: agente-gerador-uc

pre_requisitos:
  pasta_rf_existe: false          # Pasta docs/documentacao/[Fase]/[EPIC]/RFXXX/ existe
  documentacao_md_existe: false             # RFXXX.md existe e aprovado
  documentacao_yaml_existe: false           # RFXXX.yaml existe e sincronizado
  template_uc_md: false           # docs/templates/UC.md encontrado
  template_uc_yaml: false         # docs/templates/UC.yaml encontrado
  status_yaml_existe: false       # STATUS.yaml presente
  documentacao_validado: false              # STATUS.yaml com documentacao.rf = true

leitura_rf:
  documentacao_md_lido: false               # RFXXX.md lido completamente
  documentacao_yaml_lido: false             # RFXXX.yaml lido completamente
  funcionalidades_mapeadas: false # Funcionalidades extraídas
  regras_negocio_identificadas: false # RN-RFXXX-NNN identificadas
  entidades_identificadas: false  # Entidades principais mapeadas

arquivos_saida:
  uc_md_criado: false             # UC-RFXXX.md criado
  uc_yaml_criado: false           # UC-RFXXX.yaml criado
  status_yaml_atualizado: false   # STATUS.yaml atualizado

estrutura_uc_md:
  segue_template: false
  possui_secao_objetivo: false
  possui_sumario_ucs: false
  possui_padroes_gerais: false
  possui_uc00_listar: false
  possui_uc01_criar: false
  possui_uc02_visualizar: false
  possui_uc03_editar: false
  possui_uc04_excluir: false
  todos_uc_possuem_objetivo: false
  todos_uc_possuem_precondicoes: false
  todos_uc_possuem_poscondicoes: false
  todos_uc_possuem_fluxo_principal: false
  todos_uc_possuem_fluxos_alternativos: false
  todos_uc_possuem_fluxos_excecao: false
  todos_uc_possuem_regras_negocio: false

estrutura_uc_yaml:
  segue_template: false
  possui_campo_rf: false
  possui_casos_de_uso: false
  possui_5_ucs_minimo: false
  todos_uc_possuem_covers_rf_items: false
  todos_uc_possuem_uc_items_granulares: false
  todos_uc_possuem_precondicoes: false
  todos_uc_possuem_fluxo_principal: false
  todos_uc_possuem_gatilho: false
  todos_uc_possuem_resultado_final: false
  ids_unicos: false

cobertura_funcional:
  documentacao_funcionalidades_total: 0
  documentacao_funcionalidades_cobertas: 0
  documentacao_cobertura_100_percent: false
  funcionalidades_faltantes: []

validacao_automatica:
  validador_executado: false
  exit_code_zero: false
  data_execucao: null
  tentativas_correcao: 0

sincronizacao:
  uc_md_yaml_sincronizados: false

status_yaml_atualizacao:
  documentacao_uc_true: false
  validacao_rf_uc_cobertura_total_true: false
  validacao_uc_yaml_sincronizado_true: false

regras_qualidade:
  uc_cobre_100_rf: false
  uc_minimo_5_ucs: false
  uc_todos_com_fluxos_completos: false
  uc_regras_rastreadas_rf: false

# =============================================
# ESPECIFICAÇÕES DE TESTE (NOVO - CRÍTICO)
# =============================================
# Adicionado após análise do RF006 para garantir alinhamento com testes E2E

especificacoes_teste:
  # Navegação
  possui_secao_navegacao: false            # UC possui seção 'navegacao'
  navegacao_url_completa: false            # navegacao.url_completa especificada
  navegacao_referencia_routing: false      # navegacao.referencia_routing especificada

  # Credenciais
  possui_secao_credenciais: false          # UC possui seção 'credenciais'
  credenciais_referencia_seeds: false      # credenciais.referencia_seeds especificada
  credenciais_perfil_necessario: false     # credenciais.perfil_necessario especificado

  # Data-test em passos
  todos_passos_com_data_test: false        # TODOS os passos interativos possuem elemento.data_test
  passos_nomenclatura_consistente: false   # Nomenclatura segue padrão RFXXX-[acao]-[alvo]
  total_passos_com_data_test: 0            # Contagem de passos com data_test
  total_passos_interativos: 0              # Contagem de passos interativos

  # Estados UI
  possui_secao_estados_ui: false           # UC possui seção 'estados_ui'
  estado_loading_completo: false           # estados_ui.loading com data_test
  estado_vazio_completo: false             # estados_ui.vazio com data_test e texto_esperado
  estado_erro_completo: false              # estados_ui.erro com data_test e texto_esperado

  # Tabela (se aplicável)
  possui_listagem: false                   # UC menciona listagem/tabela
  possui_secao_tabela: false               # UC possui seção 'tabela' (obrigatório se possui_listagem = true)
  tabela_data_test_container: false        # tabela.data_test_container especificado
  tabela_data_test_row: false              # tabela.data_test_row especificado
  tabela_colunas_com_data_test: false      # Todas as colunas possuem data_test
  tabela_acoes_com_data_test: false        # Todas as ações de linha possuem data_test

  # Formulário (se aplicável)
  possui_formulario: false                 # UC menciona formulário/criar/editar
  possui_secao_formulario: false           # UC possui seção 'formulario' (obrigatório se possui_formulario = true)
  formulario_data_test_form: false         # formulario.data_test_form especificado
  formulario_campos_com_data_test: false   # Todos os campos possuem data_test
  formulario_validacoes_com_data_test: false  # Validações possuem data_test_erro
  formulario_botoes_com_data_test: false   # Botões possuem data_test

  # Performance e Timeouts
  possui_secao_performance: false          # UC possui seção 'performance'
  performance_carregamento_especificado: false  # performance.tempo_carregamento_maximo
  performance_crud_especificado: false     # performance.tempo_operacao_crud
  possui_secao_timeouts_e2e: false         # UC possui seção 'timeouts_e2e'
  timeouts_navegacao: false                # timeouts_e2e.navegacao
  timeouts_loading_spinner: false          # timeouts_e2e.loading_spinner
  timeouts_dialog: false                   # timeouts_e2e.dialog
  timeouts_operacao_crud: false            # timeouts_e2e.operacao_crud

# Validação de completude
validacao_especificacoes_teste:
  todas_secoes_obrigatorias_presentes: false  # navegacao, credenciais, estados_ui, performance, timeouts_e2e
  data_test_100_percent: false             # 100% dos passos/elementos possuem data_test
  nomenclatura_100_percent: false          # 100% dos data_test seguem padrão
  pronto_para_implementacao_e2e: false     # UC está 100% pronto para testes E2E

# COMMIT: Responsabilidade do usuário (não automatizado)

bloqueios:
  falha_pre_requisito: false
  falha_leitura_rf: false
  falha_template: false
  falha_cobertura: false
  falha_validacao: false
  falha_sincronizacao: false
  falha_especificacoes_teste: false  # NOVO - Especificações de teste incompletas (BLOQUEANTE)

# RESULTADO FINAL
# REGRA: aprovado = true SOMENTE se TODOS os bloqueios forem false
# E TODAS as regras de qualidade forem true
# E validacao_especificacoes_teste.pronto_para_implementacao_e2e = true
resultado_final:
  aprovado: false  # Derivado de: bloqueios (all false) AND regras_qualidade (all true) AND especificacoes_teste completas
  observacoes: ""
  proximo_passo: "CONTRATO-GERACAO-DOCS-WF"
