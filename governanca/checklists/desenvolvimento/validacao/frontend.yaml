# CHECKLIST: Validacao de Frontend
# Versao: 1.0
# Data: 2026-01-01
# Aplicavel a: Frontend implementado que precisa ser validado

validacao_inicial:
  descricao: "Validar que sistema nao esta quebrado ANTES de validacao"
  itens:
    - item: "Build do backend executa sem erros"
      obrigatorio: true
      tipo: "tecnico"
      evidencia: "Log de build sem erros"
      bloqueador: true
      bloqueio_msg: "Backend nao builda - BLOQUEIA validacao"

    - item: "Build do frontend executa sem erros"
      obrigatorio: true
      tipo: "tecnico"
      evidencia: "Log de build sem erros"
      bloqueador: true
      bloqueio_msg: "Frontend nao builda - BLOQUEIA validacao"

    - item: "Se qualquer build quebrar: PARAR e REPORTAR gap critico"
      obrigatorio: true
      tipo: "bloqueador"

preparacao:
  descricao: "Preparar ambiente e analisar documentacao"
  itens:
    - item: "Branch atualizado com dev"
      obrigatorio: true
      tipo: "git"

    - item: "Branch dedicado criado (test/RFXXX-frontend-validation)"
      obrigatorio: true
      tipo: "git"

    - item: "Requisito Funcional analisado completamente"
      obrigatorio: true
      tipo: "documentacao"

    - item: "Casos de Uso analisados completamente"
      obrigatorio: true
      tipo: "documentacao"

    - item: "Wireframes analisados completamente"
      obrigatorio: true
      tipo: "documentacao"

    - item: "Todos os fluxos identificados (Principal, FA-XX, FE-XX)"
      obrigatorio: true
      tipo: "analise"

    - item: "Estados obrigatorios identificados (Loading/Vazio/Erro/Dados)"
      obrigatorio: true
      tipo: "analise"

    - item: "Requisitos de responsividade identificados"
      obrigatorio: true
      tipo: "analise"

auditoria_frontend:
  descricao: "Auditar frontend implementado"
  itens:
    - item: "Componentes criados identificados"
      obrigatorio: true
      tipo: "analise"

    - item: "Rotas configuradas listadas"
      obrigatorio: true
      tipo: "analise"

    - item: "Menu validado (item existe e navegavel)"
      obrigatorio: true
      tipo: "navegacao"

    - item: "i18n validado (pt-BR, en-US, es-ES)"
      obrigatorio: true
      tipo: "integracao"

    - item: "Integracao de diagnosticos validada"
      obrigatorio: true
      tipo: "observabilidade"

    - item: "Guards de permissao validados"
      obrigatorio: true
      tipo: "seguranca"

# =============================================
# DATA-TEST ATTRIBUTES (NOVO - CRÍTICO)
# =============================================
# Adicionado após análise do RF006 para garantir rastreabilidade completa
# UC → Frontend → Testes E2E (eliminando problema de seletores ausentes)

data_test_attributes:
  descricao: "Validar data-test attributes para testes E2E (BLOQUEANTE)"
  itens:
    # Botões de Ação
    - item: "Botões de ação possuem data-test (criar, editar, excluir, salvar, cancelar)"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Botões sem data-test - BLOQUEIA automação E2E"
      evidencia: "Auditoria: npm run audit-data-test RFXXX"

    - item: "Nomenclatura de botões segue padrão RFXXX-[acao]-[alvo]"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Nomenclatura inconsistente - BLOQUEIA automação E2E"

    # Campos de Formulário
    - item: "Campos de formulário possuem data-test (inputs, selects, textareas)"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Campos sem data-test - BLOQUEIA automação E2E"

    - item: "Nomenclatura de campos segue padrão RFXXX-input-[nome]"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Nomenclatura de campos inconsistente - BLOQUEIA automação E2E"

    # Mensagens de Erro
    - item: "Mensagens de erro de validação possuem data-test-erro"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Mensagens de erro sem data-test - BLOQUEIA testes de validação E2E"

    - item: "Nomenclatura de erros segue padrão RFXXX-input-[nome]-error"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Nomenclatura de erros inconsistente - BLOQUEIA automação E2E"

    # Tabelas/Listas
    - item: "Tabela possui data-test no container ([entidade]-list)"
      obrigatorio: true
      tipo: "data-test"
      condicional: "Se UC possui listagem"
      bloqueador: true
      bloqueio_msg: "Container de tabela sem data-test - BLOQUEIA automação E2E"

    - item: "Linhas da tabela possuem data-test ([entidade]-row)"
      obrigatorio: true
      tipo: "data-test"
      condicional: "Se UC possui listagem"
      bloqueador: true
      bloqueio_msg: "Linhas de tabela sem data-test - BLOQUEIA automação E2E"

    - item: "Ações de linha possuem data-test (editar, excluir)"
      obrigatorio: true
      tipo: "data-test"
      condicional: "Se UC possui listagem"
      bloqueador: true
      bloqueio_msg: "Ações de linha sem data-test - BLOQUEIA automação E2E"

    # Estados de UI
    - item: "Loading spinner possui data-test='loading-spinner'"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Loading spinner sem data-test - BLOQUEIA validação de estado"

    - item: "Empty state possui data-test='empty-state'"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Empty state sem data-test - BLOQUEIA validação de estado"

    - item: "Error message possui data-test='error-message'"
      obrigatorio: true
      tipo: "data-test"
      bloqueador: true
      bloqueio_msg: "Error message sem data-test - BLOQUEIA validação de estado"

    # Dialogs/Modais
    - item: "Dialogs possuem data-test (confirmação, formulários)"
      obrigatorio: true
      tipo: "data-test"
      condicional: "Se UC possui dialogs"
      bloqueador: true
      bloqueio_msg: "Dialogs sem data-test - BLOQUEIA automação E2E"

    # Sincronização com UC
    - item: "Data-test batem com UC-RFXXX.yaml (passos[].elemento.data_test)"
      obrigatorio: true
      tipo: "sincronizacao"
      bloqueador: true
      bloqueio_msg: "Data-test divergentes de UC - BLOQUEIA automação E2E"
      evidencia: "Comparar UC.yaml com HTML"

    - item: "Data-test de estados_ui batem com UC-RFXXX.yaml"
      obrigatorio: true
      tipo: "sincronizacao"
      bloqueador: true
      bloqueio_msg: "Estados UI divergentes de UC - BLOQUEIA automação E2E"

    - item: "Data-test de tabela batem com UC-RFXXX.yaml (se aplicável)"
      obrigatorio: true
      tipo: "sincronizacao"
      condicional: "Se UC possui seção tabela"
      bloqueador: true
      bloqueio_msg: "Tabela divergente de UC - BLOQUEIA automação E2E"

    - item: "Data-test de formulário batem com UC-RFXXX.yaml (se aplicável)"
      obrigatorio: true
      tipo: "sincronizacao"
      condicional: "Se UC possui seção formulario"
      bloqueador: true
      bloqueio_msg: "Formulário divergente de UC - BLOQUEIA automação E2E"

    # Auditoria Automática
    - item: "Executar auditoria automática: npm run audit-data-test RFXXX"
      obrigatorio: true
      tipo: "validacao"
      bloqueador: true
      bloqueio_msg: "Auditoria não executada - BLOQUEIA validação"
      evidencia: "Log da auditoria"

    - item: "Auditoria retorna exit code 0 (PASS)"
      obrigatorio: true
      tipo: "validacao"
      bloqueador: true
      bloqueio_msg: "Auditoria FALHOU (exit code 1) - BLOQUEIA validação"
      evidencia: "Exit code 0"

    - item: "Auditoria reporta 0 data-test ausentes"
      obrigatorio: true
      tipo: "validacao"
      bloqueador: true
      bloqueio_msg: "Data-test ausentes detectados - BLOQUEIA validação"

    - item: "Auditoria reporta 0 inconsistências de nomenclatura"
      obrigatorio: true
      tipo: "validacao"
      bloqueador: true
      bloqueio_msg: "Nomenclatura inconsistente detectada - BLOQUEIA validação"

    # Cobertura
    - item: "Calcular cobertura: (data-test implementados / data-test esperados) * 100"
      obrigatorio: true
      tipo: "metricas"
      bloqueador: true
      evidencia: "Relatório de cobertura"

    - item: "Cobertura data-test = 100%"
      obrigatorio: true
      tipo: "criterio_aprovacao"
      bloqueador: true
      bloqueio_msg: "Cobertura < 100% - BLOQUEIA validação"

    # Documentação
    - item: "Total de data-test implementados documentado"
      obrigatorio: true
      tipo: "metricas"
      evidencia: "STATUS.yaml ou relatório"

    - item: "Lista de data-test ausentes documentada (se houver)"
      obrigatorio: true
      tipo: "rastreabilidade"
      condicional: "Se cobertura < 100%"

    - item: "Lista de inconsistências documentada (se houver)"
      obrigatorio: true
      tipo: "rastreabilidade"
      condicional: "Se nomenclatura inconsistente"

matriz_cobertura_uc:
  descricao: "Criar matriz de cobertura UC → Testes E2E"
  itens:
    - item: "Arquivo coverage.matrix.md criado"
      obrigatorio: true
      tipo: "documentacao"
      evidencia: "tests/e2e/RFXXX/coverage.matrix.md"

    - item: "Para cada UC: Fluxo Principal mapeado"
      obrigatorio: true
      tipo: "rastreabilidade"

    - item: "Para cada UC: Fluxos Alternativos (FA-XX) mapeados"
      obrigatorio: true
      tipo: "rastreabilidade"

    - item: "Para cada UC: Fluxos de Excecao (FE-XX) mapeados"
      obrigatorio: true
      tipo: "rastreabilidade"

    - item: "Para cada UC: Regras de Negocio (RN-UC-XXX) mapeadas"
      obrigatorio: true
      tipo: "rastreabilidade"

    - item: "Cenarios E2E totalizados"
      obrigatorio: true
      tipo: "metricas"

testes_e2e:
  descricao: "Implementar testes E2E Playwright (100% cobertura UC)"
  itens:
    - item: "TC-E2E-001: Login + Acesso via menu"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-002: Carregamento listagem (estado Dados)"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-003: Estado Loading (spinner visivel)"
      obrigatorio: true
      tipo: "teste"
      bloqueador: true

    - item: "TC-E2E-004: Estado Vazio (mensagem + ilustracao)"
      obrigatorio: true
      tipo: "teste"
      bloqueador: true

    - item: "TC-E2E-005: Estado Erro (mensagem + retry)"
      obrigatorio: true
      tipo: "teste"
      bloqueador: true

    - item: "TC-E2E-006: Criar registro (Fluxo Principal)"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-007: Editar registro"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-008: Excluir registro (com confirmacao)"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-009: Filtros funcionais"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-010: Paginacao funcional"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-011: Ordenacao funcional"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-012: Responsividade (desktop/tablet/mobile)"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-013: Traducoes (pt-BR/en-US/es-ES)"
      obrigatorio: true
      tipo: "teste"
      bloqueador: true

    - item: "TC-E2E-014: Permissoes (401/403 tratados)"
      obrigatorio: true
      tipo: "teste"

    - item: "Para cada FA-XX: Teste E2E implementado"
      obrigatorio: true
      tipo: "teste"

    - item: "Para cada FE-XX: Teste E2E implementado"
      obrigatorio: true
      tipo: "teste"

    - item: "TC-E2E-FINAL: Criar registro evidencia (NAO excluir)"
      obrigatorio: true
      tipo: "evidencia"

conformidade_visual:
  descricao: "Validar conformidade visual (checklist manual)"
  itens:
    - item: "Layout segue padrao aprovado"
      obrigatorio: true
      tipo: "visual"
      bloqueador: true

    - item: "Header com titulo + botao criar"
      obrigatorio: true
      tipo: "visual"

    - item: "Tabela com ordenacao e paginacao"
      obrigatorio: true
      tipo: "visual"

    - item: "Acoes por linha (editar, excluir)"
      obrigatorio: true
      tipo: "visual"

    - item: "Estado Loading: Spinner centralizado"
      obrigatorio: true
      tipo: "visual"
      bloqueador: true

    - item: "Estado Vazio: Mensagem + ilustracao"
      obrigatorio: true
      tipo: "visual"
      bloqueador: true

    - item: "Estado Erro: Mensagem + botao retry"
      obrigatorio: true
      tipo: "visual"
      bloqueador: true

    - item: "Estado Dados: Tabela populada"
      obrigatorio: true
      tipo: "visual"

    - item: "Componentes do tema reutilizados corretamente"
      obrigatorio: true
      tipo: "arquitetura"

    - item: "Responsividade funcional (desktop/tablet/mobile)"
      obrigatorio: true
      tipo: "visual"

    - item: "Icones e cores consistentes com tema"
      obrigatorio: true
      tipo: "visual"

    - item: "Spacing e alignment seguem padrao"
      obrigatorio: true
      tipo: "visual"

    - item: "Acessibilidade basica (labels, ARIA)"
      obrigatorio: true
      tipo: "acessibilidade"

    - item: "Performance aceitavel (< 3s carregamento)"
      obrigatorio: true
      tipo: "performance"

integracao:
  descricao: "Validar integracao completa"
  itens:
    - item: "i18n: pt-BR completo"
      obrigatorio: true
      tipo: "i18n"
      bloqueador: true

    - item: "i18n: en-US completo"
      obrigatorio: true
      tipo: "i18n"
      bloqueador: true

    - item: "i18n: es-ES completo"
      obrigatorio: true
      tipo: "i18n"
      bloqueador: true

    - item: "DiagnosticsLogger: eventos logados"
      obrigatorio: true
      tipo: "observabilidade"

    - item: "Guards: permissoes verificadas"
      obrigatorio: true
      tipo: "seguranca"

    - item: "Backend: DTOs alinhados"
      obrigatorio: true
      tipo: "integracao"

    - item: "Backend: Erros estruturados tratados"
      obrigatorio: true
      tipo: "integracao"

    - item: "Seeds: dados minimos disponiveis"
      obrigatorio: true
      tipo: "dados"

    - item: "Central de Modulos: registrado"
      obrigatorio: true
      tipo: "configuracao"

execucao_testes:
  descricao: "Executar testes E2E e coletar evidencias"
  itens:
    - item: "Testes E2E executados (npm run e2e)"
      obrigatorio: true
      tipo: "execucao"
      evidencia: "Log de execucao de testes"

    - item: "Evidencias de sucesso coletadas"
      obrigatorio: true
      tipo: "evidencia"
      evidencia: "Screenshots de testes passando"

    - item: "Screenshots de estados coletados"
      obrigatorio: true
      tipo: "evidencia"
      evidencia: "Loading, Vazio, Erro, Dados"

    - item: "Falhas identificadas (se houver)"
      obrigatorio: true
      tipo: "analise"

    - item: "Taxa de cobertura UC registrada"
      obrigatorio: true
      tipo: "metricas"

analise_resultados:
  descricao: "Analisar resultados e gerar relatorio"
  itens:
    - item: "UC coberto 100%: APROVADO"
      obrigatorio: true
      tipo: "criterio_aprovacao"
      bloqueador: true
      bloqueio_msg: "UC nao coberto 100% - REPROVADO"

    - item: "Estados obrigatorios implementados: APROVADO"
      obrigatorio: true
      tipo: "criterio_aprovacao"
      bloqueador: true
      bloqueio_msg: "Estados obrigatorios ausentes - REPROVADO"

    - item: "i18n completo: APROVADO"
      obrigatorio: true
      tipo: "criterio_aprovacao"
      bloqueador: true
      bloqueio_msg: "i18n incompleto - REPROVADO"

    - item: "Relatorio de conformidade gerado"
      obrigatorio: true
      tipo: "documentacao"
      evidencia: ".temp_ia/CONFORMIDADE-VISUAL-RFXXX.md"

relatorio_final:
  descricao: "Relatorio final obrigatorio"
  itens:
    - item: "Total de fluxos UC documentado"
      obrigatorio: true
      tipo: "metricas"

    - item: "Total de testes E2E documentado"
      obrigatorio: true
      tipo: "metricas"

    - item: "Cobertura UC calculada (XX%)"
      obrigatorio: true
      tipo: "metricas"

    - item: "Estados obrigatorios: Status (OK/FALTANDO)"
      obrigatorio: true
      tipo: "status"

    - item: "i18n completo: Status (OK/FALTANDO)"
      obrigatorio: true
      tipo: "status"

    - item: "Layout aprovado: Status (PRESERVADO/VIOLADO)"
      obrigatorio: true
      tipo: "status"

    - item: "Status final: APROVADO / REPROVADO"
      obrigatorio: true
      tipo: "conclusao"

finalizacao:
  descricao: "Finalizacao Git e DevOps"
  itens:
    - item: "STATUS.yaml atualizado (validacao.frontend = passed/failed)"
      obrigatorio: true
      tipo: "rastreabilidade"

    - item: "validacao.cobertura_uc registrada"
      obrigatorio: true
      tipo: "metricas"

    - item: "validacao.testes_e2e_executados registrado"
      obrigatorio: true
      tipo: "metricas"

    - item: "validacao.bloqueios listados (se houver gaps criticos)"
      obrigatorio: true
      tipo: "rastreabilidade"

    - item: "Commit realizado com mensagem clara"
      obrigatorio: true
      tipo: "git"

    - item: "Merge em dev executado"
      obrigatorio: true
      tipo: "git"

    - item: "Branch de test deletado"
      obrigatorio: true
      tipo: "git"

    - item: "DevOps sincronizado (Board atualizado)"
      obrigatorio: true
      tipo: "devops"

    - item: "Sistema buildando e rodando ao final"
      obrigatorio: true
      tipo: "autonomia"

autonomia:
  descricao: "Autonomia total do agente (regras absolutas)"
  regras:
    - regra: "Agente DEVE buildar backend autonomamente"
      proibido: "Perguntar ao usuario se pode buildar"

    - regra: "Agente DEVE buildar frontend autonomamente"
      proibido: "Perguntar ao usuario se pode buildar"

    - regra: "Agente DEVE rodar backend autonomamente"
      proibido: "Esperar que usuario execute comandos"

    - regra: "Agente DEVE rodar frontend autonomamente"
      proibido: "Esperar que usuario execute comandos"

    - regra: "Agente DEVE executar testes E2E autonomamente"
      proibido: "Esperar que usuario execute testes"

    - regra: "Agente DEVE gerar relatorios autonomamente"
      proibido: "Entregar validacao sem relatorios"

    - regra: "Agente DEVE deixar sistema funcional ao final"
      proibido: "Entregar sistema quebrado"

bloqueios:
  descricao: "Situacoes que bloqueiam aprovacao (REPROVADO)"
  itens:
    - situacao: "Backend nao builda"
      acao: "BLOQUEAR validacao - Gap critico"
      severidade: "CRITICO"

    - situacao: "Frontend nao builda"
      acao: "BLOQUEAR validacao - Gap critico"
      severidade: "CRITICO"

    - situacao: "Cobertura UC < 100%"
      acao: "REPROVAR - Gap critico"
      severidade: "CRITICO"

    - situacao: "Algum estado obrigatorio ausente"
      acao: "REPROVAR - Gap critico"
      severidade: "CRITICO"

    - situacao: "i18n incompleto (pt-BR, en-US ou es-ES)"
      acao: "REPROVAR - Gap critico"
      severidade: "CRITICO"

    - situacao: "Testes E2E com falhas"
      acao: "REPROVAR - Gap critico"
      severidade: "CRITICO"

    - situacao: "Layout aprovado nao preservado"
      acao: "REPROVAR - Gap critico"
      severidade: "CRITICO"

    - situacao: "Permissoes nao configuradas (401/403 nao tratados)"
      acao: "REPROVAR - Gap critico"
      severidade: "CRITICO"

    - situacao: "Data-test attributes ausentes ou inconsistentes"
      acao: "REPROVAR - Gap critico (BLOQUEIA automação E2E)"
      severidade: "CRITICO"
      detalhes: "Auditoria npm run audit-data-test RFXXX deve retornar exit code 0"

    - situacao: "Cobertura data-test < 100%"
      acao: "REPROVAR - Gap critico (BLOQUEIA automação E2E)"
      severidade: "CRITICO"

    - situacao: "Data-test divergentes de UC-RFXXX.yaml"
      acao: "REPROVAR - Gap critico (BLOQUEIA rastreabilidade UC → Frontend → E2E)"
      severidade: "CRITICO"

    - situacao: "Responsividade nao funcional"
      acao: "REPROVAR - Gap importante"
      severidade: "IMPORTANTE"

autoridade:
  descricao: "Autoridade do agente validador"
  regras:
    - item: "Agente pode BLOQUEAR merges se gaps criticos"
      autoridade: "BLOQUEADORA"

    - item: "Nenhum contrato posterior pode prosseguir sem aprovacao"
      autoridade: "BLOQUEADORA"

    - item: "Nenhum merge e valido sem validacao"
      autoridade: "BLOQUEADORA"

    - item: "Nenhum status COMPLETED sem assinatura no EXECUTION-MANIFEST"
      autoridade: "BLOQUEADORA"

    - item: "Reprovacao invalida automaticamente execucao corrente"
      autoridade: "BLOQUEADORA"
