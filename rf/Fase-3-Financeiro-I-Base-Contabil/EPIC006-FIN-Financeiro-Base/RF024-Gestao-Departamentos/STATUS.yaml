rf: RF024
fase: Fase-3-Financeiro-I-Base-Contabil
epic: EPIC006-FIN-Financeiro-Base
titulo: Gestao Departamentos


skeleton:
  criado: True
  data_criacao: "2025-12-27"
  observacao: "Backend parcialmente implementado: 25% completo. Implementado: CRUD Departamentos (6 endpoints - Departamentos.cs) com GetDepartamentoHierarchy basico. Faltam: Validacao referencias circulares hierarquia (algoritmo HashSet), sincronizacao Azure AD (job Hangfire diario + Microsoft Graph API), organograma visual D3.js interativo (zoom/pan/collapse/export), movimentacoes interdepartamentais com workflow aprovacao multinivel (Status_Aprovacao, aprovador origem/destino/RH), estrutura matricial dotted-line (tabela Usuario_Departamento validacao soma alocacoes <=100%), triggers automaticos (atualizar Qtd_Colaboradores, validar percentual alocacao, caminho hierarquico), dashboard headcount SignalR tempo real, workforce analytics (turnover, span of control 5-10 ideal), metas OKRs trimestrais, relatorios consumo por nivel hierarquia."
documentacao:
  versao: "2.0"
  data_migracao: "2025-12-30"
  rf: True
  rf_yaml: True
  rl: True
  rl_yaml: True
  uc: True
  uc_yaml: True
  md: True
  wf: True
  arquivos_obrigatorios_presentes: True
  separacao_rf_rl_validada: True

validacoes:
  rf_uc_cobertura_total: True      # validator-docs.py UC passou com 100% conformidade
  uc_md_consistente: True           # UC-RF024.md estruturado conforme template
  uc_yaml_sincronizado: True        # UC-RF024.yaml sincronizado com UC-RF024.md
  rf_yaml_sincronizado: True        # RF024.yaml estruturado e validado
  uc_yaml_estruturado: True         # UC-RF024.yaml criado com estrutura canônica

desenvolvimento:
  backend:
    status: skeleton   # not_started | in_progress | done | skeleton
    contrato_validado: true
    contrato: CONTRATO-EXECUCAO-BACKEND
    versao_contrato: v1.0
    branch: null
  frontend:
    status: done
    branch: feature/RF024-frontend

testes:
  backend: not_run        # not_run | pass | fail
  frontend: not_run
  e2e: not_run
  seguranca: not_run

documentacao_testes:
  backend: True
  frontend: True
  e2e: True
  seguranca: False

testes_ti:
  backend: not_run
  frontend: not_run
  e2e: not_run
  seguranca: not_run

testes_qa:
  executado: False       # True quando QA executou
  aprovado: False        # True quando usuario aprovou

devops:
  work_item_id: 554
  test_plan_id: null
  last_sync: "2025-12-27 15:31:29"
  board_column: "Skeleton"

governanca:
  contrato_ativo: CONTRATO-EXECUCAO-TESTES
  ultimo_manifesto: null

# VALIDAÇÃO SEPARAÇÃO RF/RL (OBRIGATÓRIA v2.0)
separacao_rf_rl:
  rf_limpo: True                # RF não contém conteúdo legado
  rl_completo: True             # RL contém TODA memória legado
  itens_com_destino: True       # 100% itens RL têm campo destino
  validador_executado: True     # validator-rl.py passou (warnings aceitáveis sobre tipo 'tabela')

# ESTATÍSTICAS MIGRAÇÃO
estatisticas:
  total_rns: 15                 # Regras de negócio no RF024.md
  total_endpoints_api: 14       # Endpoints REST documentados
  total_permissoes_rbac: 8      # Permissões RBAC definidas
  total_integracoes_obrigatorias: 4  # i18n, auditoria, RBAC, Azure AD
  itens_legado_rastreados: 15   # Itens em RL-RF024.yaml
  bancos_legados_mapeados: 3    # IControlIT_Cliente01, 02, 03
  problemas_legado_identificados: 6  # Problemas documentados

  linhas_documentacao:
    rf_md: 469
    rf_yaml: 680
    rl_md: 493
    rl_yaml: 420
    total: 2062
