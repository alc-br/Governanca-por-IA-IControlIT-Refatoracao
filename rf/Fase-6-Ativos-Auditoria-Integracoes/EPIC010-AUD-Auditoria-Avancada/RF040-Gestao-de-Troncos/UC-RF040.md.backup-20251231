# Casos de Uso - RF040 - Gestão de Troncos Telefônicos

**Versão:** 1.0
**Data:** 2025-12-18
**RF Relacionado:** [RF040 - Gestão de Troncos Telefônicos](./RF040.md)

## Índice de Casos de Uso

| UC | Nome | Complexidade |
|----|------|--------------|
| UC00 | Listar Troncos | Média |
| UC01 | Criar Tronco | Média |
| UC02 | Visualizar Tronco | Baixa |
| UC03 | Editar Tronco | Média |
| UC04 | Inativar Tronco | Baixa |
| UC05 | Monitorar Capacidade de Troncos | Alta |
| UC06 | Distribuir Linhas por Tronco | Média |
| UC07 | Relatório de Utilização | Média |
| UC08 | Alertar Tronco Saturado | Média |

## UC00 - Listar Troncos
**Objetivo:** Listagem de troncos telefônicos configurados com capacidade e utilização.
**Fluxo:** Grid com Identificação, Operadora, Capacidade (canais), Linhas Vinculadas, Utilização (%), Localização, Status.
**RN-040-001:** Exibir % utilização com cor: verde < 70%, amarelo 70-90%, vermelho > 90%.

## UC01 - Criar Tronco
**Objetivo:** Registrar novo tronco com configurações técnicas.
**Fluxo:** Identificação*, Operadora*, Tipo* (E1/SIP/Digital), Capacidade_Canais*, DDR_Inicial, DDR_Final, Localização* (Filial), Contrato (FK), Valor_Mensal, Dt_Ativacao.
**RN-040-002:** DDR_Inicial e DDR_Final definem faixa de números disponíveis.
**RN-040-003:** Capacidade E1 padrão: 30 canais. SIP: configurável.

## UC02 - Visualizar Tronco
**Objetivo:** Detalhes completos + linhas vinculadas + histórico utilização.
**Fluxo:** Exibe dados técnicos, lista de linhas/ramais vinculados, gráfico utilização últimos 30 dias, custos mensais.

## UC03 - Editar Tronco
**Objetivo:** Atualizar capacidade, operadora, localização ou contrato.
**RN-040-004:** Redução de capacidade requer validação (linhas vinculadas < nova capacidade).

## UC04 - Inativar Tronco
**Objetivo:** Desativar tronco obsoleto.
**RN-040-005:** Tronco com linhas ativas não pode ser inativado (requer migração prévia).

## UC05 - Monitorar Capacidade de Troncos
**Objetivo:** Dashboard em tempo real de utilização por tronco com alertas de saturação.
**Fluxo:** Exibe lista de troncos com barra progresso utilização, linhas livres, pico utilização (últimas 24h).
**RN-040-006:** Job horário atualiza métricas de utilização baseado em bilhetes.

## UC06 - Distribuir Linhas por Tronco
**Objetivo:** Vincular linhas/ramais a troncos considerando capacidade e localização.
**Fluxo:** Selecion a linhas → Seleciona tronco destino → Valida capacidade → Vincula.
**RN-040-007:** Auto-balanceamento: distribuir linhas uniformemente entre troncos da mesma localização.

## UC07 - Relatório de Utilização
**Objetivo:** Relatório de uso de troncos por período: picos, médias, subutilizados.
**Fluxo:** Seleciona período → Gera relatório com: Utilização média, Picos (data/hora), Troncos subutilizados (< 30%), Troncos saturados (> 90%), Recomendações (expansão/redução).
**Formatos:** PDF, Excel.

## UC08 - Alertar Tronco Saturado
**Objetivo:** Notificar gestor quando tronco atingir 90% capacidade.
**Fluxo:** Job horário verifica utilização → Se > 90% por 3 verificações consecutivas → Envia email gestor + cria ticket.
**RN-040-008:** Alerta inclui recomendação: ampliar capacidade ou redistribuir linhas.

## Integrações
- Central de Funcionalidades: Feature "Troncos Telefônicos"
- i18n: `troncos.titulo`, `troncos.tipo.e1`, `troncos.saturacao`
- Auditoria: CREATE, UPDATE, DELETE, REDISTRIBUICAO
- RBAC: Visualizar (Gestor), Configurar (Telecom), Alertas (NOC)

## Histórico
| Versão | Data | Descrição |
|--------|------|-----------|
| 1.0 | 2025-12-18 | Criação inicial - 9 UCs |
