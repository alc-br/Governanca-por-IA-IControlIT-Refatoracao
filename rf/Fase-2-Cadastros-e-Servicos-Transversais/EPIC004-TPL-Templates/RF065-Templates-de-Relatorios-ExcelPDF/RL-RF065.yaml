# ==============================================================================
# RL-RF065 - Referência ao Legado: Templates de Relatórios (Excel/PDF)
# ==============================================================================

rf_id: RF065
rf_title: "Templates de Relatórios (Excel/PDF)"
versao_governanca: "2.0"
data_criacao: "2025-12-30"
status: "Não Aplicável"

# ==============================================================================
# METADADOS DA AUSÊNCIA DE LEGADO
# ==============================================================================

metadados:
  sistema_legado_existe: false
  motivo: |
    O RF065 é uma funcionalidade NOVA que NÃO possui correspondente no sistema legado
    IControlIT (ASP.NET Web Forms + VB.NET). Foi projetada desde o início seguindo
    melhores práticas de geração de relatórios modernos com bibliotecas .NET 10
    (EPPlus, QuestPDF, CsvHelper) e padrões de desenvolvimento.
  total_referencias_legado: 0
  total_itens_com_destino: 0
  cobertura_destino: "N/A"

# ==============================================================================
# REFERÊNCIAS AO LEGADO (VAZIO - NÃO HÁ LEGADO)
# ==============================================================================

referencias: []

# ==============================================================================
# OBSERVAÇÕES
# ==============================================================================

observacoes:
  ausencia_legado:
    - "Sistema legado NÃO possuía templates reutilizáveis parametrizados"
    - "Não havia múltiplos formatos de exportação (Excel .xlsx, PDF moderno, CSV)"
    - "Não havia gráficos dinâmicos Chart.js"
    - "Não havia agrupamentos e subtotais automáticos"
    - "Não havia formatação condicional por regras"
    - "Não havia múltiplas abas em Excel configuráveis"
    - "Não havia agendamento de exportações via Hangfire"
    - "Não havia cabeçalho/rodapé customizados"
    - "Não havia proteção de planilhas Excel"
    - "Não havia assinatura digital PDF (X.509)"
    - "Não havia marca d'água em PDFs"
    - "Não havia integração com cubos OLAP (MDX queries)"
    - "Não havia cache de relatórios pesados (Redis)"
    - "Não havia compactação ZIP de múltiplos relatórios"
    - "Não havia métricas de uso de templates"

  justificativa_rf_novo:
    - "Funcionalidade identificada como necessidade crítica durante modernização"
    - "Projetada inteiramente do zero com bibliotecas modernas .NET 10"
    - "Sem necessidade de migração de dados (não há dados legados correspondentes)"
    - "Implementação 100% greenfield (campo verde)"

  estrategia_implementacao:
    - "Fase 1: Backend com Clean Architecture + CQRS"
    - "Fase 2: Integração EPPlus (Excel), QuestPDF (PDF), CsvHelper (CSV)"
    - "Fase 3: Frontend Angular 19 com Chart.js e wizard de templates"
    - "Fase 4: Jobs Hangfire para agendamento e cache Redis"
    - "Fase 5: Seed inicial com templates de exemplo e configurações padrão"

# ==============================================================================
# VALIDAÇÃO DE GOVERNANÇA
# ==============================================================================

validacao_governanca:
  separacao_rf_rl_completa: true
  rl_documenta_ausencia_legado: true
  rf_limpo_sem_legado: true
  referencias_vazias_validas: true  # RL pode ter referencias vazias se não há legado
  validador_deve_aceitar: true      # validator-rl.py DEVE aceitar referencias: []
