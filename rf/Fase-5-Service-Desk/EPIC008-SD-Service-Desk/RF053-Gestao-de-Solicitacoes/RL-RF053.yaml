# =============================================
# RL-RF053 — Referência ao Legado
# Versão: 1.0
# Data: 2025-12-30
# Autor: Agência ALC - alc.dev.br
# =============================================

rf_id: RF053
titulo: "Gestão de Solicitações"

legado:
  sistema: "VB.NET + ASP.NET Web Forms (sistema IControlIT legado)"
  versao: "Não aplicável (funcionalidade não existia)"
  arquitetura: "Monolítica WebForms"
  banco_dados: "SQL Server 2016"
  multi_tenant: false
  auditoria: "partial"  # Apenas tabelas críticas, sem estrutura para solicitações
  observacao: "RF053 é funcionalidade NOVA, sem equivalente no legado. Processo era manual via e-mail."

# IMPORTANTE: RF053 é funcionalidade nova, sem código legado para migrar
# Todas as referências abaixo são de PROCESSOS MANUAIS (não sistematizados)
referencias:
  - id: "LEG-RF053-001"
    tipo: "regra_negocio"
    nome: "Aprovação de celular por gestor (processo manual via e-mail)"
    caminho: "Processo manual - sem código"
    descricao: |
      No sistema legado, solicitações de celular eram feitas via e-mail direto ao gestor.
      Não havia rastreio, workflow sistematizado ou SLA.
      Aprovação era manual e sem registro formal.
    destino: "assumido"
    justificativa: |
      Processo manual foi formalizado e sistematizado em RN-RF053-03 (Workflow de Aprovação Multi-Nível).
      Agora com rastreio completo, auditoria e notificações automáticas.
    rf_item_relacionado: "RN-RF053-03"
    uc_relacionado: "UC03"
    complexidade: "baixa"
    risco_migracao: "baixo"
    prioridade: 2

  - id: "LEG-RF053-002"
    tipo: "regra_negocio"
    nome: "Prazo informal de 5 dias úteis para atendimento"
    caminho: "Processo manual - sem código"
    descricao: |
      Equipe de TI trabalhava com prazo informal de 5 dias úteis para atender solicitações.
      Não havia SLA monitorado, alertas ou escalonamento.
      Controle era manual em planilhas Excel.
    destino: "assumido"
    justificativa: |
      Processo informal foi formalizado e automatizado em RN-RF053-04 (SLA Automático com Pausas).
      Agora com alertas proativos (50%, 80%, 100%), escalonamento automático e pausas configuráveis.
    rf_item_relacionado: "RN-RF053-04"
    uc_relacionado: "UC09"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 1

  - id: "LEG-RF053-003"
    tipo: "regra_negocio"
    nome: "Aprovação de diretoria para valores > R$ 5.000"
    caminho: "Processo manual - sem código"
    descricao: |
      Solicitações de alto valor (> R$ 5.000) exigiam aprovação da diretoria via e-mail.
      Não havia workflow configurável ou níveis de aprovação automatizados.
    destino: "assumido"
    justificativa: |
      Regra foi incorporada em RN-RF053-03 (Workflow multi-nível configurável por valor).
      Agora com fluxo: Valor < R$ 1.000 → Gestor | R$ 1.000-5.000 → Gestor+TI | > R$ 5.000 → Gestor+TI+Diretoria.
    rf_item_relacionado: "RN-RF053-03"
    uc_relacionado: "UC03"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 1

  - id: "LEG-RF053-004"
    tipo: "componente"
    nome: "Controle manual em planilhas Excel"
    caminho: "Arquivo externo - Excel (não sistematizado)"
    descricao: |
      Equipe de TI usava planilhas Excel para rastrear solicitações pendentes.
      Sem integração com sistema, sem auditoria, sem notificações automáticas.
    destino: "substituido"
    justificativa: |
      Planilhas manuais foram completamente substituídas pelo dashboard em tempo real (RN-RF053-14).
      Agora com SignalR, métricas automáticas, alertas e exportação de relatórios.
    rf_item_relacionado: "RN-RF053-14"
    uc_relacionado: "UC14"
    complexidade: "alta"
    risco_migracao: "baixo"
    prioridade: 1

  - id: "LEG-RF053-005"
    tipo: "componente"
    nome: "Comunicação via e-mail disperso"
    caminho: "Processo manual - e-mails"
    descricao: |
      Comunicação entre solicitante e atendente era feita via e-mails dispersos.
      Histórico não centralizado, difícil rastreamento, sem auditoria.
    destino: "substituido"
    justificativa: |
      E-mails dispersos foram substituídos pelo chat interno da solicitação (RN-RF053-09).
      Agora com mensagens públicas/internas, anexos, notificações e histórico completo auditado.
    rf_item_relacionado: "RN-RF053-09"
    uc_relacionado: "UC10"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 2

  - id: "LEG-RF053-006"
    tipo: "regra_negocio"
    nome: "Ausência de pesquisa de satisfação"
    caminho: "Não existia"
    descricao: |
      Não havia pesquisa de satisfação ou NPS após atendimento.
      Qualidade do atendimento não era mensurada formalmente.
    destino: "substituido"
    justificativa: |
      Pesquisa de satisfação foi introduzida em RN-RF053-12 (NPS automático ao fechar solicitação).
      Agora com 4 perguntas (NPS 0-10, Agilidade, Comunicação, Comentários) e dashboard de métricas.
    rf_item_relacionado: "RN-RF053-12"
    uc_relacionado: "UC12"
    complexidade: "media"
    risco_migracao: "baixo"
    prioridade: 3

# Telas Legadas: NENHUMA
telas: []

# WebServices Legados: NENHUM
servicos: []

# Tabelas Legadas: NENHUMA
tabelas: []

# Regras de Negócio Implícitas (não documentadas no legado)
regras_implicitas:
  - id: "RL-RN-001"
    descricao: |
      Solicitações de celular exigiam aprovação do gestor direto (processo manual via e-mail).
    fonte: "Entrevista com equipe de TI / Processo informal"
    destino: "assumido"
    rf_item_relacionado: "RN-RF053-03"

  - id: "RL-RN-002"
    descricao: |
      Prazo informal de 5 dias úteis para atendimento (não monitorado automaticamente).
    fonte: "Entrevista com equipe de TI / Controle manual"
    destino: "assumido"
    rf_item_relacionado: "RN-RF053-04"

  - id: "RL-RN-003"
    descricao: |
      Solicitações de alto valor (> R$ 5.000) requeriam aprovação da diretoria.
    fonte: "Política interna (não sistematizada)"
    destino: "assumido"
    rf_item_relacionado: "RN-RF053-03"

# Gap Analysis (Legado x Moderno)
gap_analysis:
  - item: "Abertura de Solicitações"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - Portal self-service com formulário dinâmico (legado era e-mail manual)"

  - item: "Workflow de Aprovação"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - Multi-nível configurável, auditado (legado era e-mail manual sem rastreio)"

  - item: "SLA Automático"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - Cálculo automático com pausas, alertas proativos (legado era prazo informal não monitorado)"

  - item: "Atribuição de Atendente"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - Automática ou manual com rastreio (legado era atribuição manual do gestor TI)"

  - item: "Chat Interno"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - Chat integrado à solicitação (legado era e-mail disperso)"

  - item: "Anexos Validados"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - Upload validado (tipo, tamanho, vírus) (legado era anexo de e-mail sem validação)"

  - item: "Aprovação Mobile"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - App mobile com notificação push (legado não tinha mobile)"

  - item: "Delegação de Aprovadores"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - Delegação temporária de aprovadores (legado não tinha delegação formal)"

  - item: "Pesquisa de Satisfação"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - NPS automático ao fechar solicitação (legado não mensurava satisfação)"

  - item: "Dashboard em Tempo Real"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - SignalR com métricas automáticas (legado usava planilhas Excel manuais)"

  - item: "Relatórios Exportáveis"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - Excel/PDF com filtros configuráveis (legado não tinha relatórios sistematizados)"

  - item: "Auditoria Completa"
    existe_legado: false
    existe_moderno: true
    notas: "NOVO - 7 anos (LGPD) com histórico completo (legado não auditava solicitações)"

# Decisões de Modernização
decisoes_modernizacao:
  - decisao: "Criar funcionalidade nova do zero (não adaptar processos manuais legados)"
    motivo: |
      Processos manuais via e-mail são ineficientes e não rastreáveis.
      Necessidade de workflow configurável, SLA automático e aprovação mobile.
      Oportunidade de implementar melhores práticas (SignalR, chat, multi-nível).
    impacto: "alto"
    data: "2025-01-14"

  - decisao: "Implementar workflow configurável (não hardcodar fluxos)"
    motivo: |
      Flexibilidade para diferentes tipos de solicitação e mudanças futuras.
      Evitar retrabalho em mudanças de regras de aprovação.
    impacto: "medio"
    data: "2025-01-14"

  - decisao: "SLA com pausas automáticas (não penalizar TI por fatores externos)"
    motivo: |
      Evitar SLA vencido quando pendência é de fornecedor externo ou solicitante.
      Medir qualidade real do atendimento da equipe de TI.
    impacto: "medio"
    data: "2025-01-14"

  - decisao: "Aprovação mobile nativa (não apenas web responsivo)"
    motivo: |
      Agilizar aprovações de gestores em viagem/ausentes.
      Notificações push críticas para SLA.
    impacto: "alto"
    data: "2025-01-14"

# Riscos de Migração
# IMPORTANTE: Não há migração de dados legados (funcionalidade nova)
# Riscos são de ADOÇÃO, não de migração técnica
riscos_migracao:
  - risco: "Resistência de usuários acostumados com e-mail manual"
    impacto: "alto"
    probabilidade: "media"
    mitigacao: |
      - Treinamento obrigatório antes do go-live
      - Documentação clara e vídeos tutoriais
      - Suporte dedicado nas primeiras 2 semanas
      - Comunicação interna massiva sobre benefícios

  - risco: "Processos manuais continuarem paralelos ao sistema (duplicação)"
    impacto: "medio"
    probabilidade: "media"
    mitigacao: |
      - Desabilitar e-mails manuais após go-live (forçar uso do sistema)
      - Monitorar uso nas primeiras semanas
      - Comunicação clara de que e-mail não será mais aceito

  - risco: "Sobrecarga inicial de solicitações (backlog acumulado)"
    impacto: "medio"
    probabilidade: "alta"
    mitigacao: |
      - Lançamento gradual (piloto com 1 departamento → geral)
      - Capacidade de atendimento adequada (equipe TI reforçada)
      - Limitar solicitações por usuário nas primeiras semanas

  - risco: "Configuração incorreta de workflows (aprovação errada)"
    impacto: "alto"
    probabilidade: "baixa"
    mitigacao: |
      - Validação de configurações antes de go-live
      - Testes com cenários reais de todos os tipos de solicitação
      - Revisão com gestores e equipe TI

  - risco: "Falta de integração com gestão de ativos (duplicação de cadastro)"
    impacto: "medio"
    probabilidade: "baixa"
    mitigacao: |
      - Garantir RF025 (Gestão de Ativos) implementado e testado antes de RF053
      - Teste de integração completo (criar solicitação → aprovar → verificar ativo criado)

# Rastreabilidade (Legado → Moderno)
# IMPORTANTE: Não há elementos legados para rastrear
rastreabilidade:
  - elemento_legado: "N/A - Funcionalidade nova sem equivalente legado"
    referencia_rf: "RF053"
    referencia_uc: "UC00-UC14"
    status: "novo"

# Dependências de Outros RFs (não legado)
dependencias_rf:
  - rf_id: "RF025"
    nome: "Gestão de Ativos"
    descricao: "Integração para criação automática de ativo no inventário (RN-RF053-10)"
    obrigatorio: true

  - rf_id: "RF001"
    nome: "Autenticação e Autorização"
    descricao: "RBAC para permissões de solicitações"
    obrigatorio: true

  - rf_id: "RF002"
    nome: "Multi-Tenancy"
    descricao: "Isolamento de solicitações por empresa"
    obrigatorio: true

  - rf_id: "RF003"
    nome: "Auditoria"
    descricao: "Registro de operações com retenção de 7 anos"
    obrigatorio: true

# Changelog
changelog:
  - versao: "1.0"
    data: "2025-12-30"
    descricao: "Documentação de ausência de legado para RF053 (funcionalidade nova)"
    autor: "Agência ALC - alc.dev.br"
