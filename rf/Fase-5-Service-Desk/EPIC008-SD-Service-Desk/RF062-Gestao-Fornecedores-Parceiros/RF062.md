# RF062 - Gestão de Fornecedores e Parceiros

**Versão**: 2.0
**Data**: 2025-12-30
**Autor**: Agência ALC - alc.dev.br
**EPIC**: EPIC008-SD-Service-Desk
**Fase**: Fase 5 - Service Desk

---

## 1. OBJETIVO DO REQUISITO

Fornecer sistema completo de cadastro e gestão de fornecedores e parceiros de TI e Telecom (operadoras, fabricantes, revendas, prestadores de serviço), incluindo controle de documentação obrigatória, gestão de contratos e SLAs, avaliação de performance, homologação de parceiros e integração com processos de compras e solicitações de serviço.

Este documento define **o que o sistema deve fazer** para gerenciar o ciclo de vida completo de fornecedores, desde cadastro e homologação até avaliação contínua de qualidade e performance.

---

## 2. ESCOPO

### 2.1 O que está dentro do escopo

- [x] Cadastro completo de fornecedores com classificação por categoria
- [x] Upload e controle de documentação obrigatória com validação de vencimentos
- [x] Gestão de múltiplos contatos por fornecedor (comercial, técnico, financeiro)
- [x] Cadastro e controle de contratos vinculados com alertas de renovação
- [x] Definição e monitoramento de SLAs por tipo de serviço
- [x] Processo de homologação de fornecedores
- [x] Sistema de avaliação periódica de fornecedores
- [x] Ranking automático baseado em performance e SLA
- [x] Alertas automáticos de vencimento de documentos e contratos
- [x] Bloqueio automático de fornecedores com documentação vencida
- [x] Dashboard de performance em tempo real
- [x] Exportação de relatórios para compliance e auditoria
- [x] Integração com sistema de solicitações e ordens de serviço
- [x] Histórico completo de atendimentos por fornecedor
- [x] Auditoria de todas as operações
- [x] Controle de acesso multi-tenant

### 2.2 Fora do escopo (não objetivos)

- Interface visual específica (design system é responsabilidade do frontend)
- Tecnologia, framework ou linguagem de implementação
- Layout, UX ou identidade visual
- Estratégia de deploy ou infraestrutura
- Integração com sistemas de pagamento (fora do escopo atual)
- Gestão financeira de pagamentos a fornecedores (será tratado em RF específico)

---

## 3. CONCEITOS E DEFINIÇÕES

| Termo | Definição |
|-----|---------|
| Fornecedor | Empresa ou profissional autônomo que fornece produtos ou serviços de TI/Telecom |
| Parceiro | Sinônimo de fornecedor, utilizado para empresas com relacionamento estratégico |
| Categoria | Classificação do fornecedor por tipo de serviço/produto oferecido |
| Homologação | Processo de aprovação formal de um fornecedor antes de habilitá-lo para compras |
| SLA | Service Level Agreement - acordo de nível de serviço contratual |
| Compliance | Cumprimento de documentação obrigatória e requisitos legais |
| Performance | Desempenho do fornecedor medido por avaliações, SLA e histórico |
| Documentação Obrigatória | Certidões e documentos legais exigidos para manter fornecedor ativo |
| Tenant | Unidade lógica de isolamento de dados (empresa cliente do sistema) |

---

## 4. FUNCIONALIDADES COBERTAS

1. Cadastrar fornecedor com dados completos
2. Atualizar informações de fornecedor existente
3. Consultar fornecedor por ID
4. Listar fornecedores com filtros e paginação
5. Inativar fornecedor (soft delete)
6. Upload de documentação obrigatória com controle de vencimento
7. Cadastrar múltiplos contatos por departamento
8. Gerenciar contratos vinculados ao fornecedor
9. Definir e monitorar SLAs por tipo de serviço
10. Homologar ou rejeitar fornecedores
11. Avaliar fornecedores periodicamente
12. Gerar ranking automático de fornecedores
13. Receber alertas de vencimentos (documentos e contratos)
14. Bloquear/desbloquear fornecedores automaticamente
15. Visualizar dashboard de performance
16. Exportar relatórios de compliance
17. Consultar histórico de atendimentos
18. Integrar com solicitações e ordens de serviço

---

## 5. REGRAS DE NEGÓCIO

### RN-RF062-001 — Categorias de Fornecedores

**Descrição**: Fornecedores devem ser classificados em uma das categorias disponíveis: Operadora, Fabricante, Revenda, Prestador de Serviço, Software House ou Transportadora.

**Justificativa**: Permitir segmentação e análise por tipo de fornecedor, facilitando comparações e relatórios específicos.

**Critério de Aceite**:
- Categoria é campo obrigatório no cadastro
- Lista de categorias é fixa e controlada pelo sistema
- Fornecedor pode ter apenas uma categoria principal
- Categoria não pode ser alterada após criação (apenas criando novo registro)

---

### RN-RF062-002 — Documentação Obrigatória

**Descrição**: Fornecedores pessoa jurídica devem manter certidões válidas: CNPJ, Certidão Negativa de Débitos Federal, Estadual e Municipal.

**Justificativa**: Garantir compliance legal e mitigar riscos contratuais.

**Critério de Aceite**:
- Sistema exige upload de: CNPJ, CND Federal, CND Estadual, CND Municipal
- Cada documento possui data de emissão e data de validade
- Sistema marca documento como "vencido" quando Data Validade < Data Atual
- Fornecedor sem documentação completa não pode ser homologado

---

### RN-RF062-003 — Alertas de Vencimento de Documentos

**Descrição**: Sistema deve notificar responsáveis 30, 15 e 7 dias antes do vencimento de cada certidão.

**Justificativa**: Evitar bloqueios de fornecedores por falta de atualização de documentos.

**Critério de Aceite**:
- Job diário verifica vencimentos futuros
- Alertas são enviados exatamente em D-30, D-15 e D-7
- Cada alerta identifica fornecedor, documento e data de vencimento
- Alertas são registrados em auditoria

---

### RN-RF062-004 — Bloqueio por Documentação Vencida

**Descrição**: Fornecedor com qualquer certidão obrigatória vencida é automaticamente bloqueado para novas solicitações.

**Justificativa**: Proteger a empresa de riscos legais e contratuais.

**Critério de Aceite**:
- Bloqueio ocorre automaticamente no dia seguinte ao vencimento
- Fornecedor bloqueado não pode receber novas ordens de serviço
- Solicitações em andamento não são afetadas
- Desbloqueio ocorre automaticamente após upload de documento válido
- Estado de bloqueio é visível em listagens e detalhes

---

### RN-RF062-005 — Contratos Vinculados

**Descrição**: Cada fornecedor pode ter múltiplos contratos com vigências, valores e renovação automática.

**Justificativa**: Centralizar gestão de contratos e facilitar controle de vigências.

**Critério de Aceite**:
- Contrato possui: número, datas início/fim, valor mensal, valor total, prazo de renovação
- Contrato pode ter flag de renovação automática
- Contratos vencidos ficam com status "expirado"
- Upload de PDF do contrato é obrigatório
- Histórico de alterações é mantido

---

### RN-RF062-006 — SLA por Fornecedor

**Descrição**: Cada fornecedor pode ter SLAs definidos por tipo de serviço (Reparo, Instalação, Suporte) com tempos de resposta e resolução.

**Justificativa**: Monitorar cumprimento de acordos contratuais e avaliar performance.

**Critério de Aceite**:
- SLA define: tipo de serviço, tempo de resposta, tempo de resolução, percentual de cumprimento esperado
- Medição de SLA é automática com base em solicitações atendidas
- Percentual real de cumprimento é calculado mensalmente
- SLA abaixo da meta gera alerta para gestor

---

### RN-RF062-007 — Avaliações Periódicas

**Descrição**: Fornecedores devem ser avaliados trimestralmente em quatro dimensões: Qualidade, Prazo, Custo e Atendimento.

**Justificativa**: Manter histórico de performance e embasar decisões de renovação contratual.

**Critério de Aceite**:
- Avaliação possui notas de 1 a 5 para cada dimensão
- Nota média é calculada automaticamente
- Avaliações são vinculadas a um período (trimestre)
- Campo de comentários é obrigatório para notas abaixo de 3
- Avaliador é identificado e registrado

---

### RN-RF062-008 — Ranking de Fornecedores

**Descrição**: Sistema gera ranking automático de fornecedores por categoria, combinando nota média de avaliações (peso 60%) e SLA compliance (peso 40%).

**Justificativa**: Facilitar escolha de fornecedores para novas contratações.

**Critério de Aceite**:
- Score = (Nota Média Avaliações × 0,6) + (SLA Compliance × 0,4)
- Ranking considera apenas últimos 12 meses
- Ranking é atualizado mensalmente
- Fornecedores inativos ou não homologados não aparecem no ranking
- Ranking é segmentado por categoria

---

### RN-RF062-009 — Contatos Múltiplos

**Descrição**: Cada fornecedor pode ter múltiplos contatos cadastrados, classificados por departamento (Comercial, Técnico, Financeiro).

**Justificativa**: Facilitar comunicação direcionada conforme necessidade.

**Critério de Aceite**:
- Contato possui: nome, departamento, telefone, email
- Um contato pode ser marcado como "primário" por departamento
- Email deve ser válido (validação de formato)
- Telefone segue padrão brasileiro (validação de formato)

---

### RN-RF062-010 — Integração com Solicitações

**Descrição**: Fornecedor deve ser vinculado automaticamente a solicitações e ordens de serviço que atender.

**Justificativa**: Permitir rastreamento de histórico e avaliação baseada em atendimentos reais.

**Critério de Aceite**:
- Vínculo é criado automaticamente quando OS é atribuída ao fornecedor
- Histórico de atendimentos é consultável na tela do fornecedor
- Informações incluem: data, tipo de serviço, tempo de resolução, avaliação
- Histórico alimenta cálculo de SLA compliance

---

### RN-RF062-011 — Histórico de Atendimentos

**Descrição**: Sistema mantém registro completo de todos os atendimentos realizados por cada fornecedor.

**Justificativa**: Embasar avaliações e decisões de contratação com dados históricos.

**Critério de Aceite**:
- Histórico inclui: data, solicitação, tipo de serviço, tempo decorrido, status final
- Filtros por período, tipo de serviço e status
- Exportação de histórico em Excel/PDF
- Dados são read-only (não editáveis)

---

### RN-RF062-012 — Dashboard de Performance

**Descrição**: Painel executivo exibe métricas em tempo real: SLA compliance, nota média de avaliações, quantidade de contratos ativos, documentos vencidos.

**Justificativa**: Visibilidade rápida da situação geral de fornecedores.

**Critério de Aceite**:
- Dashboard atualiza automaticamente a cada acesso
- Métricas são segmentadas por categoria de fornecedor
- Gráficos mostram evolução temporal (últimos 12 meses)
- Drill-down permite detalhar fornecedores específicos

---

### RN-RF062-013 — Alertas de Renovação de Contratos

**Descrição**: Sistema notifica responsáveis 90, 60 e 30 dias antes do vencimento de contratos.

**Justificativa**: Permitir tempo hábil para negociação de renovação ou substituição de fornecedor.

**Critério de Aceite**:
- Alertas são enviados em D-90, D-60 e D-30
- Contratos com renovação automática também geram alertas (para revisão)
- Alerta identifica contrato, fornecedor, valor e condições atuais
- Alertas são registrados em auditoria

---

### RN-RF062-014 — Homologação de Fornecedores

**Descrição**: Fornecedor passa por processo de aprovação formal antes de poder receber ordens de serviço.

**Justificativa**: Garantir que apenas fornecedores qualificados e com documentação completa sejam utilizados.

**Critério de Aceite**:
- Estados: Em Análise, Aprovado, Rejeitado
- Aprovação exige documentação completa e válida
- Aprovador e data de aprovação são registrados
- Campo de justificativa é obrigatório para rejeição
- Fornecedor rejeitado pode ser resubmetido após correções

---

### RN-RF062-015 — Export para Compliance

**Descrição**: Sistema permite exportar relatório consolidado de fornecedores ativos com status de documentação para auditorias.

**Justificativa**: Atender requisitos de compliance e auditorias internas/externas.

**Critério de Aceite**:
- Relatório inclui: fornecedor, categoria, CNPJ, documentos, validades, status de homologação
- Formatos: Excel e PDF
- Filtros por: categoria, status de homologação, status de documentação
- Relatório inclui data/hora de geração e usuário responsável
- Dados seguem padrão de auditoria (não editáveis)

---

## 6. ESTADOS DA ENTIDADE

| Estado | Descrição |
|------|-----------|
| rascunho | Fornecedor criado, cadastro incompleto |
| em_analise | Aguardando homologação |
| ativo | Homologado e habilitado para receber OSs |
| bloqueado | Bloqueado por documentação vencida ou desempenho insatisfatório |
| inativo | Desativado permanentemente |

### Transições permitidas

| De | Para | Condição |
|---|---|---|
| rascunho | em_analise | Cadastro completo + documentação enviada |
| em_analise | ativo | Aprovação da homologação |
| em_analise | rascunho | Rejeição com solicitação de correção |
| ativo | bloqueado | Documentação vencida ou avaliação crítica |
| bloqueado | ativo | Documentação atualizada ou plano de melhoria aprovado |
| ativo | inativo | Solicitação de inativação (soft delete) |
| bloqueado | inativo | Solicitação de inativação (soft delete) |

---

## 7. EVENTOS DE DOMÍNIO

| Evento | Quando ocorre |
|------|--------------|
| fornecedor.criado | Após criação de novo fornecedor |
| fornecedor.atualizado | Após atualização de dados cadastrais |
| fornecedor.homologado | Após aprovação no processo de homologação |
| fornecedor.rejeitado | Após rejeição no processo de homologação |
| fornecedor.bloqueado | Quando fornecedor é bloqueado automaticamente |
| fornecedor.desbloqueado | Quando bloqueio é removido |
| fornecedor.inativado | Quando fornecedor é inativado |
| documento.vencendo | 30, 15 ou 7 dias antes do vencimento |
| documento.vencido | No dia seguinte à data de validade |
| contrato.vencendo | 90, 60 ou 30 dias antes do término |
| contrato.expirado | No dia seguinte ao término de vigência |
| avaliacao.criada | Após registro de avaliação trimestral |
| ranking.atualizado | Após recálculo mensal do ranking |

---

## 8. CRITÉRIOS GLOBAIS DE ACEITE

- Nenhuma operação pode violar isolamento de tenant (fornecedor pertence a uma empresa)
- Nenhuma regra de negócio pode ser ignorada (validações obrigatórias)
- Erros devem ser previsíveis e rastreáveis (códigos HTTP + mensagens claras)
- Auditoria deve registrar quem, quando e o que mudou em todas as operações críticas
- Documentos devem ser armazenados com criptografia em repouso
- Dados pessoais de contatos devem seguir LGPD (anonimização após 7 anos de inatividade)
- Performance: listagem de 10.000 fornecedores em < 1 segundo
- Alertas devem ser enviados exatamente nas datas programadas (D-30, D-15, D-7, D-90, D-60)

---

## 9. SEGURANÇA

- Validação de entrada obrigatória em todos os campos (SQL injection, XSS)
- Proteção contra upload de arquivos maliciosos (whitelist: PDF, JPEG, PNG apenas)
- Controle de permissões RBAC para cada operação
- Isolamento multi-tenant rigoroso (filtro automático por EmpresaId)
- Documentos armazenados com criptografia AES-256
- Logs de acesso a documentos sensíveis (CNPJ, certidões)
- Rate limiting para APIs públicas (100 requests/minuto por usuário)
- Validação de CNPJ (formato e dígitos verificadores)

---

## 10. ARTEFATOS DERIVADOS

Este RF é base para:

- UC-RF062.md (Casos de Uso detalhados)
- MD-RF062.md (Modelo de Dados completo)
- WF-RF062.md (Wireframes e fluxos de tela)
- TC-RF062-BACKEND.md (Casos de Teste Backend)
- TC-RF062-FRONTEND.md (Casos de Teste Frontend)
- TC-RF062-SEGURANCA.md (Casos de Teste de Segurança)
- TC-RF062-E2E.md (Casos de Teste End-to-End)

---

## 11. RASTREABILIDADE

| Artefato | Gerado | Status |
|--------|-------|--------|
| Casos de Uso | Obrigatório | Pendente |
| Modelo de Dados | Obrigatório | Pendente |
| Wireframes | Obrigatório | Pendente |
| Casos de Teste | Obrigatório | Pendente |
| User Stories | Obrigatório | Pendente |

---

## CHANGELOG

| Versão | Data | Descrição | Autor |
|------|------|----------|------|
| 2.0 | 2025-12-30 | Migração v1.0 → v2.0 - Separação RF/RL completa | Agência ALC - alc.dev.br |
| 1.0 | 2025-01-14 | Versão inicial | Equipe IControlIT |
