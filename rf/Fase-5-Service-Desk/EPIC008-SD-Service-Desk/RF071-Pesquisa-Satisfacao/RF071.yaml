rf_id: RF071
rf_title: Pesquisa de Satisfação
rf_codigo: SD.PESQUISAS
versao_governanca: '2.0'
data_criacao: '2025-12-28'
data_migracao: '2025-12-30'
autor: Equipe IControlIT
status: Aprovado
metadados:
  fase: Fase-5-Service-Desk
  epic: EPIC008-SD-Service-Desk
  modulo: Service Desk
  complexidade: MUITO_ALTA
  prioridade_negocio: CRÍTICA
  total_regras_negocio: 12
  total_funcionalidades: 20
  total_permissoes: 14
  total_metricas: 3
  total_alertas: 8
regras_negocio:
- id: RN-RF071-001
  titulo: Frequência Máxima de Pesquisas (Anti-Fadiga)
  criticidade: CRÍTICA
  descricao: Limite 1 pesquisa a cada 7 dias por usuário (configurável)
- id: RN-RF071-002
  titulo: Cálculo Automático de NPS
  criticidade: CRÍTICA
  formula: NPS = % Promotores (9-10) - % Detratores (0-6)
- id: RN-RF071-003
  titulo: Follow-up Automático para Detratores
  criticidade: CRÍTICA
  sla: 2 horas
- id: RN-RF071-004
  titulo: Anonimização Configurável por Tipo de Pesquisa
  criticidade: CRÍTICA
  lgpd: Art. 12
- id: RN-RF071-005
  titulo: Análise de Sentimento Automática (NLP)
  criticidade: IMPORTANTE
  engine: Azure Cognitive Services
- id: RN-RF071-006
  titulo: Validação de Taxa de Resposta Mínima
  criticidade: IMPORTANTE
  limite: 30% E mínimo 50 respostas
- id: RN-RF071-007
  titulo: Expiração de Link de Pesquisa
  criticidade: IMPORTANTE
  validade: 7 dias (configurável)
- id: RN-RF071-008
  titulo: Cálculo de CES (Customer Effort Score)
  criticidade: IMPORTANTE
  formula: Média aritmética escala 1-7
- id: RN-RF071-009
  titulo: Correlação Automática com Chamado de Origem
  criticidade: IMPORTANTE
- id: RN-RF071-010
  titulo: Limite de Caracteres em Respostas Abertas
  criticidade: MÉDIA
  limites: 10 min, 2000 max
- id: RN-RF071-011
  titulo: Prazo SLA de Follow-up para Gestores
  criticidade: IMPORTANTE
  sla: 4 horas úteis
- id: RN-RF071-012
  titulo: Dashboard Atualização SignalR
  criticidade: IMPORTANTE
  intervalo: 5 minutos
permissoes_rbac:
- permission_code: pesquisas:templates:create
  descricao: Criar templates de pesquisa
- permission_code: pesquisas:templates:read
  descricao: Visualizar templates
- permission_code: pesquisas:templates:update
  descricao: Editar templates
- permission_code: pesquisas:templates:delete
  descricao: Excluir templates
- permission_code: pesquisas:enviar
  descricao: Enviar pesquisas (lote)
- permission_code: pesquisas:respostas:read
  descricao: Visualizar respostas anonimizadas
- permission_code: pesquisas:respostas:read_identificado
  descricao: Visualizar respostas com identificação
- permission_code: pesquisas:dashboard:view
  descricao: Acessar dashboards de métricas
- permission_code: pesquisas:export
  descricao: Exportar dados brutos
- permission_code: pesquisas:followup:manage
  descricao: Gerenciar follow-up detratores
- permission_code: pesquisas:configuracoes:manage
  descricao: Alterar configurações globais
- permission_code: pesquisas:triggers:manage
  descricao: Criar/editar triggers automáticos
- permission_code: pesquisas:anonimizar
  descricao: Forçar anonimização manual
- permission_code: pesquisas:audit:view
  descricao: Visualizar logs de auditoria
dependencias_tecnicas:
  backend:
  - .NET 10
  - Entity Framework Core 10
  - MediatR (CQRS)
  - FluentValidation
  - Hangfire (jobs)
  - SignalR (real-time)
  - Azure.AI.TextAnalytics (NLP)
  frontend:
  - Angular 19
  - Chart.js (gráficos)
  - Transloco (i18n)
  - ngx-file-upload
  - ApexCharts (word cloud)
  infraestrutura:
  - Azure Cognitive Services (Text Analytics)
  - SendGrid (email)
  - Twilio (SMS)
  - Redis (cache - opcional)
endpoints:
  crud:
  - metodo: GET
    rota: /api/pesquisas/templates
    descricao: Listar templates (paginado)
  - metodo: GET
    rota: /api/pesquisas/templates/{id}
    descricao: Obter template por ID
  - metodo: POST
    rota: /api/pesquisas/templates
    descricao: Criar novo template
  - metodo: PUT
    rota: /api/pesquisas/templates/{id}
    descricao: Atualizar template
  - metodo: DELETE
    rota: /api/pesquisas/templates/{id}
    descricao: Excluir template
  operacoes_especiais:
  - metodo: POST
    rota: /api/pesquisas/{id}/enviar
    descricao: Enviar pesquisa (lote usuários)
  - metodo: GET
    rota: /api/pesquisas/{id}/nps
    descricao: Calcular NPS
  - metodo: GET
    rota: /api/pesquisas/{id}/csat
    descricao: Calcular CSAT
  - metodo: GET
    rota: /api/pesquisas/{id}/ces
    descricao: Calcular CES
  - metodo: POST
    rota: /api/pesquisas/responder
    descricao: Responder pesquisa (público)
    autenticacao: AllowAnonymous
kpis:
- nome: NPS (Net Promoter Score)
  meta: ≥32 (Bom)
  medicao: Trimestral
- nome: CSAT (Customer Satisfaction)
  meta: ≥75%
  medicao: Contínuo
- nome: CES (Customer Effort Score)
  meta: ≤3.0
  medicao: Por processo
- nome: Taxa de Resposta
  meta: ≥45%
  medicao: Por pesquisa
- nome: Taxa Recuperação Detratores
  meta: ≥40%
  medicao: Mensal
- nome: Tempo Médio Follow-up
  meta: ≤2h
  medicao: Contínuo
- nome: Conversão Detrator → Promotor
  meta: ≥15%
  medicao: Trimestral
- nome: Correlação CSAT × Tempo Resolução
  meta: r ≥0.7
  medicao: Mensal
- nome: Taxa Fadiga Pesquisa
  meta: ≤5%
  medicao: Mensal
- nome: Acurácia NLP
  meta: ≥85%
  medicao: Trimestral
catalog:
  regras_negocio:
  - id: RN-RF071-001
    title: Frequência Máxima de Pesquisas (Anti-Fadiga)
    required: true
    description: Limite 1 pesquisa a cada 7 dias por usuário (configurável)
  - id: RN-RF071-002
    title: Cálculo Automático de NPS
    required: true
    description: ''
  - id: RN-RF071-003
    title: Follow-up Automático para Detratores
    required: true
    description: ''
  - id: RN-RF071-004
    title: Anonimização Configurável por Tipo de Pesquisa
    required: true
    description: ''
  - id: RN-RF071-005
    title: Análise de Sentimento Automática (NLP)
    required: true
    description: ''
  - id: RN-RF071-006
    title: Validação de Taxa de Resposta Mínima
    required: true
    description: ''
  - id: RN-RF071-007
    title: Expiração de Link de Pesquisa
    required: true
    description: ''
  - id: RN-RF071-008
    title: Cálculo de CES (Customer Effort Score)
    required: true
    description: ''
  - id: RN-RF071-009
    title: Correlação Automática com Chamado de Origem
    required: true
    description: ''
  - id: RN-RF071-010
    title: Limite de Caracteres em Respostas Abertas
    required: true
    description: ''
  - id: RN-RF071-011
    title: Prazo SLA de Follow-up para Gestores
    required: true
    description: ''
  - id: RN-RF071-012
    title: Dashboard Atualização SignalR
    required: true
    description: ''
