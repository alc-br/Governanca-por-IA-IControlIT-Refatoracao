rf: RF037
fase: Fase-4-Financeiro-II-Processos
epic: EPIC007-FIN-Financeiro-Processos
titulo: Gestao de Custos por Ativo
versao: "2.0"
data_migracao: "2025-12-30"

skeleton:
  criado: True
  data_criacao: "2025-12-27"
  observacao: "Backend parcialmente implementado: 10% completo. Implementado: CRUD basico Custos Ativos (5 endpoints - CustosAtivos.cs). Faltam: Calculo automatico TCO tempo real via Domain Events (CustoAtivoCriadoDomainEvent/CustoAtivoEditadoDomainEvent/CustoAtivoExcluidoDomainEvent disparando RecalcularTCOEventHandler para somar custos por categoria Aquisicao/Manutencao/Licencas/Consumiveis/Energia/Depreciacao + atualizar campos TCOTotal/TCOAquisicao/TCOManutencao/TCOLicencas/TCOConsumiveis no Ativo), depreciacao automatica mensal (Hangfire job dia 1 02:00 UTC calculando depreciacao Linear ou Acelerada baseado vida util configuravel por tipo ativo + valor residual fim vida util + atualizacao campo Valor_Atual_Depreciado + geracao relatorio contabilidade), analise ROI automatica (calculo ROI = (Beneficio_Gerado - TCOTotal) / TCOTotal * 100 + calculo payback period meses para recuperar investimento + projecao ROI futuro baseada tendencias + recomendacao automatica substituicao se ROI < 0%), comparacao benchmarking ativos (calculo TCO medio por tipo ativo + ranking ativos mais/menos custosos + identificacao outliers custos anormais Machine Learning + analise eficiencia custo TCO/beneficio), dashboard TCO interativo Chart.js (grafico evolucao custos tempo Line Chart mensal/anual, breakdown custos por categoria Pie Chart Aquisicao/OPEX/Consumiveis/Energia, top 10 ativos maior TCO Bar Chart, indicadores ROI positivo/negativo KPI cards com SignalR tempo real, comparativo TCO similar assets Radar Chart), TCO por periodo (calculo TCO mensal = SUM custos mes, TCO anual = SUM custos ano, TCO total = SUM todos custos historico), TCO unitario (TCO por usuario = TCO total / qtd usuarios alocados, TCO por pagina impressa = TCO total / total paginas, TCO por hora uso = TCO total / horas operacao), integracao contabilidade externa (export lancamentos formato D-E Debito-Credito para SAP/TOTVS/Protheus via API REST retry 3x), relatorios gerenciais consolidados (relatorio depreciacao anual Excel/PDF export, consolidacao custos por centro custo Chart.js, drill-down custos por categoria com detalhamento itens)."
documentacao:
  rf: True
  rf_yaml: True
  uc: True
  md: True
  wf: True
  rl: True
  rl_yaml: True

separacao_rf_rl:
  rf_limpo: True
  rl_completo: True
  itens_com_destino: True
  validador_executado: True
  cobertura_destinos: 100.0
  total_referencias_legado: 9

desenvolvimento:
  backend:
    status: skeleton   # not_started | in_progress | done | skeleton
    contrato_validado: true
    contrato: CONTRATO-EXECUCAO-BACKEND
    versao_contrato: v1.0
    branch: feature/RF037-backend
  frontend:
    status: done
    branch: feature/RF037-frontend

testes:
  backend: not_run        # not_run | pass | fail
  frontend: pass
  e2e: pass
  seguranca: not_run

documentacao_testes:
  backend: False
  frontend: False
  e2e: False
  seguranca: False

testes_ti:
  backend: not_run
  frontend: not_run
  e2e: not_run
  seguranca: not_run

testes_qa:
  executado: False       # True quando QA executou
  aprovado: False        # True quando usuario aprovou

devops:
  work_item_id: 566
  test_plan_id: null
  last_sync: "2025-12-27 15:31:39"
  board_column: "Skeleton"

governanca:
  contrato_ativo: CONTRATO-EXECUCAO-TESTES
  ultimo_manifesto: "2025-12-24 - Frontend concluÃ­do"
