rf: RF057
fase: Fase-4-Financeiro-II-Processos
epic: EPIC007-FIN-Financeiro-Processos
titulo: Gestao de Itens Rateio


skeleton:
  criado: True
  data_criacao: "2025-12-27"
  observacao: "Backend parcialmente implementado: 15% completo. Implementado: CRUD basico Itens Rateio (5 endpoints - RateioItens.cs). Faltam: Categorizacao itens (Enum CategoriaItem: LinhaMobile telefonia voz+dados, LicencaSoftware Office/Adobe/Salesforce, LinkDados internet/MPLS/VPN, Equipamento laptops/desktops/monitores), rateio dedicado vs compartilhado (ItemRateio com TipoRateio DEDICADO alocacao 100% um CC ou COMPARTILHADO dividido multiplos CCs + List AlocacaoItem validando soma percentuais = 100%), separacao custos fixos variavel (CustoItem com CustoFixo franquia mensal + CustoVariavel excedente uso + rateio separado cada tipo aplicando percentuais alocacao), gestao excecoes rateio (ExcecaoRateio temporaria ou permanente com motivo + ExcluirTotalmente flag + DataInicio/DataFim validar periodo vigencia excecao), historico mudancas alocacao versionado (HistoricoAlocacao arquivando versoes anteriores com DataInicio/DataFim vigencia + UsuarioAlteracaoId rastreabilidade + consulta versao especifica periodo passado), rateio proporcional uso real (para itens compartilhados ratear baseado Consumos.Quantidade medido individualmente calculando percentual uso cada usuario/CC + distribuir CustoTotal proporcionalmente), relatorios analises (custo total por item Chart.js Bar, top itens mais caros ranking ordenado valor descendente, itens sem uso candidatos cancelamento Consumos.Quantidade = 0 ultimos 3 meses, evolucao custo item Line Chart mensal/anual com tendencias), validacoes negocio (soma percentuais alocacoes deve ser exatamente 100% com Math.Abs(soma - 100m) > 0.01m retornar erro, item nao pode ter alocacao duplicada mesmo CC, mudancas alocacao registrar auditoria completa)."
documentacao:
  rf: True
  rl: True  # RL-RF057.md e RL-RF057.yaml criados (funcionalidade nova sem legado)
  uc: True  # UC-RF057.md v2.0 (11 UCs - UC00-UC10)
  uc_yaml: True  # UC-RF057.yaml (estrutura canônica - 100% cobertura das 15 RNs)
  md: True
  wf: True
  versao_governanca: "2.0"
  separacao_rf_rl: validada
  data_migracao_v2: "2025-01-14"
  validador_rl_exit_code: null  # Não executado ainda (será executado na validação final)
  validador_uc_exit_code: 0
  validador_uc_data: "2025-12-31"
  validador_uc_taxa_conformidade: "100%"
  itens_legado_rastreados: 5  # 5 itens documentados em RL-RF057.yaml
  itens_com_destino: 5  # 100% dos itens têm campo destino preenchido
  cobertura_destinos: "100%"

desenvolvimento:
  backend:
    status: skeleton   # not_started | in_progress | done | skeleton
    contrato_validado: true
    contrato: CONTRATO-EXECUCAO-BACKEND
    versao_contrato: v1.0
    branch: null
  frontend:
    status: not_started
    branch: null

testes:
  backend: not_run        # not_run | pass | fail
  frontend: not_run
  e2e: not_run
  seguranca: not_run

documentacao_testes:
  backend: False
  frontend: False
  e2e: False
  seguranca: False

testes_ti:
  backend: not_run
  frontend: not_run
  e2e: not_run
  seguranca: not_run

testes_qa:
  executado: False       # True quando QA executou
  aprovado: False        # True quando usuario aprovou

devops:
  work_item_id: 570
  test_plan_id: null
  last_sync: "2025-12-27 15:31:54"
  board_column: "Skeleton"

governanca:
  contrato_ativo: CONTRATO-DOCUMENTACAO-ESSENCIAL
  ultimo_manifesto: null

separacao_rf_rl:
  rf_limpo: True  # RF057.md não contém conteúdo legado (funcionalidade nova)
  rl_completo: True  # RL-RF057.md documenta que é funcionalidade nova sem legado
  itens_com_destino: True  # 100% dos 5 itens em RL-RF057.yaml têm campo destino
  validador_executado: False  # Será executado na fase de validação final
