# =============================================
# UC - Casos de Uso (Contrato Comportamental)
# Versão: 1.0
# Autor padrão: Agência ALC - alc.dev.br
# =============================================

uc:
  rf: "RFXXX"
  versao: "1.0"
  data: "YYYY-MM-DD"

casos_de_uso:

  - id: "UC00"
    nome: "Listar Entidade"
    ator_principal: "usuario_autenticado"
    tipo: "leitura" # crud | leitura | acao | batch
    impacta_dados: false

    covers:
      rf_items:
        - "RF-CRUD-02"
      uc_items:
        - id: "FP-UC00-001"
          title: "Usuário acessa a funcionalidade"
          required: true
        - id: "FP-UC00-002"
          title: "Sistema valida permissão"
          required: true
        - id: "FP-UC00-003"
          title: "Sistema carrega registros do tenant"
          required: true
        - id: "FP-UC00-004"
          title: "Sistema aplica paginação e ordenação"
          required: true
        - id: "FP-UC00-005"
          title: "Sistema exibe a lista"
          required: true
        - id: "FA-UC00-001"
          title: "Buscar por termo"
          required: false
        - id: "FA-UC00-002"
          title: "Ordenar por coluna"
          required: false
        - id: "FA-UC00-003"
          title: "Filtrar por status"
          required: false
        - id: "FE-UC00-001"
          title: "Usuário sem permissão → acesso negado"
          required: true
        - id: "FE-UC00-002"
          title: "Nenhum registro → estado vazio exibido"
          required: true

    precondicoes:
      - permissao: "entidade.view_any"

    gatilho: "Usuario acessa a funcionalidade pelo menu"

    fluxo_principal:
      - passo: 1
        ator: "usuario"
        acao: "acessa_menu"
      - passo: 2
        ator: "sistema"
        acao: "validar_permissao"
      - passo: 3
        ator: "sistema"
        acao: "listar_registros_tenant"
      - passo: 4
        ator: "sistema"
        acao: "exibir_lista"

    fluxos_alternativos:
      - id: "FA-UC00-01"
        condicao: "usuario_aplica_filtro"
        resultado: "lista_filtrada"

    fluxos_excecao:
      - id: "FE-UC00-01"
        condicao: "sem_permissao"
        resultado: "acesso_negado"

    regras_aplicadas:
      - "RN-MOD-XXX-01"

    resultado_final:
      estado: "lista_exibida"

  - id: "UC01"
    nome: "Criar Entidade"
    ator_principal: "usuario_autenticado"
    tipo: "crud" # crud | leitura | acao | batch
    impacta_dados: true

    covers:
      rf_items:
        - "RF-CRUD-01"
        - "RF-VAL-01"
        - "RF-VAL-02"
        - "RF-SEC-01"
      uc_items:
        - id: "FP-UC01-001"
          title: "Usuário solicita criação"
          required: true
        - id: "FP-UC01-002"
          title: "Sistema valida permissão"
          required: true
        - id: "FP-UC01-003"
          title: "Sistema exibe formulário"
          required: true
        - id: "FP-UC01-004"
          title: "Usuário informa dados"
          required: true
        - id: "FP-UC01-005"
          title: "Sistema valida dados"
          required: true
        - id: "FP-UC01-006"
          title: "Sistema cria registro"
          required: true
        - id: "FP-UC01-007"
          title: "Sistema registra auditoria"
          required: true
        - id: "FP-UC01-008"
          title: "Sistema confirma sucesso"
          required: true
        - id: "FA-UC01-001"
          title: "Salvar e criar outro"
          required: false
        - id: "FA-UC01-002"
          title: "Cancelar criação"
          required: false
        - id: "FE-UC01-001"
          title: "Erro de validação"
          required: true
        - id: "FE-UC01-002"
          title: "Registro duplicado"
          required: true
        - id: "FE-UC01-003"
          title: "Erro inesperado"
          required: true

    precondicoes:
      - permissao: "entidade.create"

    gatilho: "Usuario clica em Novo"

    fluxo_principal:
      - passo: 1
        ator: "sistema"
        acao: "exibir_formulario"
      - passo: 2
        ator: "usuario"
        acao: "preencher_campos"
      - passo: 3
        ator: "usuario"
        acao: "salvar"
      - passo: 4
        ator: "sistema"
        acao: "validar_dados"
      - passo: 5
        ator: "sistema"
        acao: "persistir_registro"
      - passo: 6
        ator: "sistema"
        acao: "registrar_auditoria"

    fluxos_excecao:
      - id: "FE-UC01-01"
        condicao: "validacao_falhou"
        resultado: "exibir_erros"

    regras_aplicadas:
      - "RN-MOD-XXX-01"
      - "RN-MOD-XXX-02"

    resultado_final:
      estado: "registro_criado"

exclusions:
  uc_items: []

historico:
  - versao: "1.0"
    data: "YYYY-MM-DD"
    autor: "Agência ALC - alc.dev.br"
    descricao: "Versao inicial"
