# Template de Referência ao Legado (RL-RFXXX.yaml)
# Versão: 2.0 (Adequação para Automação e Rastreabilidade)
# Data: 2025-12-29

rf_id: RFXXX
titulo: "[Título do RF Moderno]"

legado:
  sistema: "VB.NET + ASP.NET Web Forms"
  versao: "[Versão do sistema legado]"
  arquitetura: "Monolítica WebForms"
  banco_dados: "SQL Server"
  multi_tenant: false
  auditoria: "none"  # none | partial | full

# SEÇÃO CRÍTICA: Referencias ao Legado com Destino Obrigatório
# Cada item DEVE ter campo "destino" preenchido
referencias:
  - id: "LEG-RFXXX-001"
    tipo: "tela"  # tela | webservice | stored_procedure | regra_negocio | componente
    nome: "[Nome da tela/componente legado]"
    caminho: "ic1_legado/IControlIT/[caminho]"
    descricao: |
      [Descrição do comportamento legado]
      [Incluir regras implícitas, validações, etc]

    # CAMPO OBRIGATÓRIO: Destino do item legado
    destino: "assumido"  # assumido | substituido | descartado | a_revisar
    justificativa: |
      [Por que este comportamento foi assumido/substituído/descartado]
      [Impacto da decisão]

    # Rastreabilidade (opcional mas recomendado)
    documentacao_item_relacionado: "RN-RFXXX-01"  # Regra de negócio no RF moderno
    uc_relacionado: "UC01"  # Caso de uso que implementa

    # Metadados adicionais (opcional)
    complexidade: "alta"  # baixa | media | alta
    risco_migracao: "medio"  # baixo | medio | alto
    prioridade: 1  # 1 (crítico) a 5 (baixo)

  - id: "LEG-RFXXX-002"
    tipo: "webservice"
    nome: "[Nome do WebService]"
    caminho: "ic1_legado/IControlIT/Services/[arquivo].asmx"
    descricao: |
      [Descrição do serviço]
    destino: "substituido"
    justificativa: |
      [Por que foi substituído por nova implementação]
    documentacao_item_relacionado: "RN-RFXXX-05"
    uc_relacionado: "UC02"

  - id: "LEG-RFXXX-003"
    tipo: "stored_procedure"
    nome: "[Nome da Stored Procedure]"
    caminho: "Database/[schema].[procedure_name]"
    descricao: |
      [Lógica do procedimento]
    destino: "descartado"
    justificativa: |
      [Por que esta lógica não será migrada]
      [Alternativa implementada ou não necessária]
    documentacao_item_relacionado: null
    uc_relacionado: null

  - id: "LEG-RFXXX-004"
    tipo: "regra_negocio"
    nome: "[Nome da Regra Implícita]"
    caminho: "ic1_legado/IControlIT/[arquivo].vb"
    descricao: |
      [Regra de negócio não documentada encontrada no código]
    destino: "a_revisar"
    justificativa: |
      [Motivo para revisão manual necessária]
      [Dúvidas sobre manter ou descartar]
    documentacao_item_relacionado: null
    uc_relacionado: null
    complexidade: "alta"
    risco_migracao: "alto"
    prioridade: 1

# Telas Legadas (estrutura detalhada opcional)
telas:
  - id: "LEG-RFXXX-001"
    nome: "[Nome da Tela]"
    caminho: "ic1_legado/IControlIT/[caminho].aspx"
    responsabilidade: "[O que a tela faz]"
    campos:
      - nome: "[Campo]"
        tipo: "[TextBox / DropDown / etc]"
        obrigatorio: true
        validacao: "[Validação aplicada]"
    comportamentos_implicitos:
      - "[Comportamento não documentado]"
      - "[Regra escondida no código]"

# WebServices Legados
servicos:
  - id: "LEG-RFXXX-002"
    nome: "[Nome do Serviço]"
    localizacao: "[Classe.asmx]"
    responsabilidade: "[O que faz]"
    notas: "[Observações]"

# Tabelas Legadas com Problemas
tabelas:
  - nome: "[Tabela]"
    finalidade: "[Para que serve]"
    problemas:
      - "[Falta de chave primária]"
      - "[Dados duplicados]"
      - "[Sem auditoria]"

# Regras de Negócio Implícitas (não documentadas no legado)
regras_implicitas:
  - id: "RL-RN-001"
    descricao: |
      [Descrição da regra implícita]
    fonte: "[Onde foi encontrada - arquivo, linha]"

# Gap Analysis (Legado x Moderno)
gap_analysis:
  - item: "[Funcionalidade]"
    existe_legado: true
    existe_moderno: false
    notas: "[Precisa ser implementado]"

  - item: "[Outra Funcionalidade]"
    existe_legado: false
    existe_moderno: true
    notas: "[Nova funcionalidade sem equivalente legado]"

# Decisões de Modernização
decisoes_modernizacao:
  - decisao: "[Decisão tomada]"
    motivo: |
      [Justificativa técnica/negócio]
    impacto: "alto"  # baixo | medio | alto
    data: "YYYY-MM-DD"

# Riscos de Migração
riscos_migracao:
  - risco: "[Risco identificado]"
    impacto: "alto"  # baixo | medio | alto
    probabilidade: "media"  # baixa | media | alta
    mitigacao: |
      [Plano de mitigação]

# Rastreabilidade (Legado → Moderno)
rastreabilidade:
  - elemento_legado: "[Tela/Componente]"
    referencia_rf: "RN-RFXXX-01"
    referencia_uc: "UC01"
    status: "migrado"  # migrado | em_analise | descartado

# Changelog
changelog:
  - versao: "2.0"
    data: "2025-12-29"
    descricao: "Adequação para automação e rastreabilidade (campo destino obrigatório)"
    autor: "Agência ALC - alc.dev.br"

  - versao: "1.0"
    data: "YYYY-MM-DD"
    descricao: "Template inicial de referência ao legado"
    autor: "Agência ALC - alc.dev.br"
